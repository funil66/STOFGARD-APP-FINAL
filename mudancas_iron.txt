diff --git a/.phpunit.cache/test-results b/.phpunit.cache/test-results
index 759d783..a9884d1 100644
--- a/.phpunit.cache/test-results
+++ b/.phpunit.cache/test-results
@@ -1 +1 @@
-{"version":2,"defects":{"Tests\\Feature\\PuppeteerOrcamentoPdfContentTest::test_generated_pdf_contains_expected_sections":8,"Tests\\Feature\\PuppeteerOrcamentoPdfTest::test_puppeteer_generates_pdf_file":8,"Tests\\Unit\\ClaudeApiAdapterTest::test_adapter_removed":1,"Tests\\Unit\\ClaudeHaikuProviderTest::test_provider_removed":1,"Tests\\Feature\\AdminLoginTest::test_rate_limit_blocks_after_repeated_failures":7,"Tests\\Feature\\OrcamentoPdfTest::test_generate_and_save_pdf_creates_file_and_persists_preference":7,"Tests\\Feature\\ClienteResourceFeatureFlagTest::test_feature_flags_removed":1,"Tests\\Feature\\ToggleClienteFeatureCommandTest::test_enable_feature_for_single_cliente":1,"Tests\\Feature\\ToggleClienteFeatureCommandTest::test_disable_feature_for_all_clients":1,"Tests\\Unit\\ClienteFeaturesTest::test_feature_flags_removed_unit":1,"Tests\\Feature\\ParceiroLojaVendedorTest::test_vendedor_belongs_to_loja_and_loja_has_vendedores":8,"Tests\\Feature\\CadastrosRedirectTest::test_cadastros_index_redirects_to_unified_view":8,"Tests\\Browser\\CadastrosViewTest::test_cadastros_view_shows_columns_and_screenshot":1,"Tests\\Browser\\ExampleTest::testBasicExample":8,"Tests\\Browser\\CadastrosBadgesTest::test_cadastros_show_badges_and_screenshot":1,"Tests\\Feature\\ArquivosControllerTest::test_admin_can_download_and_delete_file":7,"Tests\\Feature\\CadastrosViewTest::test_cadastros_view_contains_clientes_parceiros_and_columns":8,"Tests\\Feature\\CadastroPublicTest::test_index_shows_cadastros":8,"Tests\\Feature\\CadastroPublicTest::test_show_displays_cadastro":8,"Tests\\Feature\\CadastroPublicTest::test_edit_requires_auth_and_persists_changes":8,"Tests\\Feature\\CadastroPublicTest::test_destroy_requires_auth_and_soft_deletes":8,"Tests\\Feature\\AgendaTest::test_agenda_getCadastroAttribute_returns_cliente":8,"Tests\\Feature\\AgendaTest::test_agenda_getCadastroAttribute_returns_parceiro":8,"Tests\\Feature\\CadastroAdminRestoreTest::test_admin_index_shows_restore_bulk_action_when_there_are_trashed_records":8,"Tests\\Feature\\CadastroViewAccessTest::test_user_with_is_admin_set_to_int_one_can_access":8,"Tests\\Feature\\FinanceiroResourceTest::test_create_financeiro_with_parceiro_cadastro_sets_parceiro_and_cadastro":8,"Tests\\Feature\\FinanceiroResourceTest::test_create_financeiro_with_cliente_cadastro_sets_cliente_and_cadastro":7,"Tests\\Feature\\ListCadastrosRedirectTest::test_old_cadastros_list_redirects_to_unified_view":7,"Tests\\Feature\\OrcamentoResourceTest::test_orcamento_model_stores_cadastro_and_getCadastro_returns_model":8,"Tests\\Feature\\OrcamentoResourceTest::test_orcamento_model_accepts_parceiro_cadastro_and_getCadastro_returns_parceiro":8,"Tests\\Feature\\RelatoriosTest::test_servicos_report_filters_by_cadastro":8,"Tests\\Feature\\RelatoriosTest::test_financeiro_report_filters_by_cadastro":8,"Tests\\Feature\\RelatoriosTest::test_clientes_report_respects_cadastro_filter":8,"Tests\\Feature\\AdminLoginTest::test_successful_post_redirects_to_admin":7,"Tests\\Feature\\AdminLoginTest::test_failed_login_shows_error_and_increments_attempts":7,"Tests\\Feature\\LlmManagerIntegrationTest::test_manager_uses_default_provider_for_all_clients":8,"Tests\\Feature\\OrcamentoObserverTest::it_creates_ordem_servico_and_agenda_when_orcamento_is_created_as_aprovado":8,"Tests\\Feature\\OrcamentoObserverTest::it_creates_ordem_servico_and_agenda_when_orcamento_is_updated_to_aprovado":8,"Tests\\Feature\\OrcamentoObserverTest::it_does_not_create_ordem_servico_if_status_is_not_aprovado":8,"Tests\\Feature\\OrcamentoPdfTest::test_pdf_includes_qr_when_env_key_set":7,"Tests\\Feature\\OrdemServicoObserverTest::it_creates_agenda_and_financeiro_when_os_is_created":7,"Tests\\Feature\\StaticPixQrCodeTest::it_saves_data_uri_base64_on_generate":8,"Tests\\Unit\\LlmServiceTest::test_choose_model_returns_default_when_no_models_configured":8,"Tests\\Unit\\LlmServiceTest::test_is_model_available_for_cliente_returns_false_for_unknown_model":8,"Tests\\Feature\\CadastroNavigationTest::test_dashboard_shows_cadastro_and_hides_legacy_menus":7,"Tests\\Feature\\CadastroResourceFieldsTest::test_loja_vinculada_field_shown_for_vendedor_on_edit":7,"Tests\\Feature\\CadastroFilesDownloadTest::test_index_shows_file_name_and_download_link":8,"Tests\\Feature\\CadastroFileAuthorizationTest::test_admin_can_delete_cadastro":8,"Tests\\Feature\\CadastrosLivewireShowTest::test_show_renders_cliente_fields":8,"Tests\\Feature\\CadastrosLivewireShowTest::test_show_renders_parceiro_fields":8,"Tests\\Browser\\CadastrosLivewireDuskTest::test_admin_can_edit_and_upload_file_and_download":8,"Tests\\Browser\\CadastrosLivewireDuskTest::test_admin_can_edit_and_upload_file_and_toggle_types":1,"Tests\\Feature\\CadastroEditLivewireTest::test_parceiro_initializes_with_tipo_and_switch_back_to_cliente":8,"Tests\\Feature\\AdminClientesRedirectTest::test_admin_clientes_redirects_to_admin_cadastros":7,"Tests\\Feature\\CadastroEditLivewireTest::test_switching_cadastro_kind_updates_internal_state":8,"Tests\\Feature\\CadastroFileAuthorizationTest::test_guest_is_redirected_when_trying_to_download_file":8,"Tests\\Feature\\CadastroFileAuthorizationTest::test_authenticated_user_can_download_existing_file":8,"Tests\\Feature\\CadastroFileAuthorizationTest::test_non_admin_cannot_delete_cadastro":8,"Tests\\Feature\\CadastroTypeRoutesTest::test_lojas_route_shows_lojas":8,"Tests\\Feature\\CadastroTypeRoutesTest::test_vendedores_route_shows_vendedores":8,"Tests\\Feature\\CadastrosFilesMissingTest::test_missing_file_shows_indicator_and_no_link_for_guest":8,"Tests\\Feature\\CadastrosLegacyIdFallbackTest::test_numeric_id_redirects_to_uuid":7,"Tests\\Unit\\CadastroPolicyTest::test_admin_can_update_and_delete":8,"Tests\\Unit\\CadastroPolicyTest::test_non_admin_cannot_update_or_delete":8,"Tests\\Unit\\CadastroPolicyTest::test_authenticated_user_can_download":8,"Tests\\Feature\\CadastroFichaPdfTest::it_generates_ficha_cadastral_pdf_without_signature_fields":7,"Tests\\Feature\\FinanceiroResourceTest::it_can_access_categoria_relationship_without_conflict":8,"Tests\\Feature\\FinanceiroResourceTest::it_can_access_filament_resource_without_errors":8,"Tests\\Feature\\FinanceiroResourceTest::it_handles_null_categoria_relationship_gracefully":8,"Tests\\Feature\\FinanceiroFilamentAccessTest::financeiro_categoria_accessor_returns_relationship_object":1,"Tests\\Feature\\FinanceiroRoutingTest::it_can_access_new_financeiro_routes_correctly":7,"Tests\\Feature\\SmokeTest::test_application_is_up":8,"Tests\\Feature\\SmokeTest::test_can_create_cadastro_via_factory":8,"Tests\\Feature\\SmokeTest::test_can_create_cadastro_loja_via_factory":8,"Tests\\Feature\\SmokeTest::test_can_create_orcamento_linked_to_cadastro":8,"Tests\\Unit\\CadastroEnderecoTest::test_format_endereco_uses_endereco_completo":7,"Tests\\Unit\\CadastroEnderecoTest::test_format_endereco_composes_from_fields":8,"Tests\\Feature\\CadastroFichaPdfTest::it_generates_pdf_template_without_signature_sections":8,"Tests\\Feature\\ExampleTest::test_the_application_returns_a_successful_response":8,"Tests\\Feature\\FinanceiroFilamentAccessTest::it_can_access_financeiro_index_without_categoria_conflict_error":7,"Tests\\Feature\\FinanceiroRoutingTest::legacy_transacao_financeira_system_is_removed":8,"Tests\\Browser\\FinanceiroTest::testIndexFinanceiro":7,"Tests\\Browser\\FinanceiroTest::testCreateFinanceiro":8,"Tests\\Browser\\AgendaTest::testCreateAgenda":1,"Tests\\Browser\\AgendaTest::testIndexAgenda":7,"Tests\\Browser\\OrdemServicoTest::testIndexOrdemServico":7,"Tests\\Browser\\OrdemServicoTest::testCreateOrdemServico":1,"Tests\\Browser\\AgendaTest::testEditAgenda":8,"Tests\\Browser\\AgendaTest::test_create_agenda":1,"Tests\\Browser\\OrdemServicoTest::test_create_ordem_servico":8,"Tests\\Browser\\FinanceiroTest::test_create_financeiro":8,"Tests\\Browser\\OrdemServicoTest::test_index_ordem_servico":7,"Tests\\Unit\\ProLaboreCalculatorTest::test_calcular_lucro_liquido":8,"Tests\\Feature\\AuditTrailTest::test_financeiro_records_updated_by":8,"Tests\\Unit\\Services\\EstoqueServiceTest::test_adicionar_estoque_incrementa_quantidade":8,"Tests\\Unit\\Services\\EstoqueServiceTest::test_consumir_estoque_decrementa_quantidade":8,"Tests\\Unit\\Services\\EstoqueServiceTest::test_nao_consumir_estoque_se_insuficiente":8,"Tests\\Unit\\Services\\EquipamentoServiceTest::test_enviar_para_lista_desejos_cria_registro":8,"Tests\\Unit\\Services\\FinanceiroServiceTest::test_baixar_pagamento_atualiza_status":8,"Tests\\Unit\\Services\\FinanceiroServiceTest::test_estornar_pagamento_reverte_status":8,"Tests\\Browser\\FrontendVerificationTest::testAdminPanelRoutes":7,"Tests\\Browser\\FrontendVerificationTest::testResponsiveLayout":7},"times":{"Tests\\Feature\\AdminLoginTest::test_post_to_admin_login_is_not_allowed":0.456,"Tests\\Feature\\AgendaTest::test_agenda_getCadastroAttribute_returns_cliente":0.02,"Tests\\Feature\\AgendaTest::test_agenda_getCadastroAttribute_returns_parceiro":0.004,"Tests\\Feature\\ClienteResourceFeatureFlagTest::test_features_are_mass_assignable_and_persisted":0.001,"Tests\\Feature\\ExampleTest::test_the_application_returns_a_successful_response":0.021,"Tests\\Feature\\FinanceiroResourceTest::test_create_financeiro_with_parceiro_cadastro_sets_parceiro_and_cadastro":0.001,"Tests\\Feature\\FinanceiroResourceTest::test_create_financeiro_with_cliente_cadastro_sets_cliente_and_cadastro":0.297,"Tests\\Feature\\LlmManagerIntegrationTest::test_manager_uses_default_provider_for_all_clients":0.003,"Tests\\Feature\\OrcamentoObserverTest::it_creates_ordem_servico_and_agenda_when_orcamento_is_created_as_aprovado":0.02,"Tests\\Feature\\OrcamentoObserverTest::it_creates_ordem_servico_and_agenda_when_orcamento_is_updated_to_aprovado":0.003,"Tests\\Feature\\OrcamentoObserverTest::it_does_not_create_ordem_servico_if_status_is_not_aprovado":0.003,"Tests\\Feature\\OrcamentoPdfTest::test_pdf_includes_qr_when_env_key_set":1.014,"Tests\\Feature\\OrcamentoPdfTest::test_generate_and_save_pdf_creates_file_and_persists_preference":0.027,"Tests\\Feature\\OrcamentoResourceTest::test_orcamento_model_stores_cadastro_and_getCadastro_returns_model":0.002,"Tests\\Feature\\OrcamentoResourceTest::test_orcamento_model_accepts_parceiro_cadastro_and_getCadastro_returns_parceiro":0.001,"Tests\\Feature\\OrdemServicoObserverTest::it_creates_agenda_and_financeiro_when_os_is_created":0.004,"Tests\\Feature\\PuppeteerOrcamentoPdfContentTest::test_generated_pdf_contains_expected_sections":0.003,"Tests\\Feature\\PuppeteerOrcamentoPdfTest::test_puppeteer_generates_pdf_file":0.004,"Tests\\Feature\\RelatoriosTest::test_servicos_report_filters_by_cadastro":0.164,"Tests\\Feature\\RelatoriosTest::test_financeiro_report_filters_by_cadastro":0.002,"Tests\\Feature\\RelatoriosTest::test_clientes_report_respects_cadastro_filter":0.002,"Tests\\Feature\\StaticPixQrCodeTest::it_saves_data_uri_base64_on_generate":0.003,"Tests\\Feature\\ToggleClienteFeatureCommandTest::test_enable_feature_for_single_cliente":0,"Tests\\Feature\\ToggleClienteFeatureCommandTest::test_disable_feature_for_all_clients":0,"Tests\\Unit\\ClaudeApiAdapterTest::test_adapter_removed":0,"Tests\\Unit\\ClaudeHaikuProviderTest::test_provider_removed":0,"Tests\\Unit\\ClienteFeaturesTest::test_enable_and_disable_feature_on_cliente":0.002,"Tests\\Unit\\ExampleTest::test_that_true_is_true":0,"Tests\\Unit\\LlmServiceTest::test_choose_model_returns_default_when_no_models_configured":0.001,"Tests\\Unit\\LlmServiceTest::test_is_model_available_for_cliente_returns_false_for_unknown_model":0.001,"Tests\\Feature\\AdminLoginTest::test_post_to_admin_login_redirects_to_get":0.044,"Tests\\Feature\\AdminLoginTest::test_successful_post_redirects_to_admin":0.375,"Tests\\Feature\\AdminLoginTest::test_failed_login_shows_error_and_increments_attempts":0.326,"Tests\\Feature\\AdminLoginTest::test_rate_limit_blocks_after_repeated_failures":0.332,"Tests\\Feature\\ClienteResourceFeatureFlagTest::test_feature_flags_removed":0,"Tests\\Unit\\ClienteFeaturesTest::test_feature_flags_removed_unit":0,"Tests\\Feature\\ParceiroLojaVendedorTest::test_vendedor_belongs_to_loja_and_loja_has_vendedores":0.003,"Tests\\Feature\\CadastrosViewTest::test_cadastros_view_contains_clientes_and_parceiros":0.004,"Tests\\Feature\\CadastrosRedirectTest::test_cadastros_index_redirects_to_unified_view":0.023,"Tests\\Feature\\CadastrosViewTest::test_cadastros_view_contains_clientes_parceiros_and_columns":0.003,"Tests\\Browser\\CadastrosViewTest::test_cadastros_view_shows_columns_and_screenshot":0,"Tests\\Browser\\ExampleTest::testBasicExample":0.534,"Tests\\Browser\\CadastrosBadgesTest::test_cadastros_show_badges_and_screenshot":0.013,"Tests\\Feature\\ListCadastrosRedirectTest::test_old_cadastros_list_redirects_to_unified_view":0.084,"Tests\\Feature\\CadastroViewAccessTest::test_user_with_is_admin_set_to_int_one_can_access":0.001,"Tests\\Feature\\ArquivosControllerTest::test_admin_can_download_and_delete_file":0.037,"Tests\\Feature\\CadastroPublicTest::test_index_shows_cadastros":0.001,"Tests\\Feature\\CadastroPublicTest::test_show_displays_cadastro":0.008,"Tests\\Feature\\CadastroPublicTest::test_edit_requires_auth_and_persists_changes":0.004,"Tests\\Feature\\CadastroPublicTest::test_destroy_requires_auth_and_soft_deletes":0.002,"Tests\\Feature\\CadastroAdminRestoreTest::test_admin_index_shows_restore_bulk_action_when_there_are_trashed_records":0.002,"Tests\\Feature\\CadastroNavigationTest::test_dashboard_shows_cadastro_and_hides_legacy_menus":0.068,"Tests\\Feature\\CadastroResourceFieldsTest::test_loja_vinculada_field_shown_for_vendedor_on_edit":0.029,"Tests\\Feature\\CadastroFilesDownloadTest::test_index_shows_file_name_and_download_link":0.003,"Tests\\Feature\\CadastroTypeRoutesTest::test_lojas_route_shows_lojas":0.002,"Tests\\Feature\\CadastroTypeRoutesTest::test_vendedores_route_shows_vendedores":0.002,"Tests\\Feature\\AdminClientesRedirectTest::test_admin_clientes_redirects_to_admin_cadastros":0.038,"Tests\\Feature\\CadastroFileAuthorizationTest::test_guest_is_redirected_when_trying_to_download_file":0.001,"Tests\\Feature\\CadastroFileAuthorizationTest::test_authenticated_user_can_download_existing_file":0.004,"Tests\\Feature\\CadastroFileAuthorizationTest::test_non_admin_cannot_delete_cadastro":0.002,"Tests\\Feature\\CadastroFileAuthorizationTest::test_admin_can_delete_cadastro":0.01,"Tests\\Feature\\CadastrosLivewireShowTest::test_show_renders_cliente_fields":0.001,"Tests\\Feature\\CadastrosLivewireShowTest::test_show_renders_parceiro_fields":0.001,"Tests\\Feature\\CadastrosLegacyIdFallbackTest::test_numeric_id_redirects_to_uuid":0.032,"Tests\\Feature\\CadastrosFilesMissingTest::test_missing_file_shows_indicator_and_no_link_for_guest":0.002,"Tests\\Unit\\CadastroPolicyTest::test_admin_can_update_and_delete":0.003,"Tests\\Unit\\CadastroPolicyTest::test_non_admin_cannot_update_or_delete":0.004,"Tests\\Unit\\CadastroPolicyTest::test_authenticated_user_can_download":0.003,"Tests\\Browser\\CadastrosLivewireDuskTest::test_admin_can_edit_and_upload_file_and_download":0.201,"Tests\\Browser\\CadastrosLivewireDuskTest::test_admin_can_edit_and_upload_file_and_toggle_types":0.232,"Tests\\Feature\\CadastroEditLivewireTest::test_switching_cadastro_kind_updates_internal_state":0.032,"Tests\\Feature\\CadastroEditLivewireTest::test_parceiro_initializes_with_tipo_and_switch_back_to_cliente":0.026,"Tests\\Feature\\SmokeTest::test_application_is_up":0.153,"Tests\\Feature\\SmokeTest::test_can_create_cadastro_via_factory":0.002,"Tests\\Feature\\SmokeTest::test_can_create_cadastro_loja_via_factory":0.002,"Tests\\Feature\\SmokeTest::test_can_create_orcamento_linked_to_cadastro":0.003,"Tests\\Feature\\CadastroFichaPdfTest::it_generates_ficha_cadastral_pdf_without_signature_fields":2.037,"Tests\\Feature\\CadastroFichaPdfTest::it_generates_pdf_template_without_signature_sections":0.073,"Tests\\Feature\\FinanceiroResourceTest::it_can_access_categoria_relationship_without_conflict":0.002,"Tests\\Feature\\FinanceiroResourceTest::it_can_access_filament_resource_without_errors":0.003,"Tests\\Feature\\FinanceiroResourceTest::it_handles_null_categoria_relationship_gracefully":0.001,"Tests\\Feature\\FinanceiroFilamentAccessTest::it_can_access_financeiro_index_without_categoria_conflict_error":0.231,"Tests\\Feature\\FinanceiroFilamentAccessTest::financeiro_categoria_accessor_returns_relationship_object":0.001,"Tests\\Feature\\FinanceiroRoutingTest::it_can_access_new_financeiro_routes_correctly":0.204,"Tests\\Feature\\FinanceiroRoutingTest::legacy_transacao_financeira_system_is_removed":0.001,"Tests\\Unit\\CadastroEnderecoTest::test_format_endereco_uses_endereco_completo":0,"Tests\\Unit\\CadastroEnderecoTest::test_format_endereco_composes_from_fields":0,"Tests\\Browser\\FinanceiroTest::testIndexFinanceiro":1.361,"Tests\\Browser\\FinanceiroTest::testCreateFinanceiro":4.886,"Tests\\Browser\\AgendaTest::testIndexAgenda":1.441,"Tests\\Browser\\AgendaTest::testCreateAgenda":0.005,"Tests\\Browser\\OrdemServicoTest::testIndexOrdemServico":1.584,"Tests\\Browser\\OrdemServicoTest::testCreateOrdemServico":0.003,"Tests\\Browser\\AgendaTest::testEditAgenda":11.165,"Tests\\Browser\\FinanceiroTest::test_index_financeiro":0.962,"Tests\\Browser\\FinanceiroTest::test_create_financeiro":4.948,"Tests\\Browser\\AgendaTest::test_index_agenda":1.612,"Tests\\Browser\\AgendaTest::test_create_agenda":0.003,"Tests\\Browser\\OrdemServicoTest::test_index_ordem_servico":1.152,"Tests\\Browser\\OrdemServicoTest::test_create_ordem_servico":12.615,"Tests\\Browser\\ExampleTest::test_basic_example":0.489,"Tests\\Unit\\ProLaboreCalculatorTest::test_calcular_lucro_liquido":0.007,"Tests\\Unit\\ProLaboreCalculatorTest::test_calcular_reserva":0,"Tests\\Unit\\ProLaboreCalculatorTest::test_calcular_distribuicao":0,"Tests\\Feature\\AuditTrailTest::test_orcamento_records_created_by":0.007,"Tests\\Feature\\AuditTrailTest::test_financeiro_records_updated_by":0.004,"Tests\\Feature\\AdminAccessTest::test_non_admin_cannot_access_configuracoes":0.088,"Tests\\Feature\\AdminAccessTest::test_admin_can_access_configuracoes":0.841,"Tests\\Feature\\PdfGenerationTest::test_orcamento_pdf_uses_service":0.044,"Tests\\Feature\\PdfGenerationTest::test_financeiro_pdf_uses_service":0.026,"Tests\\Feature\\PdfGenerationTest::test_financeiro_relatorio_mensal_uses_service":0.023,"Tests\\Unit\\Services\\EnderecoServiceTest::test_buscar_cep_com_sucesso":0.016,"Tests\\Unit\\Services\\EnderecoServiceTest::test_buscar_cep_invalido_retorna_null":0,"Tests\\Unit\\Services\\EnderecoServiceTest::test_buscar_cep_com_formato_invalido_retorna_null":0,"Tests\\Unit\\Services\\EstoqueServiceTest::test_adicionar_estoque_incrementa_quantidade":0.021,"Tests\\Unit\\Services\\EstoqueServiceTest::test_consumir_estoque_decrementa_quantidade":0.002,"Tests\\Unit\\Services\\EstoqueServiceTest::test_nao_consumir_estoque_se_insuficiente":0.002,"Tests\\Unit\\Services\\EquipamentoServiceTest::test_enviar_para_lista_desejos_cria_registro":0.01,"Tests\\Unit\\Services\\FinanceiroServiceTest::test_baixar_pagamento_atualiza_status":0.005,"Tests\\Unit\\Services\\FinanceiroServiceTest::test_estornar_pagamento_reverte_status":0.004,"Tests\\Browser\\FrontendVerificationTest::testAdminPanelRoutes":9.051,"Tests\\Browser\\FrontendVerificationTest::testResponsiveLayout":0.826}}
\ No newline at end of file
+{"version":"pest_3.8.5","defects":{"Tests\\Browser\\AgendaTest::test_create_agenda":1,"Tests\\Browser\\CadastroTest::test_create_cliente":8,"Tests\\Browser\\CadastroTest::test_edit_cliente":8,"Tests\\Browser\\CadastroTest::test_delete_cliente":8,"Tests\\Browser\\DataVerificationTest::test_data_population_and_browsing":8,"Tests\\Browser\\EstoqueTest::test_create_estoque_item":8,"Tests\\Browser\\EstoqueTest::test_edit_estoque_quantity":8,"Tests\\Browser\\FinanceiroTest::test_create_receita":8,"Tests\\Browser\\FinanceiroTest::test_financeiro_filters":8,"Tests\\Browser\\FrontendVerificationTest::testResponsiveLayout":7,"Tests\\Browser\\GarantiaTest::test_garantia_list_visibility":8,"Tests\\Browser\\OrcamentoTest::test_create_orcamento_flow":8,"Tests\\Browser\\OrcamentoTest::test_orcamento_actions":8,"Tests\\Browser\\OrdemServicoActionsTest::test_os_actions_visibility_and_execution":8,"Tests\\Browser\\OrdemServicoTest::test_os_lifecycle_flow":8,"Tests\\Feature\\FinanceiroFilamentAccessTest::financeiro_categoria_accessor_returns_relationship_object":1,"Tests\\Unit\\ProLaboreCalculatorTest::test_calcular_distribuicao":7},"times":{"Tests\\Browser\\AgendaTest::test_index_agenda":1.134,"Tests\\Browser\\AgendaTest::test_create_agenda":0.003,"Tests\\Browser\\CadastroTest::test_create_cliente":6.688,"Tests\\Browser\\CadastroTest::test_edit_cliente":5.601,"Tests\\Browser\\CadastroTest::test_delete_cliente":0.613,"Tests\\Browser\\ConfiguracaoTest::test_update_settings":1.908,"Tests\\Browser\\DataVerificationTest::test_data_population_and_browsing":11.831,"Tests\\Browser\\EstoqueTest::test_create_estoque_item":5.769,"Tests\\Browser\\EstoqueTest::test_edit_estoque_quantity":5.38,"Tests\\Browser\\ExampleTest::test_basic_example":0.591,"Tests\\Browser\\FinanceiroTest::test_create_receita":6.704,"Tests\\Browser\\FinanceiroTest::test_financeiro_filters":0.133,"Tests\\Browser\\FrontendVerificationTest::testAdminPanelRoutes":9.963,"Tests\\Browser\\FrontendVerificationTest::testResponsiveLayout":2.034,"Tests\\Browser\\GarantiaTest::test_garantia_list_visibility":5.993,"Tests\\Browser\\OrcamentoTest::test_create_orcamento_flow":0.301,"Tests\\Browser\\OrcamentoTest::test_orcamento_actions":0.95,"Tests\\Browser\\OrdemServicoActionsTest::test_os_actions_visibility_and_execution":11.265,"Tests\\Browser\\OrdemServicoTest::test_os_lifecycle_flow":0.406,"P\\Tests\\Feature\\Admin\\CadastroResourceTest::__pest_evaluable_redireciona_para_login_se_tentar_acessar_sem_autentica\u00e7\u00e3o":0.047,"P\\Tests\\Feature\\Admin\\CadastroResourceTest::__pest_evaluable_admin_consegue_acessar_a_listagem_de_cadastros":0.146,"P\\Tests\\Feature\\Admin\\CadastroResourceTest::__pest_evaluable_admin_consegue_ver_detalhes_de_um_cadastro_espec\u00edfico":0.113,"Tests\\Feature\\AdminAccessTest::test_non_admin_cannot_access_configuracoes":0.031,"Tests\\Feature\\AdminAccessTest::test_admin_can_access_configuracoes":0.338,"Tests\\Feature\\AuditTrailTest::test_orcamento_records_created_by":0.005,"Tests\\Feature\\AuditTrailTest::test_financeiro_records_updated_by":0.005,"Tests\\Feature\\CadastroFichaPdfTest::it_generates_ficha_cadastral_pdf_without_signature_fields":1.155,"Tests\\Feature\\CadastroFichaPdfTest::it_generates_pdf_template_without_signature_sections":0.026,"Tests\\Feature\\ExampleTest::test_the_application_returns_a_successful_response":0.019,"Tests\\Feature\\FinanceiroFilamentAccessTest::it_can_access_financeiro_index_without_categoria_conflict_error":0.137,"Tests\\Feature\\FinanceiroFilamentAccessTest::financeiro_categoria_accessor_returns_relationship_object":0.001,"Tests\\Feature\\FinanceiroRoutingTest::it_can_access_new_financeiro_routes_correctly":0.19,"Tests\\Feature\\FinanceiroRoutingTest::legacy_transacao_financeira_system_is_removed":0.001,"Tests\\Feature\\PdfGenerationTest::test_orcamento_pdf_uses_service":0.025,"Tests\\Feature\\PdfGenerationTest::test_financeiro_pdf_uses_service":0.023,"Tests\\Feature\\PdfGenerationTest::test_financeiro_relatorio_mensal_uses_service":0.022,"Tests\\Feature\\SmokeTest::test_application_is_up":0.043,"Tests\\Feature\\SmokeTest::test_can_create_cadastro_via_factory":0.002,"Tests\\Feature\\SmokeTest::test_can_create_cadastro_loja_via_factory":0.002,"Tests\\Feature\\SmokeTest::test_can_create_orcamento_linked_to_cadastro":0.004,"Tests\\Unit\\CadastroEnderecoTest::test_format_endereco_uses_endereco_completo":0.001,"Tests\\Unit\\CadastroEnderecoTest::test_format_endereco_composes_from_fields":0.001,"Tests\\Unit\\CadastroPolicyTest::test_admin_can_update_and_delete":0.003,"Tests\\Unit\\CadastroPolicyTest::test_non_admin_cannot_update_or_delete":0.003,"Tests\\Unit\\CadastroPolicyTest::test_authenticated_user_can_download":0.003,"Tests\\Unit\\EstoqueDeductionTest::test_stock_is_deducted_when_os_is_concluded":0.013,"Tests\\Unit\\ExampleTest::test_that_true_is_true":0,"Tests\\Unit\\ProLaboreCalculatorTest::test_calcular_lucro_liquido":0.007,"Tests\\Unit\\ProLaboreCalculatorTest::test_calcular_reserva":0.002,"Tests\\Unit\\ProLaboreCalculatorTest::test_calcular_distribuicao":0.002,"Tests\\Unit\\Services\\EnderecoServiceTest::test_buscar_cep_com_sucesso":0.007,"Tests\\Unit\\Services\\EnderecoServiceTest::test_buscar_cep_invalido_retorna_null":0,"Tests\\Unit\\Services\\EnderecoServiceTest::test_buscar_cep_com_formato_invalido_retorna_null":0,"Tests\\Unit\\Services\\EquipamentoServiceTest::test_enviar_para_lista_desejos_cria_registro":0.003,"Tests\\Unit\\Services\\EstoqueServiceTest::test_adicionar_estoque_incrementa_quantidade":0.002,"Tests\\Unit\\Services\\EstoqueServiceTest::test_consumir_estoque_decrementa_quantidade":0.002,"Tests\\Unit\\Services\\EstoqueServiceTest::test_nao_consumir_estoque_se_insuficiente":0.002,"Tests\\Unit\\Services\\FinanceiroServiceTest::test_baixar_pagamento_atualiza_status":0.004,"Tests\\Unit\\Services\\FinanceiroServiceTest::test_estornar_pagamento_reverte_status":0.004,"P\\Tests\\Feature\\Admin\\CadastroResourceTest::__pest_evaluable_admin_consegue_ver_bot\u00f5es_de_a\u00e7\u00f5es_na_listagem":0.086}}
\ No newline at end of file
diff --git a/app/Filament/Pages/Configuracoes.php b/app/Filament/Pages/Configuracoes.php
index 6f7c75b..db4e368 100644
--- a/app/Filament/Pages/Configuracoes.php
+++ b/app/Filament/Pages/Configuracoes.php
@@ -51,7 +51,7 @@ class Configuracoes extends Page implements HasForms
         $settings = Setting::all()->pluck('value', 'key')->toArray();
 
         // chaves que s√£o Arrays/Repeaters e precisam ser decodificadas do JSON
-        $jsonFields = ['financeiro_pix_keys', 'financeiro_taxas_cartao', 'financeiro_parcelamento', 'system_service_types', 'admin_emails', 'pdf_layout', 'backup_tables'];
+        $jsonFields = ['financeiro_pix_keys', 'financeiro_taxas_cartao', 'financeiro_parcelamento', 'system_service_types', 'admin_emails', 'pdf_layout', 'backup_tables', 'socios_config'];
         foreach ($jsonFields as $key) {
             if (isset($settings[$key]) && is_string($settings[$key])) {
                 $decoded = json_decode($settings[$key], true);
@@ -151,6 +151,25 @@ class Configuracoes extends Page implements HasForms
                                             ->default(20)
                                             ->suffix('%')
                                             ->helperText('Quanto do lucro l√≠quido fica na empresa antes da distribui√ß√£o'),
+
+                                        Repeater::make('socios_config')
+                                            ->label('Configura√ß√£o de S√≥cios')
+                                            ->schema([
+                                                Select::make('user_id')
+                                                    ->label('Usu√°rio (S√≥cio)')
+                                                    ->options(\App\Models\User::all()->pluck('name', 'id'))
+                                                    ->required()
+                                                    ->searchable(),
+                                                TextInput::make('percentual')
+                                                    ->label('Participa√ß√£o (%)')
+                                                    ->numeric()
+                                                    ->suffix('%')
+                                                    ->required()
+                                                    ->maxValue(100),
+                                            ])
+                                            ->columns(2)
+                                            ->defaultItems(1)
+                                            ->addActionLabel('Adicionar S√≥cio'),
                                     ])->columns(2),
                             ]),
 
@@ -282,7 +301,7 @@ class Configuracoes extends Page implements HasForms
                                             ->deletable(false)
                                             ->reorderable(true)
                                             ->collapsible()
-                                            ->itemLabel(fn (array $state): ?string => $state['label'] ?? null),
+                                            ->itemLabel(fn(array $state): ?string => $state['label'] ?? null),
                                     ]),
 
                                 Section::make('Gerenciamento de Itens/Produtos')
@@ -292,19 +311,19 @@ class Configuracoes extends Page implements HasForms
                                         \Filament\Forms\Components\Placeholder::make('link_tabela_precos')
                                             ->label('')
                                             ->content(new \Illuminate\Support\HtmlString(
-                                                '<div class="p-4 bg-blue-50 border border-blue-200 rounded-lg">'.
-                                                '<div class="flex items-center space-x-3">'.
-                                                '<svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">'.
-                                                '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012-2m-6 9l2 2 4-4"></path>'.
-                                                '</svg>'.
-                                                '<div>'.
-                                                '<h3 class="font-semibold text-blue-900">Tabela de Pre√ßos Unificada</h3>'.
-                                                '<p class="text-sm text-blue-700">Gerencie todos os itens, pre√ßos e categorias em um local √∫nico.</p>'.
-                                                '<a href="/admin/configuracoes/tabela-precos" class="inline-flex items-center mt-2 text-sm font-medium text-blue-600 hover:text-blue-800">'.
-                                                'Acessar Tabela de Pre√ßos ‚Üí'.
-                                                '</a>'.
-                                                '</div>'.
-                                                '</div>'.
+                                                '<div class="p-4 bg-blue-50 border border-blue-200 rounded-lg">' .
+                                                '<div class="flex items-center space-x-3">' .
+                                                '<svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">' .
+                                                '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012-2m-6 9l2 2 4-4"></path>' .
+                                                '</svg>' .
+                                                '<div>' .
+                                                '<h3 class="font-semibold text-blue-900">Tabela de Pre√ßos Unificada</h3>' .
+                                                '<p class="text-sm text-blue-700">Gerencie todos os itens, pre√ßos e categorias em um local √∫nico.</p>' .
+                                                '<a href="/admin/configuracoes/tabela-precos" class="inline-flex items-center mt-2 text-sm font-medium text-blue-600 hover:text-blue-800">' .
+                                                'Acessar Tabela de Pre√ßos ‚Üí' .
+                                                '</a>' .
+                                                '</div>' .
+                                                '</div>' .
                                                 '</div>'
                                             )),
                                     ]),
@@ -532,13 +551,13 @@ class Configuracoes extends Page implements HasForms
                                                     ])
                                                     ->required()
                                                     ->reactive()
-                                                    ->afterStateUpdated(fn (callable $set) => $set('validada', false)),
+                                                    ->afterStateUpdated(fn(callable $set) => $set('validada', false)),
 
                                                 TextInput::make('chave')
                                                     ->label('Chave PIX')
                                                     ->required()
                                                     ->reactive()
-                                                    ->afterStateUpdated(fn (callable $set) => $set('validada', false))
+                                                    ->afterStateUpdated(fn(callable $set) => $set('validada', false))
                                                     ->rules(function (callable $get) {
                                                         $tipo = $get('tipo');
 
@@ -567,8 +586,8 @@ class Configuracoes extends Page implements HasForms
                                                 TextInput::make('codigo_pais')
                                                     ->label('C√≥digo do Pa√≠s')
                                                     ->default('55')
-                                                    ->visible(fn (callable $get) => $get('tipo') === 'telefone')
-                                                    ->required(fn (callable $get) => $get('tipo') === 'telefone')
+                                                    ->visible(fn(callable $get) => $get('tipo') === 'telefone')
+                                                    ->required(fn(callable $get) => $get('tipo') === 'telefone')
                                                     ->numeric()
                                                     ->helperText('Ex: 55 para Brasil'),
 
@@ -578,12 +597,12 @@ class Configuracoes extends Page implements HasForms
                                                     ->helperText('Indica se a chave passou pela valida√ß√£o autom√°tica'),
                                             ])->columns(2)
                                             ->itemLabel(
-                                                fn (array $state): ?string => ($state['tipo'] ?? 'Novo').': '.($state['chave'] ?? 'N√£o definido')
+                                                fn(array $state): ?string => ($state['tipo'] ?? 'Novo') . ': ' . ($state['chave'] ?? 'N√£o definido')
                                             )
                                             ->afterStateUpdated(function (callable $get, callable $set, $state) {
                                                 if (is_array($state)) {
                                                     foreach ($state as $index => $chaveData) {
-                                                        if (isset($chaveData['chave']) && isset($chaveData['tipo']) && ! empty($chaveData['chave'])) {
+                                                        if (isset($chaveData['chave']) && isset($chaveData['tipo']) && !empty($chaveData['chave'])) {
                                                             $validacao = \App\Services\Pix\PixKeyValidatorService::validate(
                                                                 $chaveData['chave'],
                                                                 $chaveData['tipo'],
@@ -667,19 +686,19 @@ class Configuracoes extends Page implements HasForms
         // Ensure settings are saved first?
         // Optional: $this->save();
 
-        $zipFileName = 'backup-'.now()->format('Y-m-d-His').'.zip';
+        $zipFileName = 'backup-' . now()->format('Y-m-d-His') . '.zip';
         // Ensure directory exists
-        if (! is_dir(storage_path('app/public/backups'))) {
+        if (!is_dir(storage_path('app/public/backups'))) {
             mkdir(storage_path('app/public/backups'), 0755, true);
         }
-        $zipPath = storage_path('app/public/backups/'.$zipFileName);
+        $zipPath = storage_path('app/public/backups/' . $zipFileName);
 
         $zip = new \ZipArchive;
         if ($zip->open($zipPath, \ZipArchive::CREATE) === true) {
 
             // Export Tables to JSON
             foreach ($tables as $table) {
-                $modelClass = 'App\\Models\\'.\Illuminate\Support\Str::studly(\Illuminate\Support\Str::singular($table));
+                $modelClass = 'App\\Models\\' . \Illuminate\Support\Str::studly(\Illuminate\Support\Str::singular($table));
 
                 // Handle specific table mappings correctly
                 if ($table === 'ordem_servicos') {
@@ -729,7 +748,7 @@ class Configuracoes extends Page implements HasForms
                     if (strpos($relativePath, 'backups/') === 0 || $relativePath === $zipFileName) {
                         continue;
                     }
-                    $zip->addFile($file->getRealPath(), 'storage/'.$relativePath);
+                    $zip->addFile($file->getRealPath(), 'storage/' . $relativePath);
                 }
             }
 
@@ -746,7 +765,7 @@ class Configuracoes extends Page implements HasForms
                 ->label('Baixar Backup')
                 ->icon('heroicon-o-arrow-down-tray')
                 ->color('success')
-                ->action(fn () => $this->exportData()),
+                ->action(fn() => $this->exportData()),
 
             Action::make('limpar_cache')
                 ->label('Resetar Cache')
diff --git a/app/Filament/Resources/AgendaResource.php b/app/Filament/Resources/AgendaResource.php
index d4f3c79..19f0d9f 100644
--- a/app/Filament/Resources/AgendaResource.php
+++ b/app/Filament/Resources/AgendaResource.php
@@ -190,7 +190,7 @@ class AgendaResource extends Resource
                             ->addActionLabel('‚ûï Adicionar Nova Tarefa')
                             ->reorderable()
                             ->collapsible()
-                            ->itemLabel(fn (array $state): ?string => $state['descricao'] ?? null)
+                            ->itemLabel(fn(array $state): ?string => $state['descricao'] ?? null)
                             ->columnSpanFull(),
                     ]),
 
@@ -219,7 +219,7 @@ class AgendaResource extends Resource
                                 ->label('‚úÖ Status do Lembrete')
                                 ->disabled()
                                 ->helperText('Marcado automaticamente pelo sistema ap√≥s envio')
-                                ->visible(fn ($record) => $record?->lembrete_enviado ?? false),
+                                ->visible(fn($record) => $record?->lembrete_enviado ?? false),
                         ]),
                     ]),
 
@@ -245,7 +245,7 @@ class AgendaResource extends Resource
                     ]),
 
                 Forms\Components\Hidden::make('criado_por')
-                    ->default(fn () => Auth::id() ?? 1),
+                    ->default(fn() => Auth::id() ?? 1),
             ]);
     }
 
@@ -260,7 +260,7 @@ class AgendaResource extends Resource
                     ->sortable()
                     ->searchable()
                     ->weight('bold')
-                    ->description(fn ($record) => $record->titulo ? mb_substr($record->titulo, 0, 25).(mb_strlen($record->titulo) > 25 ? '...' : '') : '-')
+                    ->description(fn($record) => $record->titulo ? mb_substr($record->titulo, 0, 25) . (mb_strlen($record->titulo) > 25 ? '...' : '') : '-')
                     ->icon('heroicon-o-calendar-days'),
 
                 // DESKTOP ONLY: T√≠tulo separado
@@ -281,19 +281,19 @@ class AgendaResource extends Resource
                 // SEMPRE VIS√çVEL: Tipo com √≠cone
                 Tables\Columns\TextColumn::make('tipo')
                     ->badge()
-                    ->formatStateUsing(fn (string $state): string => match ($state) {
+                    ->formatStateUsing(fn(string $state): string => match ($state) {
                         'servico' => 'üßº',
                         'visita' => 'üëÅÔ∏è',
                         'reuniao' => 'ü§ù',
                         default => 'üìå',
                     })
-                    ->tooltip(fn (string $state): string => match ($state) {
+                    ->tooltip(fn(string $state): string => match ($state) {
                         'servico' => 'Servi√ßo',
                         'visita' => 'Visita',
                         'reuniao' => 'Reuni√£o',
                         default => 'Outro',
                     })
-                    ->color(fn (string $state): string => match ($state) {
+                    ->color(fn(string $state): string => match ($state) {
                         'servico' => 'info',
                         'visita' => 'warning',
                         'reuniao' => 'success',
@@ -303,20 +303,20 @@ class AgendaResource extends Resource
                 // SEMPRE VIS√çVEL: Status com √≠cone
                 Tables\Columns\TextColumn::make('status')
                     ->badge()
-                    ->formatStateUsing(fn (string $state): string => match ($state) {
+                    ->formatStateUsing(fn(string $state): string => match ($state) {
                         'concluido' => '‚úì',
                         'em_andamento' => '‚è≥',
                         'cancelado' => '‚úó',
                         default => 'üìÖ',
                     })
-                    ->tooltip(fn (string $state): string => match ($state) {
+                    ->tooltip(fn(string $state): string => match ($state) {
                         'agendado' => 'Agendado',
                         'em_andamento' => 'Em Andamento',
                         'concluido' => 'Conclu√≠do',
                         'cancelado' => 'Cancelado',
                         default => $state,
                     })
-                    ->color(fn (string $state): string => match ($state) {
+                    ->color(fn(string $state): string => match ($state) {
                         'concluido' => 'success',
                         'em_andamento' => 'warning',
                         'cancelado' => 'danger',
@@ -365,67 +365,57 @@ class AgendaResource extends Resource
                         return $query
                             ->when(
                                 $data['data_de'],
-                                fn (Builder $query, $date): Builder => $query->whereDate('data_hora_inicio', '>=', $date),
+                                fn(Builder $query, $date): Builder => $query->whereDate('data_hora_inicio', '>=', $date),
                             )
                             ->when(
                                 $data['data_ate'],
-                                fn (Builder $query, $date): Builder => $query->whereDate('data_hora_inicio', '<=', $date),
+                                fn(Builder $query, $date): Builder => $query->whereDate('data_hora_inicio', '<=', $date),
                             );
                     }),
             ])
-            ->actions([
-                // View
-                Tables\Actions\ViewAction::make()
-                    ->label('')
-                    ->tooltip('Ver Detalhes')
-                    ->iconButton(),
-
-                // Edit
-                Tables\Actions\EditAction::make()
-                    ->label('')
-                    ->tooltip('Editar')
-                    ->iconButton(),
-
-                // Concluir
-                Tables\Actions\Action::make('concluir')
-                    ->label('')
-                    ->tooltip('Marcar Conclu√≠do')
-                    ->icon('heroicon-o-check-circle')
-                    ->color('success')
-                    ->iconButton()
-                    ->visible(fn (Agenda $record) => ! in_array($record->status, ['concluido', 'cancelado']))
-                    ->requiresConfirmation()
-                    ->action(function (Agenda $record) {
-                        $record->update(['status' => 'concluido']);
-                        \Filament\Notifications\Notification::make()
-                            ->success()
-                            ->title('Conclu√≠do!')
-                            ->send();
-                    }),
-
-                // Cancelar
-                Tables\Actions\Action::make('cancelar')
-                    ->label('')
-                    ->tooltip('Cancelar')
-                    ->icon('heroicon-o-x-circle')
-                    ->color('danger')
-                    ->iconButton()
-                    ->visible(fn (Agenda $record) => $record->status === 'agendado')
-                    ->requiresConfirmation()
-                    ->action(function (Agenda $record) {
-                        $record->update(['status' => 'cancelado']);
-                        \Filament\Notifications\Notification::make()
-                            ->warning()
-                            ->title('Cancelado')
-                            ->send();
-                    }),
-
-                // Excluir
-                Tables\Actions\DeleteAction::make()
-                    ->label('')
-                    ->tooltip('Excluir')
-                    ->iconButton(),
-            ])
+            ->actions(
+                \App\Support\Filament\StofgardTable::defaultActions(
+                    view: true,
+                    edit: true,
+                    delete: true,
+                    extraActions: [
+                        // Concluir
+                        Tables\Actions\Action::make('concluir')
+                            ->label('Concluir')
+                            ->tooltip('Marcar Conclu√≠do')
+                            ->icon('heroicon-o-check-circle')
+                            ->color('success')
+                            // ->iconButton() // Removed iconButton to fit better in dropdown or keep if preferred, but StofgardTable handles basic ones. Custom ones can stay as is.
+                            // Actually, StofgardTable merges extraActions. If we want them in the dropdown, we just pass them.
+                            ->visible(fn(Agenda $record) => !in_array($record->status, ['concluido', 'cancelado']))
+                            ->requiresConfirmation()
+                            ->action(function (Agenda $record) {
+                                $record->update(['status' => 'concluido']);
+                                \Filament\Notifications\Notification::make()
+                                    ->success()
+                                    ->title('Conclu√≠do!')
+                                    ->send();
+                            }),
+
+                        // Cancelar
+                        Tables\Actions\Action::make('cancelar')
+                            ->label('Cancelar')
+                            ->tooltip('Cancelar')
+                            ->icon('heroicon-o-x-circle')
+                            ->color('danger')
+                            // ->iconButton()
+                            ->visible(fn(Agenda $record) => $record->status === 'agendado')
+                            ->requiresConfirmation()
+                            ->action(function (Agenda $record) {
+                                $record->update(['status' => 'cancelado']);
+                                \Filament\Notifications\Notification::make()
+                                    ->warning()
+                                    ->title('Cancelado')
+                                    ->send();
+                            }),
+                    ]
+                )
+            )
             ->bulkActions([
                 Tables\Actions\BulkActionGroup::make([
                     Tables\Actions\BulkAction::make('marcar_concluido')
@@ -433,14 +423,14 @@ class AgendaResource extends Resource
                         ->icon('heroicon-o-check-circle')
                         ->color('success')
                         ->requiresConfirmation()
-                        ->action(fn ($records) => $records->each->update(['status' => 'concluido'])),
+                        ->action(fn($records) => $records->each->update(['status' => 'concluido'])),
 
                     Tables\Actions\BulkAction::make('marcar_cancelado')
                         ->label('Marcar como Cancelado')
                         ->icon('heroicon-o-x-circle')
                         ->color('danger')
                         ->requiresConfirmation()
-                        ->action(fn ($records) => $records->each->update(['status' => 'cancelado'])),
+                        ->action(fn($records) => $records->each->update(['status' => 'cancelado'])),
 
                     Tables\Actions\DeleteBulkAction::make(),
                 ]),
@@ -472,13 +462,13 @@ class AgendaResource extends Resource
                                 ->size(TextEntry\TextEntrySize::Large),
                             TextEntry::make('status')
                                 ->badge()
-                                ->color(fn (string $state): string => match ($state) {
+                                ->color(fn(string $state): string => match ($state) {
                                     'concluido' => 'success',
                                     'cancelado' => 'danger',
                                     'em_andamento' => 'warning',
                                     default => 'info',
                                 })
-                                ->formatStateUsing(fn ($state) => match ($state) {
+                                ->formatStateUsing(fn($state) => match ($state) {
                                     'agendado' => 'üìÖ Agendado',
                                     'em_andamento' => 'üîÑ Em Andamento',
                                     'concluido' => '‚úÖ Conclu√≠do',
@@ -490,13 +480,13 @@ class AgendaResource extends Resource
                             TextEntry::make('tipo')
                                 ->label('Tipo')
                                 ->badge()
-                                ->color(fn ($state) => match ($state) {
+                                ->color(fn($state) => match ($state) {
                                     'servico' => 'info',
                                     'visita' => 'warning',
                                     'reuniao' => 'success',
                                     default => 'gray',
                                 })
-                                ->formatStateUsing(fn ($state) => match ($state) {
+                                ->formatStateUsing(fn($state) => match ($state) {
                                     'servico' => 'üßº Servi√ßo',
                                     'visita' => 'üëÅÔ∏è Visita T√©cnica',
                                     'reuniao' => 'ü§ù Reuni√£o',
@@ -514,8 +504,8 @@ class AgendaResource extends Resource
                             TextEntry::make('dia_inteiro')
                                 ->label('Dia Inteiro')
                                 ->badge()
-                                ->color(fn ($state) => $state ? 'success' : 'gray')
-                                ->formatStateUsing(fn ($state) => $state ? 'Sim' : 'N√£o'),
+                                ->color(fn($state) => $state ? 'success' : 'gray')
+                                ->formatStateUsing(fn($state) => $state ? 'Sim' : 'N√£o'),
                         ]),
                     ]),
 
@@ -526,7 +516,7 @@ class AgendaResource extends Resource
                             TextEntry::make('cadastro.nome')
                                 ->label('Cliente')
                                 ->icon('heroicon-m-user')
-                                ->url(fn ($record) => $record->cadastro_url)
+                                ->url(fn($record) => $record->cadastro_url)
                                 ->color('primary')
                                 ->placeholder('N√£o vinculado'),
                             TextEntry::make('tipo_servico_exibicao')
@@ -549,7 +539,7 @@ class AgendaResource extends Resource
                             TextEntry::make('orcamento.numero')
                                 ->label('Or√ßamento')
                                 ->icon('heroicon-m-document-text')
-                                ->url(fn ($record) => $record->orcamento_id
+                                ->url(fn($record) => $record->orcamento_id
                                     ? \App\Filament\Resources\OrcamentoResource::getUrl('view', ['record' => $record->orcamento_id])
                                     : null)
                                 ->color('primary')
@@ -559,7 +549,7 @@ class AgendaResource extends Resource
                             TextEntry::make('ordemServico.numero_os')
                                 ->label('Ordem de Servi√ßo')
                                 ->icon('heroicon-m-clipboard-document-check')
-                                ->url(fn ($record) => $record->ordem_servico_id
+                                ->url(fn($record) => $record->ordem_servico_id
                                     ? \App\Filament\Resources\OrdemServicoResource::getUrl('view', ['record' => $record->ordem_servico_id])
                                     : null)
                                 ->color('primary')
@@ -575,12 +565,12 @@ class AgendaResource extends Resource
                             TextEntry::make('local')
                                 ->label('')
                                 ->icon('heroicon-m-map-pin')
-                                ->url(fn ($record) => $record->endereco_maps, true)
+                                ->url(fn($record) => $record->endereco_maps, true)
                                 ->placeholder('Local n√£o informado'),
                             TextEntry::make('endereco_completo')
                                 ->label('Endere√ßo Completo')
                                 ->placeholder('Endere√ßo n√£o informado')
-                                ->visible(fn ($record) => $record->endereco_completo && $record->endereco_completo !== $record->local),
+                                ->visible(fn($record) => $record->endereco_completo && $record->endereco_completo !== $record->local),
                         ]),
                     ])
                     ->collapsible(),
@@ -617,19 +607,19 @@ class AgendaResource extends Resource
                                     ->falseColor('gray'),
                                 TextEntry::make('descricao')
                                     ->label('Tarefa')
-                                    ->weight(fn ($record) => $record['concluida'] ?? false ? 'normal' : 'bold')
-                                    ->color(fn ($record) => $record['concluida'] ?? false ? 'gray' : 'primary'),
+                                    ->weight(fn($record) => $record['concluida'] ?? false ? 'normal' : 'bold')
+                                    ->color(fn($record) => $record['concluida'] ?? false ? 'gray' : 'primary'),
                             ])
                             ->columns(2)
                             ->columnSpanFull(),
                         TextEntry::make('tarefas_vazio')
                             ->label('')
                             ->default('Nenhuma tarefa cadastrada')
-                            ->visible(fn ($record) => empty($record->extra_attributes['tarefas'] ?? [])),
+                            ->visible(fn($record) => empty($record->extra_attributes['tarefas'] ?? [])),
                     ])
                     ->collapsible()
                     ->collapsed()
-                    ->visible(fn ($record) => ! empty($record->extra_attributes['tarefas'] ?? []) || true),
+                    ->visible(fn($record) => !empty($record->extra_attributes['tarefas'] ?? []) || true),
 
                 // ===== LEMBRETES E NOTIFICA√á√ïES =====
                 InfolistSection::make('üîî Lembretes')
@@ -638,20 +628,20 @@ class AgendaResource extends Resource
                             TextEntry::make('minutos_antes_lembrete')
                                 ->label('Lembrete Configurado')
                                 ->badge()
-                                ->formatStateUsing(fn ($state) => match ((int) $state) {
+                                ->formatStateUsing(fn($state) => match ((int) $state) {
                                     15 => '15 min antes',
                                     30 => '30 min antes',
                                     60 => '1h antes',
                                     120 => '2h antes',
                                     1440 => '1 dia antes',
                                     2880 => '2 dias antes',
-                                    default => $state.' min antes',
+                                    default => $state . ' min antes',
                                 }),
                             TextEntry::make('lembrete_enviado')
                                 ->label('Status do Lembrete')
                                 ->badge()
-                                ->color(fn ($state) => $state ? 'success' : 'warning')
-                                ->formatStateUsing(fn ($state) => $state ? '‚úÖ Enviado' : '‚è≥ Pendente'),
+                                ->color(fn($state) => $state ? 'success' : 'warning')
+                                ->formatStateUsing(fn($state) => $state ? '‚úÖ Enviado' : '‚è≥ Pendente'),
                         ]),
                     ])
                     ->collapsible()
@@ -670,7 +660,7 @@ class AgendaResource extends Resource
                             TextEntry::make('cor')
                                 ->label('Cor no Calend√°rio')
                                 ->badge()
-                                ->color(fn ($state) => $state ?? 'gray'),
+                                ->color(fn($state) => $state ?? 'gray'),
                         ]),
                     ])
                     ->collapsible()
diff --git a/app/Filament/Resources/CadastroResource.php b/app/Filament/Resources/CadastroResource.php
index f61765e..b942e20 100644
--- a/app/Filament/Resources/CadastroResource.php
+++ b/app/Filament/Resources/CadastroResource.php
@@ -51,16 +51,14 @@ class CadastroResource extends Resource
                             TextEntry::make('telefone')
                                 ->label('WhatsApp')
                                 ->icon('heroicon-m-chat-bubble-left-right')
-                                ->url(fn($state) => 'https://wa.me/55' . preg_replace('/\D/', '', $state), true)
-                                ->visibleFrom('md'),
+                                ->url(fn($state) => 'https://wa.me/55' . preg_replace('/\D/', '', $state), true),
                             TextEntry::make('email')
                                 ->label('E-mail')
                                 ->icon('heroicon-m-envelope')
                                 ->copyable(),
                             TextEntry::make('cidade')
                                 ->label('Localiza√ß√£o')
-                                ->formatStateUsing(fn($record) => "{$record->cidade}/{$record->estado}")
-                                ->visibleFrom('lg'),
+                                ->formatStateUsing(fn($record) => "{$record->cidade}/{$record->estado}"),
                             TextEntry::make('created_at')
                                 ->label('Cliente desde')
                                 ->date('d/m/Y'),
@@ -273,6 +271,63 @@ class CadastroResource extends Resource
                                     ->extraImgAttributes(['class' => 'rounded-lg shadow-md'])
                                     ->columnSpanFull(),
                             ]),
+
+                        // ABA 7: HIST√ìRICO DE ALTERA√á√ïES
+                        Infolists\Components\Tabs\Tab::make('üìú Hist√≥rico')
+                            ->icon('heroicon-m-clock')
+                            ->badge(fn($record) => $record->audits()->count())
+                            ->schema([
+                                Infolists\Components\RepeatableEntry::make('audits')
+                                    ->label('')
+                                    ->schema([
+                                        Grid::make(4)->schema([
+                                            TextEntry::make('user.name')
+                                                ->label('Usu√°rio')
+                                                ->icon('heroicon-m-user')
+                                                ->placeholder('Sistema/Autom√°tico'),
+                                            TextEntry::make('event')
+                                                ->label('A√ß√£o')
+                                                ->badge()
+                                                ->formatStateUsing(fn(string $state): string => match ($state) {
+                                                    'created' => 'Cria√ß√£o',
+                                                    'updated' => 'Edi√ß√£o',
+                                                    'deleted' => 'Exclus√£o',
+                                                    'restored' => 'Restaura√ß√£o',
+                                                    default => ucfirst($state),
+                                                })
+                                                ->color(fn(string $state): string => match ($state) {
+                                                    'created' => 'success',
+                                                    'updated' => 'warning',
+                                                    'deleted' => 'danger',
+                                                    default => 'gray',
+                                                }),
+                                            TextEntry::make('created_at')
+                                                ->label('Data/Hora')
+                                                ->dateTime('d/m/Y H:i:s'),
+                                            TextEntry::make('ip_address')
+                                                ->label('IP')
+                                                ->icon('heroicon-m-globe-alt')
+                                                ->copyable(),
+                                        ]),
+                                        Section::make('Detalhes da Altera√ß√£o')
+                                            ->schema([
+                                                Infolists\Components\KeyValueEntry::make('old_values')
+                                                    ->label('Antes')
+                                                    ->keyLabel('Campo')
+                                                    ->valueLabel('Valor')
+                                                    ->visible(fn($record) => !empty($record->old_values)),
+                                                Infolists\Components\KeyValueEntry::make('new_values')
+                                                    ->label('Depois')
+                                                    ->keyLabel('Campo')
+                                                    ->valueLabel('Valor')
+                                                    ->visible(fn($record) => !empty($record->new_values)),
+                                            ])
+                                            ->columns(2)
+                                            ->visible(fn($record) => $record->event === 'updated'),
+                                    ])
+                                    ->grid(1)
+                                    ->contained(false),
+                            ]),
                     ])->columnSpanFull(),
             ]);
     }
@@ -385,7 +440,27 @@ class CadastroResource extends Resource
                     ->weight('bold'),
                 Tables\Columns\TextColumn::make('tipo')
                     ->badge()
-                    ->color(fn(string $state): string => \App\Models\Categoria::where('slug', $state)->where('tipo', 'cadastro_tipo')->value('cor') ?? 'gray'),
+                    // Fallback de cores se o seed n√£o rodou ou categoria n√£o existe
+                    ->color(
+                        fn(string $state): string =>
+                        \App\Models\Categoria::where('slug', $state)->where('tipo', 'cadastro_tipo')->value('cor')
+                        ?? match ($state) {
+                            'cliente', 'concluida', 'finalizada', 'pago', 'receita' => 'success',
+                            'lead', 'em_andamento', 'pendente' => 'warning',
+                            'fornecedor', 'cancelado', 'rejeitado', 'despesa' => 'danger',
+                            'parceiro', 'arquiteto' => 'primary',
+                            'loja', 'orcamento' => 'info',
+                            default => 'gray',
+                        }
+                    ),
+                Tables\Columns\TextColumn::make('documento')
+                    ->label('CPF/CNPJ')
+                    ->searchable()
+                    ->toggleable(isToggledHiddenByDefault: true),
+                Tables\Columns\TextColumn::make('email')
+                    ->searchable()
+                    ->icon('heroicon-m-envelope')
+                    ->toggleable(isToggledHiddenByDefault: true),
                 Tables\Columns\TextColumn::make('telefone')
                     ->label('WhatsApp')
                     ->icon('heroicon-m-phone')
@@ -394,29 +469,26 @@ class CadastroResource extends Resource
                     ->label('Cidade')
                     ->visibleFrom('lg'),
             ])
-            ->actions([
-                // 1. PDF (Verde Destaque) - Mobile: s√≥ √≠cone
-                Tables\Actions\Action::make('pdf')
-                    ->label('Ficha')
-                    ->icon('heroicon-o-document-text')
-                    ->color('success')
-                    ->iconButton() // Mobile-friendly
-                    ->url(fn(Cadastro $record) => route('cadastro.pdf', $record))
-                    ->openUrlInNewTab(),
-                // 2. VISUALIZAR
-                Tables\Actions\ViewAction::make()
-                    ->iconButton()
-                    ->tooltip('Ver Detalhes'),
-                // 3. EDITAR
-                Tables\Actions\EditAction::make()
-                    ->iconButton()
-                    ->tooltip('Editar'),
-                // 4. EXCLUIR
-                Tables\Actions\DeleteAction::make()
-                    ->iconButton()
-                    ->tooltip('Excluir'),
-            ])
-            ->bulkActions([Tables\Actions\BulkActionGroup::make([Tables\Actions\DeleteBulkAction::make()])]);
+            ->actions(
+                \App\Support\Filament\StofgardTable::defaultActions(
+                    view: true,
+                    edit: true,
+                    delete: true,
+                    extraActions: [
+                        Tables\Actions\Action::make('pdf')
+                            ->label('Ficha')
+                            ->icon('heroicon-o-document-text')
+                            ->color('success')
+                            ->url(fn(Cadastro $record) => route('cadastro.pdf', $record))
+                            ->openUrlInNewTab(),
+                    ]
+                )
+            )
+            ->bulkActions([
+                Tables\Actions\BulkActionGroup::make([
+                    Tables\Actions\DeleteBulkAction::make(),
+                ]),
+            ]);
     }
 
     public static function getRelations(): array
diff --git a/app/Filament/Resources/CategoriaResource.php b/app/Filament/Resources/CategoriaResource.php
index d65d2d1..2b623c9 100644
--- a/app/Filament/Resources/CategoriaResource.php
+++ b/app/Filament/Resources/CategoriaResource.php
@@ -182,38 +182,28 @@ class CategoriaResource extends Resource
                     ->trueLabel('Apenas ativos')
                     ->falseLabel('Apenas inativos'),
             ])
-            ->actions([
-                Tables\Actions\Action::make('pdf')
-                    ->label('')
-                    ->tooltip('Abrir PDF')
-                    ->icon('heroicon-o-document-text')
-                    ->color('info')
-                    ->url(fn(Categoria $record) => route('categoria.pdf', $record))
-                    ->openUrlInNewTab(),
-
-                Tables\Actions\ViewAction::make()
-                    ->label('')
-                    ->tooltip('Visualizar')
-                    ->iconButton(),
-
-                Tables\Actions\EditAction::make()
-                    ->label('')
-                    ->tooltip('Editar')
-                    ->iconButton(),
-
-                Tables\Actions\Action::make('download')
-                    ->label('')
-                    ->tooltip('Baixar PDF')
-                    ->icon('heroicon-o-arrow-down-tray')
-                    ->color('success')
-                    ->url(fn(Categoria $record) => route('categoria.pdf', $record))
-                    ->openUrlInNewTab(),
-
-                Tables\Actions\DeleteAction::make()
-                    ->label('')
-                    ->tooltip('Excluir')
-                    ->iconButton(),
-            ])
+            ->actions(
+                \App\Support\Filament\StofgardTable::defaultActions(
+                    view: true,
+                    edit: true,
+                    delete: true,
+                    extraActions: [
+                        Tables\Actions\Action::make('pdf')
+                            ->label('Abrir PDF')
+                            ->icon('heroicon-o-document-text')
+                            ->color('info')
+                            ->url(fn(Categoria $record) => route('categoria.pdf', $record))
+                            ->openUrlInNewTab(),
+
+                        Tables\Actions\Action::make('download')
+                            ->label('Baixar PDF')
+                            ->icon('heroicon-o-arrow-down-tray')
+                            ->color('success')
+                            ->url(fn(Categoria $record) => route('categoria.pdf', $record))
+                            ->openUrlInNewTab(),
+                    ]
+                )
+            )
             ->bulkActions([
                 Tables\Actions\BulkActionGroup::make([
                     Tables\Actions\DeleteBulkAction::make(),
diff --git a/app/Filament/Resources/ConfiguracaoResource.php b/app/Filament/Resources/ConfiguracaoResource.php
index c22d3c2..344cca1 100644
--- a/app/Filament/Resources/ConfiguracaoResource.php
+++ b/app/Filament/Resources/ConfiguracaoResource.php
@@ -73,6 +73,40 @@ class ConfiguracaoResource extends Resource
                                     ->valueLabel('Nome (ex: Aguardando Pe√ßa)'),
                             ]),
 
+                        Forms\Components\Tabs\Tab::make('üõ°Ô∏è Garantias')
+                            ->schema([
+                                Forms\Components\Repeater::make('config_prazo_garantia')
+                                    ->label('Prazos de Garantia por Tipo de Servi√ßo')
+                                    ->schema([
+                                        Forms\Components\Select::make('tipo_servico')
+                                            ->label('Tipo de Servi√ßo')
+                                            ->options(\App\Services\ServiceTypeManager::getOptions())
+                                            ->required()
+                                            ->columnSpan(1),
+
+                                        Forms\Components\TextInput::make('dias')
+                                            ->label('Prazo')
+                                            ->numeric()
+                                            ->suffix('dias')
+                                            ->required()
+                                            ->default(90)
+                                            ->minValue(1)
+                                            ->maxValue(3650)
+                                            ->columnSpan(1),
+
+                                        Forms\Components\Textarea::make('descricao')
+                                            ->label('Descri√ß√£o da Garantia')
+                                            ->rows(2)
+                                            ->placeholder('Ex: Garantia contra manchas e odores')
+                                            ->columnSpanFull(),
+                                    ])
+                                    ->columns(2)
+                                    ->defaultItems(0)
+                                    ->addActionLabel('Adicionar Tipo de Servi√ßo')
+                                    ->collapsible()
+                                    ->helperText('Configure o prazo de garantia para cada tipo de servi√ßo. Garantias s√£o geradas automaticamente ao concluir uma OS.'),
+                            ]),
+
                         Forms\Components\Tabs\Tab::make('üìÑ Textos Legais')
                             ->schema([
                                 Forms\Components\RichEditor::make('pdf_header')->label('Cabe√ßalho'),
diff --git a/app/Filament/Resources/EquipamentoResource.php b/app/Filament/Resources/EquipamentoResource.php
index b952948..2dcc560 100644
--- a/app/Filament/Resources/EquipamentoResource.php
+++ b/app/Filament/Resources/EquipamentoResource.php
@@ -187,32 +187,31 @@ class EquipamentoResource extends Resource
                         'baixado' => '‚ùå Baixados',
                     ]),
             ])
-            ->actions([
-                Tables\Actions\ViewAction::make()
-                    ->iconButton()
-                    ->tooltip('Visualizar'),
-                Tables\Actions\EditAction::make()
-                    ->iconButton()
-                    ->tooltip('Editar'),
-
-                Tables\Actions\Action::make('download')
-                    ->tooltip('Baixar PDF')
-                    ->icon('heroicon-o-arrow-down-tray')
-                    ->color('success')
-                    ->iconButton()
-                    ->url(fn(Equipamento $record) => route('equipamento.pdf', $record))
-                    ->openUrlInNewTab(),
-
-                Tables\Actions\Action::make('enviar_lista_desejos')
-                    ->tooltip('Enviar para Lista de Desejos')
-                    ->icon('heroicon-o-gift')
-                    ->color('info')
-                    ->iconButton()
-                    ->action(function (Equipamento $record) {
-                        \App\Services\EquipamentoService::enviarParaListaDesejos($record);
-                    }),
-                Tables\Actions\DeleteAction::make()->label('')->tooltip('Excluir')->iconButton(),
-            ])
+            ->actions(
+                \App\Support\Filament\StofgardTable::defaultActions(
+                    view: true,
+                    edit: true,
+                    delete: true,
+                    extraActions: [
+                        Tables\Actions\Action::make('download')
+                            ->label('Baixar PDF')
+                            ->tooltip('Baixar PDF') // Tooltip might be redundant in dropdown but harmless
+                            ->icon('heroicon-o-arrow-down-tray')
+                            ->color('success')
+                            ->url(fn(Equipamento $record) => route('equipamento.pdf', $record))
+                            ->openUrlInNewTab(),
+
+                        Tables\Actions\Action::make('enviar_lista_desejos')
+                            ->label('Lista de Desejos')
+                            ->tooltip('Enviar para Lista de Desejos')
+                            ->icon('heroicon-o-gift')
+                            ->color('info')
+                            ->action(function (Equipamento $record) {
+                                \App\Services\EquipamentoService::enviarParaListaDesejos($record);
+                            }),
+                    ]
+                )
+            )
             ->bulkActions([
                 Tables\Actions\BulkActionGroup::make([
                     Tables\Actions\DeleteBulkAction::make(),
diff --git a/app/Filament/Resources/EstoqueResource.php b/app/Filament/Resources/EstoqueResource.php
index 3621489..de387ac 100644
--- a/app/Filament/Resources/EstoqueResource.php
+++ b/app/Filament/Resources/EstoqueResource.php
@@ -154,52 +154,53 @@ class EstoqueResource extends Resource
                     ->falseColor('danger'),
             ])
             ->defaultSort('item')
-            ->actions([
-                Tables\Actions\ActionGroup::make([
-                    Tables\Actions\ViewAction::make(),
-                    Tables\Actions\EditAction::make(),
-                    Tables\Actions\Action::make('pdf')
-                        ->label('PDF')
-                        ->icon('heroicon-o-document-text')
-                        ->color('success')
-                        ->url(fn(Estoque $record) => route('estoque.pdf', $record))
-                        ->openUrlInNewTab(),
-                    Tables\Actions\DeleteAction::make(),
-                ]),
-
-                // A√ß√µes R√°pidas
-                Tables\Actions\Action::make('adicionar')
-                    ->label('')
-                    ->tooltip('Entrada R√°pida')
-                    ->icon('heroicon-o-plus-circle')
-                    ->color('success')
-                    ->form([
-                        Forms\Components\TextInput::make('qtd')
-                            ->label('Quantidade a adicionar')
-                            ->numeric()
-                            ->required()
-                            ->minValue(1),
-                    ])
-                    ->action(function (Estoque $record, array $data) {
-                        \App\Services\EstoqueService::adicionarEstoque($record, $data['qtd']);
-                    }),
-
-                Tables\Actions\Action::make('consumir')
-                    ->label('')
-                    ->tooltip('Sa√≠da R√°pida')
-                    ->icon('heroicon-o-minus-circle')
-                    ->color('warning')
-                    ->form([
-                        Forms\Components\TextInput::make('qtd')
-                            ->label('Quantidade a consumir')
-                            ->numeric()
-                            ->required()
-                            ->minValue(1),
-                    ])
-                    ->action(function (Estoque $record, array $data) {
-                        \App\Services\EstoqueService::consumirEstoque($record, $data['qtd']);
-                    }),
-            ]);
+            ->actions(
+                \App\Support\Filament\StofgardTable::defaultActions(
+                    view: true,
+                    edit: true,
+                    delete: true,
+                    extraActions: [
+                        Tables\Actions\Action::make('pdf')
+                            ->label('PDF')
+                            ->icon('heroicon-o-document-text')
+                            ->color('success')
+                            ->url(fn(Estoque $record) => route('estoque.pdf', $record))
+                            ->openUrlInNewTab(),
+
+                        Tables\Actions\Action::make('adicionar')
+                            ->label('Entrada R√°pida')
+                            ->tooltip('Entrada R√°pida')
+                            ->icon('heroicon-o-plus-circle')
+                            ->color('success')
+                            ->form([
+                                Forms\Components\TextInput::make('qtd')
+                                    ->label('Quantidade a adicionar')
+                                    ->numeric()
+                                    ->required()
+                                    ->minValue(1),
+                            ])
+                            ->action(function (Estoque $record, array $data) {
+                                \App\Services\EstoqueService::adicionarEstoque($record, $data['qtd']);
+                            }),
+
+                        Tables\Actions\Action::make('consumir')
+                            ->label('Sa√≠da R√°pida')
+                            ->tooltip('Sa√≠da R√°pida')
+                            ->icon('heroicon-o-minus-circle')
+                            ->color('warning')
+                            ->form([
+                                Forms\Components\TextInput::make('qtd')
+                                    ->label('Quantidade a consumir')
+                                    ->numeric()
+                                    ->required()
+                                    ->minValue(1),
+                            ])
+                            ->action(function (Estoque $record, array $data) {
+                                \App\Services\EstoqueService::consumirEstoque($record, $data['qtd']);
+                            }),
+                    ]
+                )
+            );
     }
 
     public static function infolist(Infolist $infolist): Infolist
diff --git a/app/Filament/Resources/FinanceiroResource.php b/app/Filament/Resources/FinanceiroResource.php
index 7bf83f2..aff38e3 100644
--- a/app/Filament/Resources/FinanceiroResource.php
+++ b/app/Filament/Resources/FinanceiroResource.php
@@ -500,83 +500,73 @@ class FinanceiroResource extends Resource
                         false: fn($query) => $query->where(fn($q) => $q->where('status', 'pago')->orWhereDate('data_vencimento', '>=', now())),
                     ),
             ])
-            ->actions([
-                // Baixar pagamento
-                Tables\Actions\Action::make('baixar')
-                    ->label('')
-                    ->tooltip('Baixar Pagamento')
-                    ->icon('heroicon-o-check-circle')
-                    ->color('success')
-                    ->iconButton()
-                    ->visible(fn(Financeiro $record) => $record->status === 'pendente' || $record->status === 'atrasado')
-                    ->requiresConfirmation()
-                    ->action(fn(Financeiro $record) => FinanceiroService::baixarPagamento($record)),
-
-                // Estornar (Desfazer pagamento)
-                Tables\Actions\Action::make('estornar')
-                    ->label('')
-                    ->tooltip('Estornar (Voltar para Pendente)')
-                    ->icon('heroicon-o-arrow-path')
-                    ->color('warning')
-                    ->iconButton()
-                    ->visible(fn(Financeiro $record) => $record->status === 'pago')
-                    ->requiresConfirmation()
-                    ->action(fn(Financeiro $record) => FinanceiroService::estornarPagamento($record)),
-
-                // Pagar Comiss√£o
-                Tables\Actions\Action::make('pagar_comissao')
-                    ->label('')
-                    ->tooltip('Pagar Comiss√£o')
-                    ->icon('heroicon-o-banknotes')
-                    ->color('success')
-                    ->iconButton()
-                    ->visible(fn(Financeiro $record) => $record->is_comissao && !$record->comissao_paga && $record->status !== 'pago')
-                    ->requiresConfirmation()
-                    ->modalHeading('Confirmar Pagamento de Comiss√£o')
-                    ->modalDescription(fn(Financeiro $record) => 'Deseja marcar a comis s√£o de ' . ($record->cadastro?->nome ?? 'N/A') . ' no valor de R$ ' . number_format((float) $record->valor, 2, ',', '.') . ' como paga?')
-                    ->action(fn(Financeiro $record) => FinanceiroService::pagarComissao($record)),
-
-                // Ver
-                Tables\Actions\ViewAction::make()
-                    ->label('')
-                    ->tooltip('Ver')
-                    ->iconButton(),
-
-                // Editar
-                Tables\Actions\EditAction::make()
-                    ->label('')
-                    ->tooltip('Editar')
-                    ->iconButton(),
-
-                // Duplicar
-                Tables\Actions\ReplicateAction::make()
-                    ->label('')
-                    ->tooltip('Duplicar Lan√ßamento')
-                    ->modalHeading('Duplicar Lan√ßamento')
-                    ->excludeAttributes(['status', 'data_pagamento', 'created_at', 'updated_at'])
-                    ->beforeReplicaSaved(function (Financeiro $replica) {
-                        $replica->status = 'pendente';
-                        $replica->data_pagamento = null;
-                        $replica->descricao = $replica->descricao . ' (C√≥pia)';
-                    })
-                    ->iconButton(),
-
-                // PDF
-                Tables\Actions\Action::make('download')
-                    ->label('')
-                    ->tooltip('PDF')
-                    ->icon('heroicon-o-arrow-down-tray')
-                    ->color('info')
-                    ->iconButton()
-                    ->url(fn(Financeiro $record) => route('financeiro.pdf', $record))
-                    ->openUrlInNewTab(),
-
-                // Excluir
-                Tables\Actions\DeleteAction::make()
-                    ->label('')
-                    ->tooltip('Excluir')
-                    ->iconButton(),
-            ])
+            ->actions(
+                \App\Support\Filament\StofgardTable::defaultActions(
+                    view: true,
+                    edit: true,
+                    delete: true,
+                    extraActions: [
+                        // Baixar pagamento
+                        Tables\Actions\Action::make('baixar')
+                            ->label('Baixar Pagamento')
+                            ->tooltip('Baixar Pagamento')
+                            ->icon('heroicon-s-check-circle')
+                            ->color('success')
+                            // ->iconButton()
+                            ->visible(fn(Financeiro $record) => $record->status === 'pendente' || $record->status === 'atrasado')
+                            ->requiresConfirmation()
+                            ->action(fn(Financeiro $record) => FinanceiroService::baixarPagamento($record)),
+
+                        // Estornar
+                        Tables\Actions\Action::make('estornar')
+                            ->label('Estornar')
+                            ->tooltip('Estornar (Voltar para Pendente)')
+                            ->icon('heroicon-s-arrow-path')
+                            ->color('warning')
+                            // ->iconButton()
+                            ->visible(fn(Financeiro $record) => $record->status === 'pago')
+                            ->requiresConfirmation()
+                            ->action(fn(Financeiro $record) => FinanceiroService::estornarPagamento($record)),
+
+                        // Pagar Comiss√£o
+                        Tables\Actions\Action::make('pagar_comissao')
+                            ->label('Pagar Comiss√£o')
+                            ->tooltip('Pagar Comiss√£o')
+                            ->icon('heroicon-s-banknotes')
+                            ->color('success')
+                            // ->iconButton()
+                            ->visible(fn(Financeiro $record) => $record->is_comissao && !$record->comissao_paga && $record->status !== 'pago')
+                            ->requiresConfirmation()
+                            ->modalHeading('Confirmar Pagamento de Comiss√£o')
+                            ->modalDescription(fn(Financeiro $record) => 'Deseja marcar a comiss√£o de ' . ($record->cadastro?->nome ?? 'N/A') . ' no valor de R$ ' . number_format((float) $record->valor, 2, ',', '.') . ' como paga?')
+                            ->action(fn(Financeiro $record) => FinanceiroService::pagarComissao($record)),
+
+                        // Duplicar
+                        Tables\Actions\ReplicateAction::make()
+                            ->label('Duplicar')
+                            ->tooltip('Duplicar Lan√ßamento')
+                            ->modalHeading('Duplicar Lan√ßamento')
+                            ->excludeAttributes(['status', 'data_pagamento', 'created_at', 'updated_at'])
+                            ->beforeReplicaSaved(function (Financeiro $replica) {
+                                $replica->status = 'pendente';
+                                $replica->data_pagamento = null;
+                                $replica->descricao = $replica->descricao . ' (C√≥pia)';
+                            })
+                        // ->iconButton()
+                        ,
+
+                        // PDF
+                        Tables\Actions\Action::make('pdf')
+                            ->label('Baixar PDF')
+                            ->tooltip('Baixar PDF')
+                            ->icon('heroicon-s-document-text')
+                            ->color('success')
+                            // ->iconButton()
+                            ->url(fn(Financeiro $record) => route('financeiro.pdf', $record))
+                            ->openUrlInNewTab(),
+                    ]
+                )
+            )
             ->bulkActions([
                 Tables\Actions\BulkActionGroup::make([
                     Tables\Actions\BulkAction::make('baixar_selecionados')
diff --git a/app/Filament/Resources/GarantiaResource.php b/app/Filament/Resources/GarantiaResource.php
index 2e64637..aa0a727 100644
--- a/app/Filament/Resources/GarantiaResource.php
+++ b/app/Filament/Resources/GarantiaResource.php
@@ -30,10 +30,22 @@ class GarantiaResource extends Resource
     // Subm√≥dulo de Configura√ß√µes
     protected static ?string $slug = 'configuracoes/garantias';
 
-    protected static bool $shouldRegisterNavigation = false;
+    protected static bool $shouldRegisterNavigation = true; // Agora vis√≠vel
+
+    protected static ?string $navigationGroup = 'Configura√ß√µes';
 
     protected static ?int $navigationSort = 6;
 
+    public static function getNavigationBadge(): ?string
+    {
+        return static::getModel()::where('status', 'ativa')->count();
+    }
+
+    public static function getNavigationBadgeColor(): ?string
+    {
+        return 'success';
+    }
+
     public static function form(Form $form): Form
     {
         return $form
@@ -96,13 +108,13 @@ class GarantiaResource extends Resource
                             ->label('Data de Uso')
                             ->native(false)
                             ->displayFormat('d/m/Y')
-                            ->visible(fn ($get) => in_array($get('status'), ['utilizada']))
+                            ->visible(fn($get) => in_array($get('status'), ['utilizada']))
                             ->columnSpan(1),
 
                         Forms\Components\Textarea::make('motivo_uso')
                             ->label('Motivo do Uso da Garantia')
                             ->rows(3)
-                            ->visible(fn ($get) => in_array($get('status'), ['utilizada']))
+                            ->visible(fn($get) => in_array($get('status'), ['utilizada']))
                             ->columnSpanFull(),
                     ]),
             ]);
@@ -111,6 +123,7 @@ class GarantiaResource extends Resource
     public static function table(Table $table): Table
     {
         return $table
+            ->description('üí° Garantias s√£o **criadas automaticamente** ao concluir OSs. Configure os prazos por tipo de servi√ßo em **Configura√ß√µes**.')
             ->columns([
                 Tables\Columns\TextColumn::make('ordemServico.numero_os')
                     ->label('OS')
@@ -128,8 +141,8 @@ class GarantiaResource extends Resource
                 Tables\Columns\TextColumn::make('tipo_servico')
                     ->label('Tipo')
                     ->badge()
-                    ->color(fn (string $state): string => \App\Services\ServiceTypeManager::getColor($state))
-                    ->formatStateUsing(fn (string $state): string => \App\Services\ServiceTypeManager::getLabel($state))
+                    ->color(fn(string $state): string => \App\Services\ServiceTypeManager::getColor($state))
+                    ->formatStateUsing(fn(string $state): string => \App\Services\ServiceTypeManager::getLabel($state))
                     ->visibleFrom('lg'),
 
                 Tables\Columns\TextColumn::make('data_inicio')
@@ -143,17 +156,17 @@ class GarantiaResource extends Resource
                     ->date('d/m/Y')
                     ->sortable()
                     ->badge()
-                    ->color(fn ($record): string => $record->esta_vencida ? 'danger' : 'success')
+                    ->color(fn($record): string => $record->esta_vencida ? 'danger' : 'success')
                     ->description(function ($record): string {
                         $dias = $record->dias_restantes;
                         if ($dias < 0) {
-                            return 'Vencida h√° '.abs($dias).' dias';
+                            return 'Vencida h√° ' . abs($dias) . ' dias';
                         }
                         if ($dias === 0) {
                             return 'Vence hoje';
                         }
 
-                        return 'Restam '.$dias.' dias';
+                        return 'Restam ' . $dias . ' dias';
                     }),
 
                 Tables\Columns\TextColumn::make('dias_garantia')
@@ -165,14 +178,14 @@ class GarantiaResource extends Resource
                 Tables\Columns\TextColumn::make('status')
                     ->label('Status')
                     ->badge()
-                    ->color(fn (string $state): string => match ($state) {
+                    ->color(fn(string $state): string => match ($state) {
                         'ativa' => 'success',
                         'vencida' => 'danger',
                         'utilizada' => 'warning',
                         'cancelada' => 'gray',
                         default => 'gray',
                     })
-                    ->formatStateUsing(fn (string $state): string => match ($state) {
+                    ->formatStateUsing(fn(string $state): string => match ($state) {
                         'ativa' => '‚úÖ Ativa',
                         'vencida' => '‚ùå Vencida',
                         'utilizada' => '‚ö†Ô∏è Utilizada',
@@ -209,69 +222,61 @@ class GarantiaResource extends Resource
 
                 Tables\Filters\Filter::make('proximas_vencer')
                     ->label('Pr√≥ximas a vencer (30 dias)')
-                    ->query(fn (Builder $query): Builder => $query->proximasVencer(30)),
+                    ->query(fn(Builder $query): Builder => $query->proximasVencer(30)),
 
                 Tables\Filters\TrashedFilter::make(),
             ])
-            ->actions([
-                Tables\Actions\Action::make('utilizar')
-                    ->label('Usar Garantia')
-                    ->icon('heroicon-o-wrench-screwdriver')
-                    ->color('warning')
-                    ->visible(fn ($record): bool => $record->status === 'ativa')
-                    ->form([
-                        Forms\Components\DatePicker::make('usado_em')
-                            ->label('Data de Uso')
-                            ->required()
-                            ->native(false)
-                            ->displayFormat('d/m/Y')
-                            ->default(now())
-                            ->maxDate(now()),
-
-                        Forms\Components\Textarea::make('motivo_uso')
-                            ->label('Motivo/Problema Relatado')
-                            ->required()
-                            ->rows(3),
-                    ])
-                    ->action(function ($record, array $data): void {
-                        $record->update([
-                            'status' => 'utilizada',
-                            'usado_em' => $data['usado_em'],
-                            'motivo_uso' => $data['motivo_uso'],
-                        ]);
-                    }),
+            ->actions(
+                \App\Support\Filament\StofgardTable::defaultActions(
+                    view: true,
+                    edit: true,
+                    delete: true,
+                    extraActions: [
+                        Tables\Actions\Action::make('utilizar')
+                            ->label('Usar Garantia')
+                            ->icon('heroicon-o-wrench-screwdriver')
+                            ->color('warning')
+                            ->visible(fn($record): bool => $record->status === 'ativa')
+                            ->form([
+                                Forms\Components\DatePicker::make('usado_em')
+                                    ->label('Data de Uso')
+                                    ->required()
+                                    ->native(false)
+                                    ->displayFormat('d/m/Y')
+                                    ->default(now())
+                                    ->maxDate(now()),
 
-                Tables\Actions\Action::make('pdf')
-                    ->label('')
-                    ->tooltip('Abrir PDF')
-                    ->icon('heroicon-o-document-text')
-                    ->color('info')
-                    ->url(fn (Garantia $record) => route('garantia.pdf', $record))
-                    ->openUrlInNewTab(),
-
-                Tables\Actions\ViewAction::make()
-                    ->label('')
-                    ->tooltip('Visualizar')
-                    ->iconButton(),
-
-                Tables\Actions\EditAction::make()
-                    ->label('')
-                    ->tooltip('Editar')
-                    ->iconButton(),
-
-                Tables\Actions\Action::make('download')
-                    ->label('')
-                    ->tooltip('Baixar PDF')
-                    ->icon('heroicon-o-arrow-down-tray')
-                    ->color('success')
-                    ->url(fn (Garantia $record) => route('garantia.pdf', $record))
-                    ->openUrlInNewTab(),
-
-                Tables\Actions\DeleteAction::make()
-                    ->label('')
-                    ->tooltip('Excluir')
-                    ->iconButton(),
-            ])
+                                Forms\Components\Textarea::make('motivo_uso')
+                                    ->label('Motivo/Problema Relatado')
+                                    ->required()
+                                    ->rows(3),
+                            ])
+                            ->action(function ($record, array $data): void {
+                                $record->update([
+                                    'status' => 'utilizada',
+                                    'usado_em' => $data['usado_em'],
+                                    'motivo_uso' => $data['motivo_uso'],
+                                ]);
+                            }),
+
+                        Tables\Actions\Action::make('pdf')
+                            ->label('Abrir PDF')
+                            ->tooltip('Abrir PDF')
+                            ->icon('heroicon-o-document-text')
+                            ->color('info')
+                            ->url(fn(Garantia $record) => route('garantia.pdf', $record))
+                            ->openUrlInNewTab(),
+
+                        Tables\Actions\Action::make('download')
+                            ->label('Baixar PDF')
+                            ->tooltip('Baixar PDF')
+                            ->icon('heroicon-o-arrow-down-tray')
+                            ->color('success')
+                            ->url(fn(Garantia $record) => route('garantia.pdf', $record))
+                            ->openUrlInNewTab(),
+                    ]
+                )
+            )
             ->bulkActions([
                 Tables\Actions\BulkActionGroup::make([
                     Tables\Actions\DeleteBulkAction::make(),
@@ -292,8 +297,8 @@ class GarantiaResource extends Resource
                                 TextEntry::make('data_inicio')->label('Data de In√≠cio')->date('d/m/Y'),
                                 TextEntry::make('data_fim')->label('Data de Fim')->date('d/m/Y'),
                                 TextEntry::make('tipo_servico')->label('Tipo de Servi√ßo'),
-                                TextEntry::make('usado_em')->label('Data de Uso')->date('d/m/Y')->visible(fn ($record) => $record->usado_em),
-                                TextEntry::make('motivo_uso')->label('Motivo de Uso')->columnSpanFull()->visible(fn ($record) => $record->motivo_uso),
+                                TextEntry::make('usado_em')->label('Data de Uso')->date('d/m/Y')->visible(fn($record) => $record->usado_em),
+                                TextEntry::make('motivo_uso')->label('Motivo de Uso')->columnSpanFull()->visible(fn($record) => $record->motivo_uso),
                             ]),
                     ]),
             ]);
@@ -310,7 +315,6 @@ class GarantiaResource extends Resource
     {
         return [
             'index' => Pages\ListGarantias::route('/'),
-            'create' => Pages\CreateGarantia::route('/create'),
             'view' => Pages\ViewGarantia::route('/{record}'),
             'edit' => Pages\EditGarantia::route('/{record}/edit'),
         ];
diff --git a/app/Filament/Resources/GarantiaResource/Pages/ListGarantias.php b/app/Filament/Resources/GarantiaResource/Pages/ListGarantias.php
index d2ccee9..fc0f795 100644
--- a/app/Filament/Resources/GarantiaResource/Pages/ListGarantias.php
+++ b/app/Filament/Resources/GarantiaResource/Pages/ListGarantias.php
@@ -13,7 +13,12 @@ class ListGarantias extends ListRecords
     protected function getHeaderActions(): array
     {
         return [
-            Actions\CreateAction::make(),
+            \Filament\Actions\Action::make('configurar')
+                ->label('‚öôÔ∏è Configurar Garantias')
+                ->icon('heroicon-o-cog-6-tooth')
+                ->color('info')
+                ->url('/admin/configuracoes?activeTab=üõ°Ô∏è Garantias')
+                ->tooltip('Configure os prazos de garantia por tipo de servi√ßo'),
         ];
     }
 }
diff --git a/app/Filament/Resources/ListaDesejoResource.php b/app/Filament/Resources/ListaDesejoResource.php
index 6f5fbc5..7f17ec0 100644
--- a/app/Filament/Resources/ListaDesejoResource.php
+++ b/app/Filament/Resources/ListaDesejoResource.php
@@ -130,14 +130,14 @@ class ListaDesejoResource extends Resource
                 Tables\Columns\TextColumn::make('prioridade')
                     ->label('Prioridade')
                     ->badge()
-                    ->color(fn (string $state): string => match ($state) {
+                    ->color(fn(string $state): string => match ($state) {
                         'urgente' => 'danger',
                         'alta' => 'warning',
                         'media' => 'info',
                         'baixa' => 'success',
                         default => 'gray',
                     })
-                    ->formatStateUsing(fn (string $state): string => match ($state) {
+                    ->formatStateUsing(fn(string $state): string => match ($state) {
                         'urgente' => 'üî¥ Urgente',
                         'alta' => 'üü† Alta',
                         'media' => 'üü° M√©dia',
@@ -157,7 +157,7 @@ class ListaDesejoResource extends Resource
                 Tables\Columns\TextColumn::make('valor_total_estimado')
                     ->label('Total')
                     ->money('BRL')
-                    ->state(fn (ListaDesejo $record): float => ($record->quantidade_desejada ?? 1) * ($record->preco_estimado ?? 0))
+                    ->state(fn(ListaDesejo $record): float => ($record->quantidade_desejada ?? 1) * ($record->preco_estimado ?? 0))
                     ->weight('bold'),
 
                 Tables\Columns\TextColumn::make('data_prevista_compra')
@@ -165,7 +165,7 @@ class ListaDesejoResource extends Resource
                     ->date('d/m/Y')
                     ->sortable()
                     ->color(
-                        fn (ListaDesejo $record): string => $record->data_prevista_compra && $record->data_prevista_compra->isPast() && $record->status === 'pendente'
+                        fn(ListaDesejo $record): string => $record->data_prevista_compra && $record->data_prevista_compra->isPast() && $record->status === 'pendente'
                         ? 'danger'
                         : 'gray'
                     ),
@@ -173,14 +173,14 @@ class ListaDesejoResource extends Resource
                 Tables\Columns\TextColumn::make('status')
                     ->label('Status')
                     ->badge()
-                    ->color(fn (string $state): string => match ($state) {
+                    ->color(fn(string $state): string => match ($state) {
                         'pendente' => 'warning',
                         'aprovado' => 'success',
                         'comprado' => 'info',
                         'recusado' => 'danger',
                         default => 'gray',
                     })
-                    ->formatStateUsing(fn (string $state): string => match ($state) {
+                    ->formatStateUsing(fn(string $state): string => match ($state) {
                         'pendente' => '‚è≥ Pendente',
                         'aprovado' => '‚úÖ Aprovado',
                         'comprado' => 'üõí Comprado',
@@ -204,48 +204,40 @@ class ListaDesejoResource extends Resource
                         'baixa' => 'üü¢ Baixa',
                     ]),
             ])
-            ->actions([
-                Tables\Actions\Action::make('aprovar')
-                    ->label('')
-                    ->tooltip('Aprovar')
-                    ->icon('heroicon-o-check-circle')
-                    ->color('success')
-                    ->visible(fn (ListaDesejo $record) => $record->status === 'pendente')
-                    ->requiresConfirmation()
-                    ->action(fn (ListaDesejo $record) => $record->aprovar()),
-
-                Tables\Actions\Action::make('comprar')
-                    ->label('')
-                    ->tooltip('Marcar como Comprado')
-                    ->icon('heroicon-o-shopping-cart')
-                    ->color('info')
-                    ->visible(fn (ListaDesejo $record) => $record->status === 'aprovado')
-                    ->requiresConfirmation()
-                    ->action(fn (ListaDesejo $record) => $record->marcarComoComprado()),
-
-                Tables\Actions\ViewAction::make()
-                    ->label('')
-                    ->tooltip('Visualizar')
-                    ->iconButton(),
-
-                Tables\Actions\EditAction::make()
-                    ->label('')
-                    ->tooltip('Editar')
-                    ->iconButton(),
-
-                Tables\Actions\Action::make('download')
-                    ->label('')
-                    ->tooltip('Baixar PDF')
-                    ->icon('heroicon-o-arrow-down-tray')
-                    ->color('success')
-                    ->url(fn (ListaDesejo $record) => route('listadesejo.pdf', $record))
-                    ->openUrlInNewTab(),
-
-                Tables\Actions\DeleteAction::make()
-                    ->label('')
-                    ->tooltip('Excluir')
-                    ->iconButton(),
-            ])
+            ->actions(
+                \App\Support\Filament\StofgardTable::defaultActions(
+                    view: true,
+                    edit: true,
+                    delete: true,
+                    extraActions: [
+                        Tables\Actions\Action::make('aprovar')
+                            ->label('Aprovar')
+                            ->tooltip('Aprovar')
+                            ->icon('heroicon-o-check-circle')
+                            ->color('success')
+                            ->visible(fn(ListaDesejo $record) => $record->status === 'pendente')
+                            ->requiresConfirmation()
+                            ->action(fn(ListaDesejo $record) => $record->aprovar()),
+
+                        Tables\Actions\Action::make('comprar')
+                            ->label('Comprar')
+                            ->tooltip('Marcar como Comprado')
+                            ->icon('heroicon-o-shopping-cart')
+                            ->color('info')
+                            ->visible(fn(ListaDesejo $record) => $record->status === 'aprovado')
+                            ->requiresConfirmation()
+                            ->action(fn(ListaDesejo $record) => $record->marcarComoComprado()),
+
+                        Tables\Actions\Action::make('download')
+                            ->label('Baixar PDF')
+                            ->tooltip('Baixar PDF')
+                            ->icon('heroicon-o-arrow-down-tray')
+                            ->color('success')
+                            ->url(fn(ListaDesejo $record) => route('listadesejo.pdf', $record))
+                            ->openUrlInNewTab(),
+                    ]
+                )
+            )
             ->bulkActions([
                 Tables\Actions\BulkActionGroup::make([
                     Tables\Actions\DeleteBulkAction::make(),
diff --git a/app/Filament/Resources/NotaFiscalResource.php b/app/Filament/Resources/NotaFiscalResource.php
index 17939aa..c5566a1 100644
--- a/app/Filament/Resources/NotaFiscalResource.php
+++ b/app/Filament/Resources/NotaFiscalResource.php
@@ -10,6 +10,7 @@ use Filament\Resources\Resource;
 use Filament\Support\Enums\FontWeight;
 use Filament\Tables;
 use Filament\Tables\Table;
+use Filament\Infolists;
 
 class NotaFiscalResource extends Resource
 {
@@ -40,11 +41,11 @@ class NotaFiscalResource extends Resource
                         Forms\Components\Select::make('cadastro_id')
                             ->label('Cadastro (Cliente, Loja ou Vendedor)')
                             ->options(function () {
-                                $clientes = \App\Models\Cliente::all()->mapWithKeys(fn ($c) => [
-                                    'cliente_'.$c->id => 'üßë Cliente: '.$c->nome,
+                                $clientes = \App\Models\Cliente::all()->mapWithKeys(fn($c) => [
+                                    'cliente_' . $c->id => 'üßë Cliente: ' . $c->nome,
                                 ]);
-                                $parceiros = \App\Models\Parceiro::all()->mapWithKeys(fn ($p) => [
-                                    'parceiro_'.$p->id => ($p->tipo === 'loja' ? 'üè™ Loja: ' : 'üßë‚Äçüíº Vendedor: ').$p->nome,
+                                $parceiros = \App\Models\Parceiro::all()->mapWithKeys(fn($p) => [
+                                    'parceiro_' . $p->id => ($p->tipo === 'loja' ? 'üè™ Loja: ' : 'üßë‚Äçüíº Vendedor: ') . $p->nome,
                                 ]);
 
                                 return $clientes->union($parceiros)->toArray();
@@ -123,7 +124,7 @@ class NotaFiscalResource extends Resource
                                     ->default(0)
                                     ->live()
                                     ->afterStateUpdated(
-                                        fn ($state, Forms\Set $set, Forms\Get $get) => self::calcularValorTotal($set, $get)
+                                        fn($state, Forms\Set $set, Forms\Get $get) => self::calcularValorTotal($set, $get)
                                     ),
 
                                 Forms\Components\TextInput::make('valor_servicos')
@@ -133,7 +134,7 @@ class NotaFiscalResource extends Resource
                                     ->default(0)
                                     ->live()
                                     ->afterStateUpdated(
-                                        fn ($state, Forms\Set $set, Forms\Get $get) => self::calcularValorTotal($set, $get)
+                                        fn($state, Forms\Set $set, Forms\Get $get) => self::calcularValorTotal($set, $get)
                                     ),
 
                                 Forms\Components\TextInput::make('valor_desconto')
@@ -143,7 +144,7 @@ class NotaFiscalResource extends Resource
                                     ->default(0)
                                     ->live()
                                     ->afterStateUpdated(
-                                        fn ($state, Forms\Set $set, Forms\Get $get) => self::calcularValorTotal($set, $get)
+                                        fn($state, Forms\Set $set, Forms\Get $get) => self::calcularValorTotal($set, $get)
                                     ),
 
                                 Forms\Components\TextInput::make('valor_total')
@@ -211,7 +212,7 @@ class NotaFiscalResource extends Resource
                             ->label('Motivo do Cancelamento')
                             ->rows(3),
                     ])
-                    ->visible(fn (Forms\Get $get) => $get('status') === 'cancelada'),
+                    ->visible(fn(Forms\Get $get) => $get('status') === 'cancelada'),
             ]);
     }
 
@@ -244,7 +245,7 @@ class NotaFiscalResource extends Resource
                             Infolists\Components\TextEntry::make('tipo')
                                 ->label('Tipo')
                                 ->badge()
-                                ->color(fn ($state) => match ($state) {
+                                ->color(fn($state) => match ($state) {
                                     'entrada' => 'info',
                                     'saida' => 'warning',
                                     default => 'gray',
@@ -252,7 +253,7 @@ class NotaFiscalResource extends Resource
                             Infolists\Components\TextEntry::make('status')
                                 ->label('Status')
                                 ->badge()
-                                ->color(fn ($state) => match ($state) {
+                                ->color(fn($state) => match ($state) {
                                     'autorizada' => 'success',
                                     'cancelada' => 'danger',
                                     'pendente' => 'warning',
@@ -263,7 +264,7 @@ class NotaFiscalResource extends Resource
                             Infolists\Components\TextEntry::make('cadastro.nome')
                                 ->label('Cliente/Fornecedor')
                                 ->icon('heroicon-m-user')
-                                ->url(fn ($record) => $record->cadastro
+                                ->url(fn($record) => $record->cadastro
                                     ? \App\Filament\Resources\CadastroResource::getUrl('view', ['record' => $record->cadastro->id])
                                     : null)
                                 ->color('primary'),
@@ -278,7 +279,7 @@ class NotaFiscalResource extends Resource
                                 ->label('Chave de Acesso')
                                 ->copyable()
                                 ->limit(20)
-                                ->tooltip(fn ($state) => $state),
+                                ->tooltip(fn($state) => $state),
                         ]),
                     ]),
 
@@ -377,7 +378,7 @@ class NotaFiscalResource extends Resource
                 Tables\Columns\TextColumn::make('tipo')
                     ->label('Tipo')
                     ->badge()
-                    ->color(fn (string $state): string => match ($state) {
+                    ->color(fn(string $state): string => match ($state) {
                         'entrada' => 'info',
                         'saida' => 'warning',
                     }),
@@ -403,7 +404,7 @@ class NotaFiscalResource extends Resource
                 Tables\Columns\TextColumn::make('status')
                     ->label('Status')
                     ->badge()
-                    ->color(fn (string $state): string => match ($state) {
+                    ->color(fn(string $state): string => match ($state) {
                         'rascunho' => 'gray',
                         'emitida' => 'success',
                         'cancelada' => 'danger',
@@ -450,42 +451,34 @@ class NotaFiscalResource extends Resource
                     ])
                     ->query(function ($query, array $data) {
                         return $query
-                            ->when($data['emitida_de'], fn ($q, $date) => $q->whereDate('data_emissao', '>=', $date))
-                            ->when($data['emitida_ate'], fn ($q, $date) => $q->whereDate('data_emissao', '<=', $date));
+                            ->when($data['emitida_de'], fn($q, $date) => $q->whereDate('data_emissao', '>=', $date))
+                            ->when($data['emitida_ate'], fn($q, $date) => $q->whereDate('data_emissao', '<=', $date));
                     }),
             ])
-            ->actions([
-                Tables\Actions\Action::make('pdf')
-                    ->label('')
-                    ->tooltip('Abrir PDF')
-                    ->icon('heroicon-o-document-text')
-                    ->color('info')
-                    ->url(fn (NotaFiscal $record) => route('nota-fiscal.pdf', $record))
-                    ->openUrlInNewTab(),
-
-                Tables\Actions\ViewAction::make()
-                    ->label('')
-                    ->tooltip('Visualizar')
-                    ->iconButton(),
-
-                Tables\Actions\EditAction::make()
-                    ->label('')
-                    ->tooltip('Editar')
-                    ->iconButton(),
-
-                Tables\Actions\Action::make('download')
-                    ->label('')
-                    ->tooltip('Baixar PDF')
-                    ->icon('heroicon-o-arrow-down-tray')
-                    ->color('success')
-                    ->url(fn (NotaFiscal $record) => route('nota-fiscal.pdf', $record))
-                    ->openUrlInNewTab(),
-
-                Tables\Actions\DeleteAction::make()
-                    ->label('')
-                    ->tooltip('Excluir')
-                    ->iconButton(),
-            ])
+            ->actions(
+                \App\Support\Filament\StofgardTable::defaultActions(
+                    view: true,
+                    edit: true,
+                    delete: true,
+                    extraActions: [
+                        Tables\Actions\Action::make('pdf')
+                            ->label('Abrir PDF')
+                            ->tooltip('Abrir PDF')
+                            ->icon('heroicon-o-document-text')
+                            ->color('info')
+                            ->url(fn(NotaFiscal $record) => route('nota-fiscal.pdf', $record))
+                            ->openUrlInNewTab(),
+
+                        Tables\Actions\Action::make('download')
+                            ->label('Baixar PDF')
+                            ->tooltip('Baixar PDF')
+                            ->icon('heroicon-o-arrow-down-tray')
+                            ->color('success')
+                            ->url(fn(NotaFiscal $record) => route('nota-fiscal.pdf', $record))
+                            ->openUrlInNewTab(),
+                    ]
+                )
+            )
             ->bulkActions([
                 Tables\Actions\BulkActionGroup::make([
                     Tables\Actions\DeleteBulkAction::make(),
diff --git a/app/Filament/Resources/OrcamentoResource.php b/app/Filament/Resources/OrcamentoResource.php
index 7a87fc7..08f722e 100644
--- a/app/Filament/Resources/OrcamentoResource.php
+++ b/app/Filament/Resources/OrcamentoResource.php
@@ -42,10 +42,12 @@ class OrcamentoResource extends Resource
                             ->createOptionForm(\App\Filament\Resources\CadastroResource::getFormSchema())
                             ->columnSpan(2), // Give more space
 
+
                         Forms\Components\DatePicker::make('data_orcamento')->default(now())->required(),
                         Forms\Components\DatePicker::make('data_validade')->default(now()->addDays(15)),
 
-                        // Status logic...
+                        Forms\Components\Hidden::make('status')
+                            ->default('rascunho'),
                     ])->columns(4),
 
                 // ... (Keep existing sections but ensuring they use Icons if missing)
@@ -104,6 +106,20 @@ class OrcamentoResource extends Resource
                                 \App\Services\OrcamentoFormService::recalcularTotal($set, $get);
                             }),
 
+                        Forms\Components\Select::make('loja_id')
+                            ->label('Loja/Parceiro')
+                            ->options(fn() => \App\Models\Cadastro::whereIn('tipo', ['loja', 'vendedor'])->pluck('nome', 'id'))
+                            ->searchable()
+                            ->live()
+                            ->afterStateUpdated(function (Forms\Set $set, Forms\Get $get, $state) {
+                                \App\Services\OrcamentoFormService::recalcularTotal($set, $get);
+                            }),
+
+                        Forms\Components\TextInput::make('id_parceiro')
+                            ->label('ID Parceiro')
+                            ->helperText('Identificador fornecido pelo parceiro comercial')
+                            ->maxLength(100),
+
                         // ... other fields from original
                     ])->columns(3),
 
@@ -119,10 +135,20 @@ class OrcamentoResource extends Resource
                                     ->searchable()
                                     ->required()
                                     ->live()
+                                    ->createOptionForm([
+                                        Forms\Components\TextInput::make('nome_item')
+                                            ->label('Nome do Servi√ßo Customizado')
+                                            ->required(),
+                                    ])
+                                    ->createOptionUsing(function ($data) {
+                                        // Retorna apenas o nome para uso direto
+                                        return $data['nome_item'];
+                                    })
                                     ->afterStateUpdated(fn(Forms\Set $set, Forms\Get $get, $state) => self::atualizarPrecoItem($set, $get))
                                     ->columnSpan(4),
 
                                 Forms\Components\Select::make('servico_tipo')
+                                    ->label('Tipo de Servi√ßo')
                                     ->options(\App\Services\ServiceTypeManager::getOptions())
                                     ->default('higienizacao')
                                     ->live()
@@ -142,7 +168,7 @@ class OrcamentoResource extends Resource
 
                                 Forms\Components\TextInput::make('subtotal')
                                     ->label('Total')
-                                    ->disabled()
+                                    ->readOnly()
                                     ->dehydrated()
                                     ->numeric()
                                     ->prefix('R$')
@@ -156,11 +182,42 @@ class OrcamentoResource extends Resource
                 Forms\Components\Section::make()
                     ->schema([
                         Forms\Components\TextInput::make('valor_total')
-                            ->label('VALOR TOTAL')
+                            ->label('VALOR TOTAL (Calculado)')
                             ->numeric()->prefix('R$')
                             ->extraInputAttributes(['style' => 'font-size:1.5rem;font-weight:bold;color:#16a34a;background-color:#f0fdf4;'])
-                            ->readOnly()->dehydrated()->columnSpanFull(),
-                    ]),
+                            ->readOnly()->dehydrated()
+                            ->columnSpan(1),
+
+                        Forms\Components\TextInput::make('valor_final_editado')
+                            ->label('VALOR FINAL (Edit√°vel)')
+                            ->numeric()->prefix('R$')
+                            ->placeholder('Deixe vazio para usar o valor calculado')
+                            ->helperText('Edite aqui para aplicar desconto/acr√©scimo manual')
+                            ->extraInputAttributes(['style' => 'font-size:1.5rem;font-weight:bold;color:#2563eb;background-color:#eff6ff;'])
+                            ->live(onBlur: true)
+                            ->afterStateUpdated(function (Forms\Set $set, Forms\Get $get, $state) {
+                                $valorTotal = floatval($get('valor_total') ?? 0);
+                                $valorEditado = floatval($state ?? 0);
+
+                                // Calcula o desconto (pode ser negativo se for acr√©scimo)
+                                $desconto = $valorTotal - $valorEditado;
+                                $set('desconto_prestador', $desconto);
+                            })
+                            ->columnSpan(1),
+
+                        Forms\Components\TextInput::make('desconto_prestador')
+                            ->label('Desconto/Acr√©scimo')
+                            ->numeric()->prefix('R$')
+                            ->readOnly()
+                            ->dehydrated()
+                            ->helperText('Calculado automaticamente (positivo = desconto, negativo = acr√©scimo)')
+                            ->extraInputAttributes(fn($state) => [
+                                'style' => floatval($state ?? 0) > 0
+                                    ? 'color:#dc2626;font-weight:bold;'
+                                    : 'color:#16a34a;font-weight:bold;'
+                            ])
+                            ->columnSpan(1),
+                    ])->columns(3),
 
                 Forms\Components\Section::make('Central de Arquivos')
                     ->icon('heroicon-o-paper-clip')
@@ -231,12 +288,36 @@ class OrcamentoResource extends Resource
                     ->schema([
                         Grid::make(4)->schema([
                             TextEntry::make('valor_total')
-                                ->label('Valor Final')
+                                ->label('Valor Calculado')
                                 ->money('BRL')
-                                ->size(TextEntry\TextEntrySize::Large)
+                                ->size(TextEntry\TextEntrySize::Medium)
                                 ->weight('bold')
                                 ->color('success'),
+
+                            TextEntry::make('valor_final_editado')
+                                ->label('Valor Final (Editado)')
+                                ->money('BRL')
+                                ->size(TextEntry\TextEntrySize::Large)
+                                ->weight('bold')
+                                ->color('primary')
+                                ->placeholder('N√£o editado')
+                                ->default(fn($record) => $record->valor_final_editado ?: $record->valor_total),
+
+                            TextEntry::make('desconto_prestador')
+                                ->label('Desconto/Acr√©scimo')
+                                ->money('BRL')
+                                ->color(fn($state) => floatval($state ?? 0) > 0 ? 'danger' : 'success')
+                                ->weight('bold')
+                                ->formatStateUsing(
+                                    fn($state) =>
+                                    floatval($state ?? 0) > 0
+                                    ? '- R$ ' . number_format($state, 2, ',', '.')
+                                    : ($state < 0 ? '+ R$ ' . number_format(abs($state), 2, ',', '.') : 'Sem ajuste')
+                                ),
+
                             TextEntry::make('comissao_vendedor')->label('Comiss√£o Vend.')->money('BRL'),
+                        ]),
+                        Grid::make(4)->schema([
                             TextEntry::make('comissao_loja')->label('Comiss√£o Loja')->money('BRL'),
                         ]),
                     ])
@@ -281,6 +362,45 @@ class OrcamentoResource extends Resource
                                     ->collection('arquivos')
                                     ->disk('public'),
                             ]),
+
+                        Tabs\Tab::make('üìú Hist√≥rico')
+                            ->icon('heroicon-m-clock')
+                            ->badge(fn($record) => $record->audits()->count())
+                            ->schema([
+                                RepeatableEntry::make('audits')
+                                    ->label('')
+                                    ->schema([
+                                        Grid::make(4)->schema([
+                                            TextEntry::make('user.name')
+                                                ->label('Usu√°rio')
+                                                ->icon('heroicon-m-user'),
+                                            TextEntry::make('event')
+                                                ->label('A√ß√£o')
+                                                ->badge()
+                                                ->color(fn(string $state): string => match ($state) {
+                                                    'created' => 'success',
+                                                    'updated' => 'warning',
+                                                    'deleted' => 'danger',
+                                                    'restored' => 'info',
+                                                    default => 'gray',
+                                                }),
+                                            TextEntry::make('created_at')
+                                                ->label('Data')
+                                                ->dateTime('d/m/Y H:i:s'),
+                                            TextEntry::make('ip_address')
+                                                ->label('IP')
+                                                ->icon('heroicon-m-globe-alt'),
+                                        ]),
+                                        \Filament\Infolists\Components\KeyValueEntry::make('old_values')
+                                            ->label('Valores Antigos')
+                                            ->visible(fn($state) => !empty($state)),
+                                        \Filament\Infolists\Components\KeyValueEntry::make('new_values')
+                                            ->label('Novos Valores')
+                                            ->visible(fn($state) => !empty($state)),
+                                    ])
+                                    ->grid(1)
+                                    ->contained(false),
+                            ]),
                     ]),
             ]);
     }
@@ -314,15 +434,26 @@ class OrcamentoResource extends Resource
                     }),
                 Tables\Columns\TextColumn::make('created_at')->date('d/m')->label('Data'),
             ])
-            ->actions([
-                Tables\Actions\ActionGroup::make([
-                    Tables\Actions\ViewAction::make(),
-                    Tables\Actions\EditAction::make(),
-                    Tables\Actions\Action::make('pdf')
-                        ->icon('heroicon-o-document-arrow-down')
-                        ->url(fn(Orcamento $record) => route('orcamento.pdf', $record))
-                        ->openUrlInNewTab(),
-                    Tables\Actions\DeleteAction::make(),
+            ->actions(
+                \App\Support\Filament\StofgardTable::defaultActions(
+                    view: true,
+                    edit: true,
+                    delete: true,
+                    extraActions: [
+                        Tables\Actions\Action::make('pdf')
+                            ->label('PDF')
+                            ->icon('heroicon-s-document-text')
+                            ->color('success')
+                            ->tooltip('Gerar PDF')
+                            // ->iconButton()
+                            ->url(fn(Orcamento $record) => route('orcamento.pdf', $record))
+                            ->openUrlInNewTab(),
+                    ]
+                )
+            )
+            ->bulkActions([
+                Tables\Actions\BulkActionGroup::make([
+                    Tables\Actions\DeleteBulkAction::make(),
                 ]),
             ]);
     }
@@ -332,8 +463,8 @@ class OrcamentoResource extends Resource
         return [
             'index' => Pages\ListOrcamentos::route('/'),
             'create' => Pages\CreateOrcamento::route('/create'),
-            'view' => Pages\ViewOrcamento::route('/{record}'),
             'edit' => Pages\EditOrcamento::route('/{record}/edit'),
+            'view' => Pages\ViewOrcamento::route('/{record}'),
         ];
     }
 }
diff --git a/app/Filament/Resources/OrcamentoResource/Pages/ViewOrcamento.php b/app/Filament/Resources/OrcamentoResource/Pages/ViewOrcamento.php
index 322ce36..bd1d525 100644
--- a/app/Filament/Resources/OrcamentoResource/Pages/ViewOrcamento.php
+++ b/app/Filament/Resources/OrcamentoResource/Pages/ViewOrcamento.php
@@ -22,7 +22,7 @@ class ViewOrcamento extends ViewRecord
     {
         return [
             Actions\EditAction::make()
-                ->visible(fn ($record): bool => $record->status !== 'convertido'),
+                ->visible(fn($record): bool => $record->status !== 'convertido'),
 
             Actions\Action::make('aprovar')
                 ->label('Aprovar e Gerar OS')
@@ -33,7 +33,7 @@ class ViewOrcamento extends ViewRecord
                 ->modalHeading('Aprovar Or√ßamento e Gerar OS')
                 ->modalDescription('Configure a data e hor√°rio do servi√ßo. Ap√≥s aprova√ß√£o, ser√° criada a Ordem de Servi√ßo, o agendamento e o lan√ßamento financeiro.')
                 ->modalSubmitActionLabel('‚úì Aprovar e Criar Registros')
-                ->visible(fn ($record): bool => $record->status === 'pendente')
+                ->visible(fn($record): bool => in_array($record->status, ['rascunho', 'pendente', 'enviado']))
                 ->form([
                     Forms\Components\Grid::make(2)
                         ->schema([
@@ -50,14 +50,14 @@ class ViewOrcamento extends ViewRecord
                                 ->default('09:00')
                                 ->native(false)
                                 ->columnSpan(1)
-                                ->visible(fn (\Filament\Forms\Get $get) => filled($get('data_servico'))),
+                                ->visible(fn(\Filament\Forms\Get $get) => filled($get('data_servico'))),
 
                             Forms\Components\TimePicker::make('hora_fim')
                                 ->label('üïê Hora de T√©rmino (estimada)')
                                 ->default('17:00')
                                 ->native(false)
                                 ->columnSpan(1)
-                                ->visible(fn (\Filament\Forms\Get $get) => filled($get('data_servico'))),
+                                ->visible(fn(\Filament\Forms\Get $get) => filled($get('data_servico'))),
                         ]),
 
                     Forms\Components\Textarea::make('local_servico')
@@ -90,11 +90,11 @@ class ViewOrcamento extends ViewRecord
                             'loja_id' => $record->loja_id,
                             'vendedor_id' => $record->vendedor_id,
                             'tipo_servico' => $record->tipo_servico ?? 'servico',
-                            'descricao_servico' => $record->descricao_servico ?? 'Conforme or√ßamento '.$record->numero,
+                            'descricao_servico' => $record->descricao_servico ?? 'Conforme or√ßamento ' . $record->numero,
                             'data_abertura' => now(),
                             'data_prevista' => $data['data_servico'] ?? null,
                             'status' => 'pendente',
-                            'valor_total' => $record->valor_total,
+                            'valor_total' => $record->valor_final_editado ?? $record->valor_total,
                             'observacoes' => $data['observacoes_os'] ?? $record->observacoes,
                             'criado_por' => auth()->user()->name ?? auth()->id(),
                         ];
@@ -103,18 +103,22 @@ class ViewOrcamento extends ViewRecord
 
                         // Copiar itens do or√ßamento para a OS
                         foreach ($record->itens as $item) {
+                            // Mapeia unidade para valores aceitos pelo enum
+                            $unidade = $item->unidade ?? $item->unidade_medida ?? 'un';
+                            $unidadeMapeada = $unidade === 'm2' ? 'm2' : 'unidade';
+
                             OrdemServicoItem::create([
                                 'ordem_servico_id' => $os->id,
                                 'descricao' => $item->item_nome ?? $item->descricao_item ?? 'Servi√ßo',
                                 'quantidade' => $item->quantidade,
-                                'unidade_medida' => $item->unidade ?? $item->unidade_medida ?? 'un',
+                                'unidade_medida' => $unidadeMapeada,
                                 'valor_unitario' => $item->valor_unitario,
                                 'subtotal' => $item->subtotal,
                             ]);
                         }
 
                         // 2. Criar registro na Agenda (APENAS SE TIVER DATA)
-                        if (! empty($data['data_servico'])) {
+                        if (!empty($data['data_servico'])) {
                             $dataServico = \Carbon\Carbon::parse($data['data_servico']);
                             $horaInicio = \Carbon\Carbon::parse($data['hora_inicio'] ?? '09:00');
                             $horaFim = \Carbon\Carbon::parse($data['hora_fim'] ?? '17:00');
@@ -130,7 +134,7 @@ class ViewOrcamento extends ViewRecord
                                     },
                                     $cadastro?->nome ?? 'Cliente'
                                 ),
-                                'descricao' => $record->descricao_servico ?? ('Conforme or√ßamento '.$record->numero),
+                                'descricao' => $record->descricao_servico ?? ('Conforme or√ßamento ' . $record->numero),
                                 'cadastro_id' => $record->cadastro_id,
                                 'ordem_servico_id' => $os->id,
                                 'orcamento_id' => $record->id,
@@ -140,7 +144,7 @@ class ViewOrcamento extends ViewRecord
                                 'status' => 'agendado',
                                 'local' => $enderecoCompleto ?: 'Endere√ßo n√£o informado',
                                 'endereco_completo' => $enderecoCompleto,
-                                'observacoes' => $data['observacoes_os'] ?? ('Agendado automaticamente - '.$record->numero),
+                                'observacoes' => $data['observacoes_os'] ?? ('Agendado automaticamente - ' . $record->numero),
                                 'cor' => match ($record->tipo_servico ?? 'servico') {
                                     'higienizacao' => '#3b82f6',
                                     'impermeabilizacao' => '#f59e0b',
@@ -160,7 +164,7 @@ class ViewOrcamento extends ViewRecord
                                 $os->numero_os,
                                 $cadastro?->nome ?? 'Cliente'
                             ),
-                            'valor' => $record->valor_total,
+                            'valor' => $record->valor_final_editado ?? $record->valor_total,
                             // Se n√£o tem data servi√ßo, usa hoje como base
                             'data' => $data['data_servico'] ?? now(),
                             'data_vencimento' => $data['data_servico'] ?? now()->addDays(30),
@@ -193,7 +197,7 @@ class ViewOrcamento extends ViewRecord
                 ->form([
                     Forms\Components\Toggle::make('include_pix')
                         ->label('Incluir QR Code PIX')
-                        ->default(fn ($record) => (bool) ($record->pdf_incluir_pix ?? true)),
+                        ->default(fn($record) => (bool) ($record->pdf_incluir_pix ?? true)),
 
                     Forms\Components\Toggle::make('persist')
                         ->label('Salvar prefer√™ncia (persistir)')
@@ -232,7 +236,7 @@ class ViewOrcamento extends ViewRecord
                 ->label('Enviar WhatsApp')
                 ->icon('heroicon-o-chat-bubble-left-right')
                 ->color('success')
-                ->url(fn (Orcamento $record) => $this->getWhatsappUrl($record))
+                ->url(fn(Orcamento $record) => $this->getWhatsappUrl($record))
                 ->openUrlInNewTab(),
         ];
     }
diff --git a/app/Filament/Resources/OrdemServicoResource.php b/app/Filament/Resources/OrdemServicoResource.php
index c5cb81c..18bb5cd 100644
--- a/app/Filament/Resources/OrdemServicoResource.php
+++ b/app/Filament/Resources/OrdemServicoResource.php
@@ -220,8 +220,7 @@ class OrdemServicoResource extends Resource
                     ->collapsible()
                     ->collapsed()
                     ->schema([
-                        Repeater::make('produtosUtilizados')
-                            ->relationship('produtosUtilizados')
+                        Repeater::make('produtos_selecionados') // Renomeado para evitar conflito e salvar manualmente
                             ->label('')
                             ->schema([
                                 Select::make('estoque_id')
@@ -403,62 +402,86 @@ class OrdemServicoResource extends Resource
                             ->when($data['created_until'], fn(Builder $query, $date) => $query->whereDate('created_at', '<=', $date));
                     }),
             ])
-            ->actions([
-                Tables\Actions\ActionGroup::make([
-                    Tables\Actions\ViewAction::make(),
-                    Tables\Actions\EditAction::make(),
-                    Tables\Actions\Action::make('download')
-                        ->label('Baixar PDF')
-                        ->icon('heroicon-o-arrow-down-tray')
-                        ->url(fn(?OrdemServico $record) => $record ? route('os.pdf', $record) : null)
-                        ->openUrlInNewTab(),
-                    Tables\Actions\DeleteAction::make(),
-                ]),
-                // Bot√µes de A√ß√£o R√°pida
-                Tables\Actions\Action::make('receber')
-                    ->label('')
-                    ->tooltip('Receber')
-                    ->icon('heroicon-o-currency-dollar')
-                    ->color('success')
-                    ->iconButton()
-                    ->visible(fn(OrdemServico $record) => $record->status !== 'cancelada' && ($record->financeiro?->status !== 'pago'))
-                    ->form([
-                        Forms\Components\DatePicker::make('data_pagamento')->default(now())->required(),
-                        Forms\Components\TextInput::make('valor_pago')->default(fn(OrdemServico $record) => $record->valor_total)->numeric()->prefix('R$')->required(),
-                        Forms\Components\Select::make('forma_pagamento')->options(['pix' => 'PIX', 'dinheiro' => 'Dinheiro', 'cartao_credito' => 'Cr√©dito', 'cartao_debito' => 'D√©bito'])->required(),
-                    ])
-                    ->action(function (OrdemServico $record, array $data) {
-                        $financeiro = $record->financeiro;
-                        if (!$financeiro) {
-                            $financeiro = \App\Models\Financeiro::create([
-                                'cadastro_id' => $record->cliente_id ?? null,
-                                'ordem_servico_id' => $record->id,
-                                'tipo' => 'entrada',
-                                'descricao' => "Recebimento OS #{$record->numero_os}",
-                                'valor' => $record->valor_total,
-                                'data_vencimento' => $record->data_conclusao ?? now(),
-                                'status' => 'pendente',
-                            ]);
-                        }
-                        $financeiro->update([
-                            'status' => 'pago',
-                            'valor_pago' => $data['valor_pago'],
-                            'data_pagamento' => $data['data_pagamento'],
-                            'forma_pagamento' => $data['forma_pagamento'],
-                        ]);
-                        \Filament\Notifications\Notification::make()->title('Pagamento Registrado!')->success()->send();
-                    }),
-
-                Tables\Actions\Action::make('concluir')
-                    ->label('')
-                    ->tooltip('Concluir')
-                    ->icon('heroicon-o-check-circle')
-                    ->color('success')
-                    ->iconButton()
-                    ->visible(fn(?OrdemServico $record) => $record && $record->status !== 'concluida')
-                    ->requiresConfirmation()
-                    ->action(fn(OrdemServico $record) => $record->update(['status' => 'concluida'])),
-            ])
+            ->actions(
+                \App\Support\Filament\StofgardTable::defaultActions(
+                    view: true,
+                    edit: true,
+                    delete: true,
+                    extraActions: [
+                        // 1. PDF (Verde)
+                        Tables\Actions\Action::make('pdf')
+                            ->label('PDF')
+                            ->icon('heroicon-s-document-text')
+                            ->color('success')
+                            ->tooltip('Imprimir Ficha da OS')
+                            // ->iconButton()
+                            ->url(fn(?OrdemServico $record) => $record ? route('os.pdf', $record) : null)
+                            ->openUrlInNewTab(),
+
+                        // 4. Baixar/Receber (Verde escuro)
+                        Tables\Actions\Action::make('baixar')
+                            ->label('Receber')
+                            ->tooltip('Receber Pagamento')
+                            ->icon('heroicon-s-currency-dollar')
+                            ->color('success')
+                            // ->iconButton()
+                            ->visible(fn(OrdemServico $record) => $record->status !== 'cancelada' && ($record->financeiro?->status !== 'pago'))
+                            ->form([
+                                Forms\Components\DatePicker::make('data_pagamento')->default(now())->required()->label('Data do Pagamento'),
+                                Forms\Components\TextInput::make('valor_pago')
+                                    ->default(fn(OrdemServico $record) => $record->valor_total)
+                                    ->numeric()
+                                    ->prefix('R$')
+                                    ->required()
+                                    ->label('Valor Recebido'),
+                                Forms\Components\Select::make('forma_pagamento')
+                                    ->options([
+                                        'pix' => 'PIX',
+                                        'dinheiro' => 'Dinheiro',
+                                        'cartao_credito' => 'Cr√©dito',
+                                        'cartao_debito' => 'D√©bito'
+                                    ])
+                                    ->required()
+                                    ->label('Forma de Pagamento'),
+                            ])
+                            ->action(function (OrdemServico $record, array $data) {
+                                $financeiro = $record->financeiro;
+                                if (!$financeiro) {
+                                    $financeiro = \App\Models\Financeiro::create([
+                                        'cadastro_id' => $record->cliente_id ?? null,
+                                        'ordem_servico_id' => $record->id,
+                                        'tipo' => 'entrada',
+                                        'descricao' => "Recebimento OS #{$record->numero_os}",
+                                        'valor' => $record->valor_total,
+                                        'data_vencimento' => $record->data_conclusao ?? now(),
+                                        'data' => now(),
+                                        'status' => 'pendente',
+                                    ]);
+                                }
+                                $financeiro->update([
+                                    'status' => 'pago',
+                                    'valor_pago' => $data['valor_pago'],
+                                    'data_pagamento' => $data['data_pagamento'],
+                                    'forma_pagamento' => $data['forma_pagamento'],
+                                ]);
+                                \Filament\Notifications\Notification::make()->title('Pagamento Registrado!')->success()->send();
+                            }),
+
+                        // 3. Concluir OS
+                        Tables\Actions\Action::make('concluir')
+                            ->label('Concluir')
+                            ->tooltip('Concluir OS')
+                            ->icon('heroicon-s-check-circle') // Changed Icon to check-circle
+                            ->color('warning')
+                            // ->iconButton()
+                            ->visible(fn(?OrdemServico $record) => $record && $record->status !== 'concluida')
+                            ->requiresConfirmation()
+                            ->modalHeading('Concluir Ordem de Servi√ßo')
+                            ->modalDescription('Tem certeza que deseja marcar esta OS como conclu√≠da?')
+                            ->action(fn(OrdemServico $record) => $record->update(['status' => 'concluida'])),
+                    ]
+                )
+            )
             ->bulkActions([
                 Tables\Actions\BulkActionGroup::make([
                     Tables\Actions\BulkAction::make('marcar_agendada')->action(fn($records) => $records->each->update(['status' => 'agendada'])),
@@ -621,6 +644,45 @@ class OrdemServicoResource extends Resource
                                     TextEntry::make('financeiro.valor_pago')->label('Valor Pago')->money('BRL'),
                                 ]),
                             ]),
+
+                        Infolists\Components\Tabs\Tab::make('üìú Hist√≥rico')
+                            ->icon('heroicon-m-clock')
+                            ->badge(fn($record) => $record->audits()->count())
+                            ->schema([
+                                RepeatableEntry::make('audits')
+                                    ->label('')
+                                    ->schema([
+                                        InfolistGrid::make(4)->schema([
+                                            TextEntry::make('user.name')
+                                                ->label('Usu√°rio')
+                                                ->icon('heroicon-m-user'),
+                                            TextEntry::make('event')
+                                                ->label('A√ß√£o')
+                                                ->badge()
+                                                ->color(fn(string $state): string => match ($state) {
+                                                    'created' => 'success',
+                                                    'updated' => 'warning',
+                                                    'deleted' => 'danger',
+                                                    'restored' => 'info',
+                                                    default => 'gray',
+                                                }),
+                                            TextEntry::make('created_at')
+                                                ->label('Data')
+                                                ->dateTime('d/m/Y H:i:s'),
+                                            TextEntry::make('ip_address')
+                                                ->label('IP')
+                                                ->icon('heroicon-m-globe-alt'),
+                                        ]),
+                                        \Filament\Infolists\Components\KeyValueEntry::make('old_values')
+                                            ->label('Valores Antigos')
+                                            ->visible(fn($state) => !empty($state)),
+                                        \Filament\Infolists\Components\KeyValueEntry::make('new_values')
+                                            ->label('Novos Valores')
+                                            ->visible(fn($state) => !empty($state)),
+                                    ])
+                                    ->grid(1)
+                                    ->contained(false),
+                            ]),
                     ]),
             ]);
     }
diff --git a/app/Filament/Resources/OrdemServicoResource/Pages/CreateOrdemServico.php b/app/Filament/Resources/OrdemServicoResource/Pages/CreateOrdemServico.php
index a4cfd3b..d8a99af 100644
--- a/app/Filament/Resources/OrdemServicoResource/Pages/CreateOrdemServico.php
+++ b/app/Filament/Resources/OrdemServicoResource/Pages/CreateOrdemServico.php
@@ -12,8 +12,14 @@ class CreateOrdemServico extends CreateRecord
 {
     protected static string $resource = OrdemServicoResource::class;
 
+    protected array $produtosSelecionados = [];
+
     protected function mutateFormDataBeforeCreate(array $data): array
     {
+        // Capturar e remover os produtos selecionados para processamento manual
+        $this->produtosSelecionados = $data['produtos_selecionados'] ?? [];
+        unset($data['produtos_selecionados']);
+
         // Sempre gerar novo n√∫mero da OS no momento do salvamento
         $data['numero_os'] = \App\Models\OrdemServico::gerarNumeroOS();
 
@@ -33,7 +39,7 @@ class CreateOrdemServico extends CreateRecord
         }
 
         // Calcular data fim de garantia APENAS se a OS j√° foi conclu√≠da
-        if (! empty($data['data_conclusao']) && ! empty($data['dias_garantia'])) {
+        if (!empty($data['data_conclusao']) && !empty($data['dias_garantia'])) {
             $data['data_fim_garantia'] = \Carbon\Carbon::parse($data['data_conclusao'])
                 ->addDays($data['dias_garantia']);
         }
@@ -45,6 +51,21 @@ class CreateOrdemServico extends CreateRecord
     {
         $ordemServico = $this->record;
 
+        // Sincronizar produtos do estoque manualmente
+        if (!empty($this->produtosSelecionados)) {
+            $syncData = [];
+            foreach ($this->produtosSelecionados as $item) {
+                if (!empty($item['estoque_id'])) {
+                    $syncData[$item['estoque_id']] = [
+                        'quantidade_utilizada' => $item['quantidade_utilizada'],
+                        'unidade' => $item['unidade'],
+                        'observacao' => $item['observacao'] ?? null,
+                    ];
+                }
+            }
+            $ordemServico->produtosUtilizados()->sync($syncData);
+        }
+
         // Criar agendamento automaticamente se houver data_prevista E o cadastro for um cliente
         if ($ordemServico->data_prevista && $ordemServico->cadastro && str_starts_with($ordemServico->cadastro_id, 'cliente_')) {
             $cliente = $ordemServico->cadastro;
@@ -64,14 +85,14 @@ class CreateOrdemServico extends CreateRecord
                 'tipo' => 'servico',
                 'status' => 'agendado',
                 'cliente_id' => $cliente->id,
-                'cadastro_id' => $ordemServico->cadastro_id ?? ($cliente ? 'cliente_'.$cliente->id : null),
+                'cadastro_id' => $ordemServico->cadastro_id ?? ($cliente ? 'cliente_' . $cliente->id : null),
                 'ordem_servico_id' => $ordemServico->id,
                 'local' => $cliente->cidade ?? null,
                 'endereco_completo' => trim(
-                    ($cliente->logradouro ?? '').', '.
-                    ($cliente->numero ?? '').' - '.
-                    ($cliente->bairro ?? '').' - '.
-                    ($cliente->cidade ?? '').'/'.
+                    ($cliente->logradouro ?? '') . ', ' .
+                    ($cliente->numero ?? '') . ' - ' .
+                    ($cliente->bairro ?? '') . ' - ' .
+                    ($cliente->cidade ?? '') . '/' .
                     ($cliente->estado ?? '')
                 ),
                 'cor' => '#22c55e', // Verde para servi√ßos
diff --git a/app/Filament/Resources/OrdemServicoResource/Pages/EditOrdemServico.php b/app/Filament/Resources/OrdemServicoResource/Pages/EditOrdemServico.php
index 5276158..3f83b42 100644
--- a/app/Filament/Resources/OrdemServicoResource/Pages/EditOrdemServico.php
+++ b/app/Filament/Resources/OrdemServicoResource/Pages/EditOrdemServico.php
@@ -23,8 +23,34 @@ class EditOrdemServico extends EditRecord
         ];
     }
 
+    protected array $produtosSelecionados = [];
+    protected bool $shouldSyncProducts = false;
+
+    protected function mutateFormDataBeforeFill(array $data): array
+    {
+        // Carregar produtos selecionados manualmente para o repeater
+        $data['produtos_selecionados'] = $this->record->produtosUtilizados->map(function ($item) {
+            return [
+                'estoque_id' => $item->id,
+                'quantidade_utilizada' => $item->pivot->quantidade_utilizada,
+                'unidade' => $item->pivot->unidade,
+                'observacao' => $item->pivot->observacao,
+                'disponivel' => $item->quantidade,
+            ];
+        })->toArray();
+
+        return $data;
+    }
+
     protected function mutateFormDataBeforeSave(array $data): array
     {
+        // Capturar e remover os produtos selecionados para processamento manual
+        if (array_key_exists('produtos_selecionados', $data)) {
+            $this->produtosSelecionados = $data['produtos_selecionados'] ?? [];
+            $this->shouldSyncProducts = true;
+            unset($data['produtos_selecionados']);
+        }
+
         // Registrar quem atualizou
         $data['atualizado_por'] = strtoupper(substr(Auth::user()->name, 0, 2));
 
@@ -40,7 +66,7 @@ class EditOrdemServico extends EditRecord
         }
 
         // Recalcular data fim de garantia quando a OS for conclu√≠da
-        if (! empty($data['data_conclusao']) && ! empty($data['dias_garantia'])) {
+        if (!empty($data['data_conclusao']) && !empty($data['dias_garantia'])) {
             $data['data_fim_garantia'] = \Carbon\Carbon::parse($data['data_conclusao'])
                 ->addDays($data['dias_garantia']);
         } elseif (empty($data['data_conclusao'])) {
@@ -55,6 +81,21 @@ class EditOrdemServico extends EditRecord
     {
         $ordemServico = $this->record;
 
+        // Sincronizar produtos do estoque manualmente
+        if ($this->shouldSyncProducts) {
+            $syncData = [];
+            foreach ($this->produtosSelecionados as $item) {
+                if (!empty($item['estoque_id'])) {
+                    $syncData[$item['estoque_id']] = [
+                        'quantidade_utilizada' => $item['quantidade_utilizada'],
+                        'unidade' => $item['unidade'],
+                        'observacao' => $item['observacao'] ?? null,
+                    ];
+                }
+            }
+            $ordemServico->produtosUtilizados()->sync($syncData);
+        }
+
         // Verificar se a data_prevista mudou
         if ($ordemServico->wasChanged('data_prevista')) {
             if ($ordemServico->agenda_id) {
@@ -74,7 +115,7 @@ class EditOrdemServico extends EditRecord
                         ->body("Nova data: {$ordemServico->data_prevista->format('d/m/Y')}")
                         ->icon('heroicon-o-calendar-days')
                         ->send();
-                } elseif (! $ordemServico->data_prevista && $agenda) {
+                } elseif (!$ordemServico->data_prevista && $agenda) {
                     // Se removeu a data, deletar o agendamento
                     $agenda->delete();
                     $ordemServico->update(['agenda_id' => null]);
@@ -105,14 +146,14 @@ class EditOrdemServico extends EditRecord
                     'tipo' => 'servico',
                     'status' => 'agendado',
                     'cliente_id' => $cliente->id,
-                    'cadastro_id' => $ordemServico->cadastro_id ?? ($cliente ? 'cliente_'.$cliente->id : null),
+                    'cadastro_id' => $ordemServico->cadastro_id ?? ($cliente ? 'cliente_' . $cliente->id : null),
                     'ordem_servico_id' => $ordemServico->id,
                     'local' => $cliente->cidade ?? null,
                     'endereco_completo' => trim(
-                        ($cliente->logradouro ?? '').', '.
-                        ($cliente->numero ?? '').' - '.
-                        ($cliente->bairro ?? '').' - '.
-                        ($cliente->cidade ?? '').'/'.
+                        ($cliente->logradouro ?? '') . ', ' .
+                        ($cliente->numero ?? '') . ' - ' .
+                        ($cliente->bairro ?? '') . ' - ' .
+                        ($cliente->cidade ?? '') . '/' .
                         ($cliente->estado ?? '')
                     ),
                     'cor' => '#22c55e',
diff --git a/app/Filament/Resources/ProdutoResource.php b/app/Filament/Resources/ProdutoResource.php
index e11eb14..40e3cbe 100644
--- a/app/Filament/Resources/ProdutoResource.php
+++ b/app/Filament/Resources/ProdutoResource.php
@@ -133,13 +133,13 @@ class ProdutoResource extends Resource
                         if ($record->preco_venda > 0 && $record->preco_custo > 0) {
                             $margem = (($record->preco_venda - $record->preco_custo) / $record->preco_custo) * 100;
 
-                            return number_format($margem, 1).'%';
+                            return number_format($margem, 1) . '%';
                         }
 
                         return '-';
                     })
                     ->badge()
-                    ->color(fn ($state) => $state === '-' ? 'gray' : 'success'),
+                    ->color(fn($state) => $state === '-' ? 'gray' : 'success'),
 
                 Tables\Columns\TextColumn::make('created_at')
                     ->label('Criado em')
@@ -148,20 +148,22 @@ class ProdutoResource extends Resource
                     ->toggleable(isToggledHiddenByDefault: true),
             ])
             ->defaultSort('nome')
-            ->actions([
-                Tables\Actions\ViewAction::make()->label('')->tooltip('Visualizar')->iconButton(),
-                Tables\Actions\EditAction::make()->label('')->tooltip('Editar')->iconButton(),
-
-                Tables\Actions\Action::make('download')
-                    ->label('')
-                    ->tooltip('Baixar PDF')
-                    ->icon('heroicon-o-arrow-down-tray')
-                    ->color('success')
-                    ->url(fn (Produto $record) => route('produto.pdf', $record))
-                    ->openUrlInNewTab(),
-
-                Tables\Actions\DeleteAction::make()->label('')->tooltip('Excluir')->iconButton(),
-            ])
+            ->actions(
+                \App\Support\Filament\StofgardTable::defaultActions(
+                    view: true,
+                    edit: true,
+                    delete: true,
+                    extraActions: [
+                        Tables\Actions\Action::make('download')
+                            ->label('Baixar PDF')
+                            ->tooltip('Baixar PDF')
+                            ->icon('heroicon-o-arrow-down-tray')
+                            ->color('success')
+                            ->url(fn(Produto $record) => route('produto.pdf', $record))
+                            ->openUrlInNewTab(),
+                    ]
+                )
+            )
             ->bulkActions([
                 Tables\Actions\BulkActionGroup::make([
                     Tables\Actions\DeleteBulkAction::make(),
@@ -193,7 +195,7 @@ class ProdutoResource extends Resource
                                     if ($record->preco_venda > 0 && $record->preco_custo > 0) {
                                         $margem = (($record->preco_venda - $record->preco_custo) / $record->preco_custo) * 100;
 
-                                        return number_format($margem, 2).'%';
+                                        return number_format($margem, 2) . '%';
                                     }
 
                                     return 'N/A';
diff --git a/app/Filament/Resources/TabelaPrecoResource.php b/app/Filament/Resources/TabelaPrecoResource.php
index 04d75b9..9996c06 100644
--- a/app/Filament/Resources/TabelaPrecoResource.php
+++ b/app/Filament/Resources/TabelaPrecoResource.php
@@ -118,8 +118,8 @@ class TabelaPrecoResource extends Resource
                 Tables\Columns\TextColumn::make('tipo_servico')
                     ->label('Tipo')
                     ->badge()
-                    ->color(fn (string $state): string => \App\Services\ServiceTypeManager::getColor($state))
-                    ->formatStateUsing(fn (string $state): string => \App\Services\ServiceTypeManager::getLabel($state))
+                    ->color(fn(string $state): string => \App\Services\ServiceTypeManager::getColor($state))
+                    ->formatStateUsing(fn(string $state): string => \App\Services\ServiceTypeManager::getLabel($state))
                     ->sortable()
                     ->searchable(),
 
@@ -138,7 +138,7 @@ class TabelaPrecoResource extends Resource
                 Tables\Columns\TextColumn::make('unidade_medida')
                     ->label('Unidade')
                     ->badge()
-                    ->formatStateUsing(fn (string $state): string => match ($state) {
+                    ->formatStateUsing(fn(string $state): string => match ($state) {
                         'unidade' => 'UN',
                         'm2' => 'M¬≤',
                         default => $state,
@@ -197,40 +197,34 @@ class TabelaPrecoResource extends Resource
                 Tables\Filters\TrashedFilter::make()
                     ->label('Exclu√≠dos'),
             ])
-            ->actions([
-                Tables\Actions\Action::make('pdf')
-                    ->label('')
-                    ->tooltip('Abrir PDF')
-                    ->icon('heroicon-o-document-text')
-                    ->color('info')
-                    ->url(fn (TabelaPreco $record) => route('tabelapreco.pdf', $record))
-                    ->openUrlInNewTab(),
-
-                Tables\Actions\ViewAction::make()
-                    ->label('')
-                    ->tooltip('Visualizar')
-                    ->iconButton(),
-
-                Tables\Actions\EditAction::make()
-                    ->label('')
-                    ->tooltip('Editar')
-                    ->iconButton(),
-
-                Tables\Actions\Action::make('download')
-                    ->label('')
-                    ->tooltip('Baixar PDF')
-                    ->icon('heroicon-o-arrow-down-tray')
-                    ->color('success')
-                    ->url(fn (TabelaPreco $record) => route('tabelapreco.pdf', $record))
-                    ->openUrlInNewTab(),
-
-                Tables\Actions\DeleteAction::make()
-                    ->label('')
-                    ->tooltip('Excluir')
-                    ->iconButton(),
-
-                Tables\Actions\RestoreAction::make(),
-            ])
+            ->actions(
+                array_merge(
+                    \App\Support\Filament\StofgardTable::defaultActions(
+                        view: true,
+                        edit: true,
+                        delete: true,
+                        extraActions: [
+                            Tables\Actions\Action::make('pdf')
+                                ->label('Abrir PDF')
+                                ->tooltip('Abrir PDF')
+                                ->icon('heroicon-o-document-text')
+                                ->color('info')
+                                ->url(fn(TabelaPreco $record) => route('tabelapreco.pdf', $record))
+                                ->openUrlInNewTab(),
+
+                            Tables\Actions\Action::make('download')
+                                ->label('Baixar PDF')
+                                ->tooltip('Baixar PDF')
+                                ->icon('heroicon-o-arrow-down-tray')
+                                ->color('success')
+                                ->url(fn(TabelaPreco $record) => route('tabelapreco.pdf', $record))
+                                ->openUrlInNewTab(),
+
+                            Tables\Actions\RestoreAction::make(),
+                        ]
+                    ),
+                )
+            )
             ->bulkActions([
                 Tables\Actions\BulkActionGroup::make([
                     Tables\Actions\DeleteBulkAction::make(),
@@ -253,7 +247,7 @@ class TabelaPrecoResource extends Resource
                                 TextEntry::make('preco_base')->label('Pre√ßo Base')->money('BRL'),
                                 TextEntry::make('preco_adicional')->label('Pre√ßo Adicional')->money('BRL'),
                                 TextEntry::make('unidade')->label('Unidade'),
-                                TextEntry::make('ativo')->label('Status')->badge()->color(fn ($state) => $state ? 'success' : 'danger'),
+                                TextEntry::make('ativo')->label('Status')->badge()->color(fn($state) => $state ? 'success' : 'danger'),
                             ]),
                     ]),
             ]);
diff --git a/app/Filament/Resources/TarefaResource.php b/app/Filament/Resources/TarefaResource.php
index f5105dc..2deac3b 100644
--- a/app/Filament/Resources/TarefaResource.php
+++ b/app/Filament/Resources/TarefaResource.php
@@ -153,30 +153,22 @@ class TarefaResource extends Resource
                     ->label('Respons√°vel')
                     ->relationship('responsavel', 'name'),
             ])
-            ->actions([
-                Tables\Actions\ViewAction::make()
-                    ->label('')
-                    ->tooltip('Visualizar')
-                    ->iconButton(),
-
-                Tables\Actions\EditAction::make()
-                    ->label('')
-                    ->tooltip('Editar')
-                    ->iconButton(),
-
-                Tables\Actions\Action::make('download')
-                    ->label('')
-                    ->tooltip('Baixar PDF')
-                    ->icon('heroicon-o-arrow-down-tray')
-                    ->color('success')
-                    ->url(fn(Tarefa $record) => route('tarefa.pdf', $record))
-                    ->openUrlInNewTab(),
-
-                Tables\Actions\DeleteAction::make()
-                    ->label('')
-                    ->tooltip('Excluir')
-                    ->iconButton(),
-            ])
+            ->actions(
+                \App\Support\Filament\StofgardTable::defaultActions(
+                    view: true,
+                    edit: true,
+                    delete: true,
+                    extraActions: [
+                        Tables\Actions\Action::make('download')
+                            ->label('Baixar PDF')
+                            ->tooltip('Baixar PDF')
+                            ->icon('heroicon-o-arrow-down-tray')
+                            ->color('success')
+                            ->url(fn(Tarefa $record) => route('tarefa.pdf', $record))
+                            ->openUrlInNewTab(),
+                    ]
+                )
+            )
             ->bulkActions([
                 Tables\Actions\DeleteBulkAction::make(),
             ]);
diff --git a/app/Models/Cadastro.php b/app/Models/Cadastro.php
index c6ca42a..4cbdfe6 100644
--- a/app/Models/Cadastro.php
+++ b/app/Models/Cadastro.php
@@ -11,9 +11,9 @@ use App\Traits\HasArquivos;
 use App\Traits\HasAuditTrail;
 use Spatie\MediaLibrary\HasMedia;
 
-class Cadastro extends Model implements HasMedia
+class Cadastro extends Model implements HasMedia, \OwenIt\Auditing\Contracts\Auditable
 {
-    use HasFactory, SoftDeletes, HasArquivos, HasAuditTrail;
+    use HasFactory, SoftDeletes, HasArquivos, HasAuditTrail, \OwenIt\Auditing\Auditable;
 
     protected static function boot()
     {
diff --git a/app/Models/Configuracao.php b/app/Models/Configuracao.php
index 8f8c9f3..3b49f48 100644
--- a/app/Models/Configuracao.php
+++ b/app/Models/Configuracao.php
@@ -24,6 +24,7 @@ class Configuracao extends Model
         'status_orcamento_personalizado',
         'formas_pagamento_personalizado',
         'cores_pdf',
+        'config_prazo_garantia',
     ];
 
     protected $casts = [
@@ -33,6 +34,7 @@ class Configuracao extends Model
         'status_orcamento_personalizado' => 'array',
         'formas_pagamento_personalizado' => 'array',
         'cores_pdf' => 'array',
+        'config_prazo_garantia' => 'array',
     ];
 
     public function tabela_precos()
diff --git a/app/Models/Garantia.php b/app/Models/Garantia.php
index 0ef3ca0..f78ce23 100644
--- a/app/Models/Garantia.php
+++ b/app/Models/Garantia.php
@@ -29,17 +29,13 @@ class Garantia extends Model
         'dias_garantia' => 'integer',
     ];
 
-    // Boot para calcular data_fim automaticamente
+    // Boot para valida√ß√µes e atualiza√ß√µes autom√°ticas
     protected static function boot()
     {
         parent::boot();
 
-        static::creating(function ($garantia) {
-            if ($garantia->data_inicio && $garantia->tipo_servico) {
-                $garantia->dias_garantia = $garantia->tipo_servico === 'impermeabilizacao' ? 365 : 90;
-                $garantia->data_fim = Carbon::parse($garantia->data_inicio)->addDays($garantia->dias_garantia);
-            }
-        });
+        // Garantias agora s√£o criadas pelo OrdemServicoObserver
+        // com data_fim e dias_garantia j√° preenchidos
 
         static::updating(function ($garantia) {
             // Atualizar status se vencida
diff --git a/app/Models/Orcamento.php b/app/Models/Orcamento.php
index 7dbc827..68c7658 100644
--- a/app/Models/Orcamento.php
+++ b/app/Models/Orcamento.php
@@ -13,13 +13,20 @@ use App\Traits\HasArquivos;
 use App\Traits\HasSequentialNumber;
 use App\Traits\HasAuditTrail;
 
-class Orcamento extends Model implements HasMedia
+class Orcamento extends Model implements HasMedia, \OwenIt\Auditing\Contracts\Auditable
 {
     use HasFactory;
     use HasArquivos;
     use SoftDeletes;
     use HasSequentialNumber;
     use HasAuditTrail;
+    use \OwenIt\Auditing\Auditable;
+
+    protected static function boot()
+    {
+        parent::boot();
+        self::observe(\OwenIt\Auditing\AuditableObserver::class);
+    }
 
     // Configura√ß√£o para HasSequentialNumber trait
     protected string $sequenceType = 'orcamento';
diff --git a/app/Models/OrdemServico.php b/app/Models/OrdemServico.php
index 8258fb7..f18b627 100644
--- a/app/Models/OrdemServico.php
+++ b/app/Models/OrdemServico.php
@@ -11,9 +11,15 @@ use Spatie\MediaLibrary\HasMedia;
 use App\Traits\HasArquivos;
 use App\Traits\HasAuditTrail;
 
-class OrdemServico extends Model implements HasMedia
+class OrdemServico extends Model implements HasMedia, \OwenIt\Auditing\Contracts\Auditable
 {
-    use HasFactory, SoftDeletes, HasArquivos, HasAuditTrail;
+    use HasFactory, SoftDeletes, HasArquivos, HasAuditTrail, \OwenIt\Auditing\Auditable;
+
+    protected static function boot()
+    {
+        parent::boot();
+        self::observe(\OwenIt\Auditing\AuditableObserver::class);
+    }
 
     // --- CORRE√á√ÉO DO ERRO DE FK ---
     // Define explicitamente o nome da tabela no banco
@@ -189,6 +195,14 @@ class OrdemServico extends Model implements HasMedia
                 }
             }
         });
+
+        static::updated(function ($model) {
+            // Verifica se o status mudou para 'concluida'
+            // O isDirty('status') garante que s√≥ executa quando o status muda, evitando duplicidade se salvar sem mudar status
+            if ($model->isDirty('status') && $model->status === 'concluida') {
+                \App\Services\EstoqueService::baixarEstoquePorOS($model);
+            }
+        });
     }
 
     /**
diff --git a/app/Observers/OrdemServicoObserver.php b/app/Observers/OrdemServicoObserver.php
index 9369485..fda2ce5 100644
--- a/app/Observers/OrdemServicoObserver.php
+++ b/app/Observers/OrdemServicoObserver.php
@@ -16,9 +16,17 @@ class OrdemServicoObserver
      */
     public function created(OrdemServico $os): void
     {
+        // Verifica se j√° existe uma agenda para esta OS
+        // (evita duplica√ß√£o quando criada via aprova√ß√£o de or√ßamento)
+        $agendaExistente = Agenda::where('ordem_servico_id', $os->id)->exists();
+
+        if ($agendaExistente) {
+            return; // J√° foi criada manualmente, n√£o duplicar
+        }
+
         // Cria agendamento autom√°tico ao criar a OS
         Agenda::create([
-            'titulo' => 'Servi√ßo - '.($os->cliente->nome ?? 'Cliente'),
+            'titulo' => 'Servi√ßo - ' . ($os->cliente->nome ?? 'Cliente'),
             'descricao' => "Ordem de Servi√ßo {$os->numero_os}",
             'cliente_id' => $os->cliente_id ?? null,
             'cadastro_id' => $os->cadastro_id,
@@ -34,6 +42,69 @@ class OrdemServicoObserver
         ]);
     }
 
+    /**
+     * Handle the OrdemServico "updated" event.
+     * Cria garantia automaticamente ao concluir a OS.
+     */
+    public function updated(OrdemServico $os): void
+    {
+        // S√≥ cria garantia na primeira conclus√£o
+        if ($os->status === 'concluida' && $os->wasChanged('status')) {
+            $this->criarGarantiaAutomatica($os);
+        }
+    }
+
+    /**
+     * Cria garantia automaticamente baseada nas configura√ß√µes do sistema.
+     */
+    protected function criarGarantiaAutomatica(OrdemServico $os): void
+    {
+        // Verifica se j√° existe garantia para esta OS
+        if ($os->garantias()->exists()) {
+            Log::info("Garantia j√° existe para OS {$os->numero_os}, pulando cria√ß√£o");
+            return;
+        }
+
+        try {
+            // Busca configura√ß√µes de garantia
+            $config = \App\Models\Configuracao::first();
+            $prazosGarantia = $config->config_prazo_garantia ?? [];
+
+            if (empty($prazosGarantia)) {
+                Log::warning("Nenhuma configura√ß√£o de garantia encontrada, usando padr√µes");
+                $prazosGarantia = [
+                    ['tipo_servico' => 'higienizacao', 'dias' => 90, 'descricao' => 'Garantia contra manchas e odores'],
+                    ['tipo_servico' => 'impermeabilizacao', 'dias' => 365, 'descricao' => 'Garantia contra infiltra√ß√µes'],
+                ];
+            }
+
+            // Determina tipo(s) de servi√ßo da OS
+            $tipoServico = $os->tipo_servico ?? 'servico';
+
+            // Encontra prazo correspondente (ou usa default 90 dias)
+            $prazoConfig = collect($prazosGarantia)->firstWhere('tipo_servico', $tipoServico);
+            $maiorPrazo = $prazoConfig['dias'] ?? 90;
+            $descricao = $prazoConfig['descricao'] ?? 'Garantia do servi√ßo realizado';
+
+            // Cria a garantia
+            \App\Models\Garantia::create([
+                'ordem_servico_id' => $os->id,
+                'tipo_servico' => $tipoServico,
+                'data_inicio' => now(),
+                'dias_garantia' => $maiorPrazo,
+                'data_fim' => now()->addDays($maiorPrazo),
+                'status' => 'ativa',
+                'observacoes' => $descricao,
+            ]);
+
+            Log::info("Garantia de {$maiorPrazo} dias criada automaticamente para OS {$os->numero_os}");
+
+        } catch (\Exception $e) {
+            Log::error("Erro ao criar garantia autom√°tica para OS {$os->numero_os}: " . $e->getMessage());
+            // N√£o lan√ßa exception para n√£o bloquear a conclus√£o da OS
+        }
+    }
+
     /**
      * Handle the OrdemServico "saved" event (after create or update).
      * Gerencia baixas e estornos de produtos do estoque.
@@ -41,7 +112,7 @@ class OrdemServicoObserver
     public function saved(OrdemServico $ordemServico): void
     {
         // Verifica se h√° dados de produtos no request
-        if (! request()->has('produtosUtilizados') && ! request()->has('data.produtosUtilizados')) {
+        if (!request()->has('produtosUtilizados') && !request()->has('data.produtosUtilizados')) {
             return;
         }
 
@@ -59,7 +130,7 @@ class OrdemServicoObserver
 
                 // ESTORNAR produtos removidos
                 foreach ($produtosAtuais as $produtoAtual) {
-                    if (! $produtosNovos->has($produtoAtual->id)) {
+                    if (!$produtosNovos->has($produtoAtual->id)) {
                         Log::info("Estornando produto {$produtoAtual->item}: {$produtoAtual->pivot->quantidade_utilizada}");
                         $produtoAtual->estornar($produtoAtual->pivot->quantidade_utilizada);
                     }
@@ -79,7 +150,7 @@ class OrdemServicoObserver
                             Log::info("Aumentando baixa do produto {$estoque->item}: diferen√ßa de {$diferenca}");
                             $estoque->darBaixa($diferenca);
                         } elseif ($diferenca < 0) {
-                            Log::info("Estornando parcialmente produto {$estoque->item}: {".abs($diferenca).'}');
+                            Log::info("Estornando parcialmente produto {$estoque->item}: {" . abs($diferenca) . '}');
                             $estoque->estornar(abs($diferenca));
                         }
                     } else {
@@ -91,7 +162,7 @@ class OrdemServicoObserver
             });
         } catch (\Exception $e) {
             // Log do erro mas n√£o interrompe o salvamento da OS
-            Log::error("Erro ao processar estoque da OS {$ordemServico->numero_os}: ".$e->getMessage());
+            Log::error("Erro ao processar estoque da OS {$ordemServico->numero_os}: " . $e->getMessage());
 
             // Re-lan√ßa a exception para que o usu√°rio saiba do problema
             throw $e;
@@ -117,7 +188,7 @@ class OrdemServicoObserver
                 }
             });
         } catch (\Exception $e) {
-            Log::error("Erro ao estornar produtos da OS {$ordemServico->numero_os} ao deletar: ".$e->getMessage());
+            Log::error("Erro ao estornar produtos da OS {$ordemServico->numero_os} ao deletar: " . $e->getMessage());
             throw $e;
         }
     }
diff --git a/app/Providers/Filament/AdminPanelProvider.php b/app/Providers/Filament/AdminPanelProvider.php
index 0ea9ecd..49e6ea0 100644
--- a/app/Providers/Filament/AdminPanelProvider.php
+++ b/app/Providers/Filament/AdminPanelProvider.php
@@ -45,6 +45,12 @@ class AdminPanelProvider extends PanelProvider
                 'primary' => Color::hex('#2563eb'), // Azul royal do logo Stofgard
                 'secondary' => Color::hex('#06b6d4'), // Azul ciano do logo
                 'gray' => Color::hex('#64748b'), // Cinza met√°lico do logo
+
+                // Cores para a√ß√µes (dark mode compatible)
+                'success' => Color::hex('#10b981'), // Verde para PDF, Receber, Baixar
+                'warning' => Color::hex('#f59e0b'), // Amarelo/Laranja para Editar
+                'danger' => Color::hex('#ef4444'), // Vermelho para Excluir
+                'info' => Color::hex('#3b82f6'), // Azul para Ver
             ])
             ->font('Inter')
             ->maxContentWidth('full')
@@ -151,6 +157,74 @@ class AdminPanelProvider extends PanelProvider
                     .group {
                         transition: all 0.2s ease-in-out;
                     }
+                    
+                    /* ========================================
+                       DARK MODE: Cores dos √çcones de A√ß√£o
+                       ======================================== */
+                    .dark .fi-color-success,
+                    .dark .fi-color-success .fi-icon {
+                        color: rgb(16, 185, 129) !important; /* Verde */
+                    }
+                    
+                    .dark .fi-color-warning,
+                    .dark .fi-color-warning .fi-icon {
+                        color: rgb(245, 158, 11) !important; /* Amarelo/Laranja */
+                    }
+                    
+                    .dark .fi-color-danger,
+                    .dark .fi-color-danger .fi-icon {
+                        color: rgb(239, 68, 68) !important; /* Vermelho */
+                    }
+                    
+                    .dark .fi-color-info,
+                    .dark .fi-color-info .fi-icon {
+                        color: rgb(59, 130, 246) !important; /* Azul */
+                    }
+                    
+                    /* Hover states para dark mode */
+                    .dark .fi-color-success:hover,
+                    .dark .fi-color-success:hover .fi-icon {
+                        color: rgb(5, 150, 105) !important;
+                    }
+                    
+                    .dark .fi-color-warning:hover,
+                    .dark .fi-color-warning:hover .fi-icon {
+                        color: rgb(217, 119, 6) !important;
+                    }
+                    
+                    .dark .fi-color-danger:hover,
+                    .dark .fi-color-danger:hover .fi-icon {
+                        color: rgb(220, 38, 38) !important;
+                    }
+                    
+                    .dark .fi-color-info:hover,
+                    .dark .fi-color-info:hover .fi-icon {
+                        color: rgb(37, 99, 235) !important;
+                    }
+                    
+                    /* ========================================
+                       ESPA√áAMENTO ENTRE √çCONES DE A√á√ÉO
+                       ======================================== */
+                    .fi-ta-actions {
+                        gap: 0.5rem !important; /* 8px entre √≠cones */
+                    }
+                    
+                    /* Garantir que os bot√µes tenham espa√ßamento */
+                    .fi-ac-icon-btn-action,
+                    .fi-icon-btn {
+                        margin-left: 0.25rem !important;
+                        margin-right: 0.25rem !important;
+                    }
+                    
+                    /* Primeiro bot√£o n√£o precisa de margem esquerda */
+                    .fi-ta-actions > :first-child {
+                        margin-left: 0 !important;
+                    }
+                    
+                    /* √öltimo bot√£o n√£o precisa de margem direita */
+                    .fi-ta-actions > :last-child {
+                        margin-right: 0 !important;
+                    }
                 </style>' . (str_contains(request()->getPathInfo(), '/admin/login') && file_exists(public_path('downloads/stofgard.apk')) ? '<div style="text-align:center;margin:12px 0"><a href="' . url('/downloads/stofgard.apk') . '?v=' . filemtime(public_path('downloads/stofgard.apk')) . '" class="inline-block px-6 py-2 bg-[#d97706] text-white rounded-md font-medium" download>üì≤ Baixar APK Stofgard (Android)</a><p style="margin-top:6px;color:#6b7280;font-size:0.85rem">Instale manualmente no Android. Habilite "Fontes desconhecidas" se necess√°rio.</p></div>' : '')
             )
             ->renderHook(
diff --git a/app/Services/EstoqueService.php b/app/Services/EstoqueService.php
index 445ad54..fd39c10 100644
--- a/app/Services/EstoqueService.php
+++ b/app/Services/EstoqueService.php
@@ -61,4 +61,21 @@ class EstoqueService
             // throw new \Exception("Estoque insuficiente.");
         }
     }
+    /**
+     * Baixa o estoque dos produtos utilizados em uma Ordem de Servi√ßo.
+     *
+     * @param \App\Models\OrdemServico $os
+     * @return void
+     */
+    public static function baixarEstoquePorOS(\App\Models\OrdemServico $os): void
+    {
+        foreach ($os->produtosUtilizados as $produto) {
+            $quantidade = $produto->pivot->quantidade_utilizada;
+
+            if ($quantidade > 0) {
+                // Usa o m√©todo existente para manter a l√≥gica de notifica√ß√£o/valida√ß√£o
+                self::consumirEstoque($produto, $quantidade);
+            }
+        }
+    }
 }
diff --git a/app/Services/OrcamentoFormService.php b/app/Services/OrcamentoFormService.php
index ff6811a..45a36bc 100644
--- a/app/Services/OrcamentoFormService.php
+++ b/app/Services/OrcamentoFormService.php
@@ -33,13 +33,25 @@ class OrcamentoFormService
     }
 
     /**
-     * Recalcula o valor total do or√ßamento somando os subtotais dos itens.
+     * Recalcula o valor total do or√ßamento somando os subtotals dos itens.
      */
     public static function recalcularTotal(Forms\Set $set, Forms\Get $get): void
     {
         $itens = $get('itens') ?? [];
 
-        $total = collect($itens)->sum(fn($item) => floatval($item['subtotal'] ?? 0));
+        $total = 0;
+
+        // Itera sobre cada item para calcular o subtotal
+        foreach ($itens as $uuid => $item) {
+            $quantidade = floatval($item['quantidade'] ?? 0);
+            $valorUnitario = floatval($item['valor_unitario'] ?? 0);
+            $subtotal = $quantidade * $valorUnitario;
+
+            // Atualiza o subtotal do item
+            $set("itens.{$uuid}.subtotal", $subtotal);
+
+            $total += $subtotal;
+        }
 
         $set('valor_total', $total);
 
diff --git a/app/Services/ProLaboreCalculator.php b/app/Services/ProLaboreCalculator.php
index de08b91..eccea2a 100644
--- a/app/Services/ProLaboreCalculator.php
+++ b/app/Services/ProLaboreCalculator.php
@@ -28,28 +28,51 @@ class ProLaboreCalculator
     /**
      * Calcula o valor de reserva (estoque/caixa)
      */
-    public function calcularReserva(float $lucro, float $percentual): float
+    public function calcularReserva(float $lucro): float
     {
         if ($lucro <= 0) {
             return 0;
         }
 
+        $percentual = (float) settings()->get('prolabore_percentual_reserva', 20);
+
         return $lucro * ($percentual / 100);
     }
 
     /**
      * Calcula a distribui√ß√£o para os s√≥cios
      */
-    public function calcularDistribuicao(float $lucroDisponivel, array $socios): array
+    public function calcularDistribuicao(float $lucroDisponivel): array
     {
-        // $socios = [['nome' => 'Jo√£o', 'percentual' => 50], ...]
+        $sociosConfig = settings()->get('socios_config');
+
+        // Se n√£o houver configura√ß√£o, retorna vazio
+        if (empty($sociosConfig) || !is_array($sociosConfig)) {
+            return [];
+        }
+
+        // Decodificar se vier como string (caso n√£o tenha passado pelo cast do Settings)
+        if (is_string($sociosConfig)) {
+            $sociosConfig = json_decode($sociosConfig, true) ?? [];
+        }
+
         $distribuicao = [];
 
-        foreach ($socios as $socio) {
-            $valor = $lucroDisponivel * ($socio['percentual'] / 100);
+        foreach ($sociosConfig as $socio) {
+            $percentual = (float) ($socio['percentual'] ?? 0);
+            $userId = $socio['user_id'] ?? null;
+
+            if (!$userId)
+                continue;
+
+            $user = \App\Models\User::find($userId);
+
+            $valor = $lucroDisponivel * ($percentual / 100);
+
             $distribuicao[] = [
-                'nome' => $socio['nome'],
-                'percentual' => $socio['percentual'],
+                'user_id' => $userId,
+                'nome' => $user?->name ?? 'Usu√°rio Desconhecido',
+                'percentual' => $percentual,
                 'valor' => $valor,
             ];
         }
diff --git a/composer.json b/composer.json
index 9a900cc..e32f29b 100644
--- a/composer.json
+++ b/composer.json
@@ -36,6 +36,8 @@
         "laravel/sail": "^1.41",
         "mockery/mockery": "^1.6",
         "nunomaduro/collision": "^8.6",
+        "pestphp/pest": "^3.8",
+        "pestphp/pest-plugin-laravel": "^3.2",
         "phpunit/phpunit": "^11.5.3"
     },
     "autoload": {
diff --git a/composer.lock b/composer.lock
index ad08584..fc21ac8 100644
--- a/composer.lock
+++ b/composer.lock
@@ -4,7 +4,7 @@
         "Read more about it at https://getcomposer.org/doc/01-basic-usage.md#installing-dependencies",
         "This file is @generated automatically"
     ],
-    "content-hash": "6cb792a6fe965ac73d38ae3b6af58ac2",
+    "content-hash": "2ef2c09605b58b67c74f8ffe98d07418",
     "packages": [
         {
             "name": "anourvalar/eloquent-serialize",
@@ -355,16 +355,16 @@
         },
         {
             "name": "brick/math",
-            "version": "0.14.1",
+            "version": "0.14.7",
             "source": {
                 "type": "git",
                 "url": "https://github.com/brick/math.git",
-                "reference": "f05858549e5f9d7bb45875a75583240a38a281d0"
+                "reference": "07ff363b16ef8aca9692bba3be9e73fe63f34e50"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/brick/math/zipball/f05858549e5f9d7bb45875a75583240a38a281d0",
-                "reference": "f05858549e5f9d7bb45875a75583240a38a281d0",
+                "url": "https://api.github.com/repos/brick/math/zipball/07ff363b16ef8aca9692bba3be9e73fe63f34e50",
+                "reference": "07ff363b16ef8aca9692bba3be9e73fe63f34e50",
                 "shasum": ""
             },
             "require": {
@@ -403,7 +403,7 @@
             ],
             "support": {
                 "issues": "https://github.com/brick/math/issues",
-                "source": "https://github.com/brick/math/tree/0.14.1"
+                "source": "https://github.com/brick/math/tree/0.14.7"
             },
             "funding": [
                 {
@@ -411,7 +411,7 @@
                     "type": "github"
                 }
             ],
-            "time": "2025-11-24T14:40:29+00:00"
+            "time": "2026-02-07T10:57:35+00:00"
         },
         {
             "name": "carbonphp/carbon-doctrine-types",
@@ -976,29 +976,29 @@
         },
         {
             "name": "doctrine/deprecations",
-            "version": "1.1.5",
+            "version": "1.1.6",
             "source": {
                 "type": "git",
                 "url": "https://github.com/doctrine/deprecations.git",
-                "reference": "459c2f5dd3d6a4633d3b5f46ee2b1c40f57d3f38"
+                "reference": "d4fe3e6fd9bb9e72557a19674f44d8ac7db4c6ca"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/doctrine/deprecations/zipball/459c2f5dd3d6a4633d3b5f46ee2b1c40f57d3f38",
-                "reference": "459c2f5dd3d6a4633d3b5f46ee2b1c40f57d3f38",
+                "url": "https://api.github.com/repos/doctrine/deprecations/zipball/d4fe3e6fd9bb9e72557a19674f44d8ac7db4c6ca",
+                "reference": "d4fe3e6fd9bb9e72557a19674f44d8ac7db4c6ca",
                 "shasum": ""
             },
             "require": {
                 "php": "^7.1 || ^8.0"
             },
             "conflict": {
-                "phpunit/phpunit": "<=7.5 || >=13"
+                "phpunit/phpunit": "<=7.5 || >=14"
             },
             "require-dev": {
-                "doctrine/coding-standard": "^9 || ^12 || ^13",
-                "phpstan/phpstan": "1.4.10 || 2.1.11",
+                "doctrine/coding-standard": "^9 || ^12 || ^14",
+                "phpstan/phpstan": "1.4.10 || 2.1.30",
                 "phpstan/phpstan-phpunit": "^1.0 || ^2",
-                "phpunit/phpunit": "^7.5 || ^8.5 || ^9.6 || ^10.5 || ^11.5 || ^12",
+                "phpunit/phpunit": "^7.5 || ^8.5 || ^9.6 || ^10.5 || ^11.5 || ^12.4 || ^13.0",
                 "psr/log": "^1 || ^2 || ^3"
             },
             "suggest": {
@@ -1018,9 +1018,9 @@
             "homepage": "https://www.doctrine-project.org/",
             "support": {
                 "issues": "https://github.com/doctrine/deprecations/issues",
-                "source": "https://github.com/doctrine/deprecations/tree/1.1.5"
+                "source": "https://github.com/doctrine/deprecations/tree/1.1.6"
             },
-            "time": "2025-04-07T20:06:18+00:00"
+            "time": "2026-02-07T07:09:04+00:00"
         },
         {
             "name": "doctrine/inflector",
@@ -2989,16 +2989,16 @@
         },
         {
             "name": "laravel/framework",
-            "version": "v12.48.1",
+            "version": "v12.50.0",
             "source": {
                 "type": "git",
                 "url": "https://github.com/laravel/framework.git",
-                "reference": "0f0974a9769378ccd9c9935c09b9927f3a606830"
+                "reference": "174ffed91d794a35a541a5eb7c3785a02a34aaba"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/laravel/framework/zipball/0f0974a9769378ccd9c9935c09b9927f3a606830",
-                "reference": "0f0974a9769378ccd9c9935c09b9927f3a606830",
+                "url": "https://api.github.com/repos/laravel/framework/zipball/174ffed91d794a35a541a5eb7c3785a02a34aaba",
+                "reference": "174ffed91d794a35a541a5eb7c3785a02a34aaba",
                 "shasum": ""
             },
             "require": {
@@ -3207,34 +3207,34 @@
                 "issues": "https://github.com/laravel/framework/issues",
                 "source": "https://github.com/laravel/framework"
             },
-            "time": "2026-01-20T16:12:36+00:00"
+            "time": "2026-02-04T18:34:13+00:00"
         },
         {
             "name": "laravel/prompts",
-            "version": "v0.3.10",
+            "version": "v0.3.12",
             "source": {
                 "type": "git",
                 "url": "https://github.com/laravel/prompts.git",
-                "reference": "360ba095ef9f51017473505191fbd4ab73e1cab3"
+                "reference": "4861ded9003b7f8a158176a0b7666f74ee761be8"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/laravel/prompts/zipball/360ba095ef9f51017473505191fbd4ab73e1cab3",
-                "reference": "360ba095ef9f51017473505191fbd4ab73e1cab3",
+                "url": "https://api.github.com/repos/laravel/prompts/zipball/4861ded9003b7f8a158176a0b7666f74ee761be8",
+                "reference": "4861ded9003b7f8a158176a0b7666f74ee761be8",
                 "shasum": ""
             },
             "require": {
                 "composer-runtime-api": "^2.2",
                 "ext-mbstring": "*",
                 "php": "^8.1",
-                "symfony/console": "^6.2|^7.0"
+                "symfony/console": "^6.2|^7.0|^8.0"
             },
             "conflict": {
                 "illuminate/console": ">=10.17.0 <10.25.0",
                 "laravel/framework": ">=10.17.0 <10.25.0"
             },
             "require-dev": {
-                "illuminate/collections": "^10.0|^11.0|^12.0",
+                "illuminate/collections": "^10.0|^11.0|^12.0|^13.0",
                 "mockery/mockery": "^1.5",
                 "pestphp/pest": "^2.3|^3.4|^4.0",
                 "phpstan/phpstan": "^1.12.28",
@@ -3264,33 +3264,33 @@
             "description": "Add beautiful and user-friendly forms to your command-line applications.",
             "support": {
                 "issues": "https://github.com/laravel/prompts/issues",
-                "source": "https://github.com/laravel/prompts/tree/v0.3.10"
+                "source": "https://github.com/laravel/prompts/tree/v0.3.12"
             },
-            "time": "2026-01-13T20:29:29+00:00"
+            "time": "2026-02-03T06:57:26+00:00"
         },
         {
             "name": "laravel/serializable-closure",
-            "version": "v2.0.8",
+            "version": "v2.0.9",
             "source": {
                 "type": "git",
                 "url": "https://github.com/laravel/serializable-closure.git",
-                "reference": "7581a4407012f5f53365e11bafc520fd7f36bc9b"
+                "reference": "8f631589ab07b7b52fead814965f5a800459cb3e"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/laravel/serializable-closure/zipball/7581a4407012f5f53365e11bafc520fd7f36bc9b",
-                "reference": "7581a4407012f5f53365e11bafc520fd7f36bc9b",
+                "url": "https://api.github.com/repos/laravel/serializable-closure/zipball/8f631589ab07b7b52fead814965f5a800459cb3e",
+                "reference": "8f631589ab07b7b52fead814965f5a800459cb3e",
                 "shasum": ""
             },
             "require": {
                 "php": "^8.1"
             },
             "require-dev": {
-                "illuminate/support": "^10.0|^11.0|^12.0",
+                "illuminate/support": "^10.0|^11.0|^12.0|^13.0",
                 "nesbot/carbon": "^2.67|^3.0",
                 "pestphp/pest": "^2.36|^3.0|^4.0",
                 "phpstan/phpstan": "^2.0",
-                "symfony/var-dumper": "^6.2.0|^7.0.0"
+                "symfony/var-dumper": "^6.2.0|^7.0.0|^8.0.0"
             },
             "type": "library",
             "extra": {
@@ -3327,7 +3327,7 @@
                 "issues": "https://github.com/laravel/serializable-closure/issues",
                 "source": "https://github.com/laravel/serializable-closure"
             },
-            "time": "2026-01-08T16:22:46+00:00"
+            "time": "2026-02-03T06:55:34+00:00"
         },
         {
             "name": "laravel/socialite",
@@ -4773,16 +4773,16 @@
         },
         {
             "name": "nesbot/carbon",
-            "version": "3.11.0",
+            "version": "3.11.1",
             "source": {
                 "type": "git",
                 "url": "https://github.com/CarbonPHP/carbon.git",
-                "reference": "bdb375400dcd162624531666db4799b36b64e4a1"
+                "reference": "f438fcc98f92babee98381d399c65336f3a3827f"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/CarbonPHP/carbon/zipball/bdb375400dcd162624531666db4799b36b64e4a1",
-                "reference": "bdb375400dcd162624531666db4799b36b64e4a1",
+                "url": "https://api.github.com/repos/CarbonPHP/carbon/zipball/f438fcc98f92babee98381d399c65336f3a3827f",
+                "reference": "f438fcc98f92babee98381d399c65336f3a3827f",
                 "shasum": ""
             },
             "require": {
@@ -4806,7 +4806,7 @@
                 "phpstan/extension-installer": "^1.4.3",
                 "phpstan/phpstan": "^2.1.22",
                 "phpunit/phpunit": "^10.5.53",
-                "squizlabs/php_codesniffer": "^3.13.4"
+                "squizlabs/php_codesniffer": "^3.13.4 || ^4.0.0"
             },
             "bin": [
                 "bin/carbon"
@@ -4849,14 +4849,14 @@
                 }
             ],
             "description": "An API extension for DateTime that supports 281 different languages.",
-            "homepage": "https://carbon.nesbot.com",
+            "homepage": "https://carbonphp.github.io/carbon/",
             "keywords": [
                 "date",
                 "datetime",
                 "time"
             ],
             "support": {
-                "docs": "https://carbon.nesbot.com/docs",
+                "docs": "https://carbonphp.github.io/carbon/guide/getting-started/introduction.html",
                 "issues": "https://github.com/CarbonPHP/carbon/issues",
                 "source": "https://github.com/CarbonPHP/carbon"
             },
@@ -4874,20 +4874,20 @@
                     "type": "tidelift"
                 }
             ],
-            "time": "2025-12-02T21:04:28+00:00"
+            "time": "2026-01-29T09:26:29+00:00"
         },
         {
             "name": "nette/schema",
-            "version": "v1.3.3",
+            "version": "v1.3.4",
             "source": {
                 "type": "git",
                 "url": "https://github.com/nette/schema.git",
-                "reference": "2befc2f42d7c715fd9d95efc31b1081e5d765004"
+                "reference": "086497a2f34b82fede9b5a41cc8e131d087cd8f7"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/nette/schema/zipball/2befc2f42d7c715fd9d95efc31b1081e5d765004",
-                "reference": "2befc2f42d7c715fd9d95efc31b1081e5d765004",
+                "url": "https://api.github.com/repos/nette/schema/zipball/086497a2f34b82fede9b5a41cc8e131d087cd8f7",
+                "reference": "086497a2f34b82fede9b5a41cc8e131d087cd8f7",
                 "shasum": ""
             },
             "require": {
@@ -4895,8 +4895,8 @@
                 "php": "8.1 - 8.5"
             },
             "require-dev": {
-                "nette/tester": "^2.5.2",
-                "phpstan/phpstan-nette": "^2.0@stable",
+                "nette/tester": "^2.6",
+                "phpstan/phpstan": "^2.0@stable",
                 "tracy/tracy": "^2.8"
             },
             "type": "library",
@@ -4937,22 +4937,22 @@
             ],
             "support": {
                 "issues": "https://github.com/nette/schema/issues",
-                "source": "https://github.com/nette/schema/tree/v1.3.3"
+                "source": "https://github.com/nette/schema/tree/v1.3.4"
             },
-            "time": "2025-10-30T22:57:59+00:00"
+            "time": "2026-02-08T02:54:00+00:00"
         },
         {
             "name": "nette/utils",
-            "version": "v4.1.1",
+            "version": "v4.1.2",
             "source": {
                 "type": "git",
                 "url": "https://github.com/nette/utils.git",
-                "reference": "c99059c0315591f1a0db7ad6002000288ab8dc72"
+                "reference": "f76b5dc3d6c6d3043c8d937df2698515b99cbaf5"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/nette/utils/zipball/c99059c0315591f1a0db7ad6002000288ab8dc72",
-                "reference": "c99059c0315591f1a0db7ad6002000288ab8dc72",
+                "url": "https://api.github.com/repos/nette/utils/zipball/f76b5dc3d6c6d3043c8d937df2698515b99cbaf5",
+                "reference": "f76b5dc3d6c6d3043c8d937df2698515b99cbaf5",
                 "shasum": ""
             },
             "require": {
@@ -4965,7 +4965,7 @@
             "require-dev": {
                 "jetbrains/phpstorm-attributes": "^1.2",
                 "nette/tester": "^2.5",
-                "phpstan/phpstan-nette": "^2.0@stable",
+                "phpstan/phpstan": "^2.0@stable",
                 "tracy/tracy": "^2.9"
             },
             "suggest": {
@@ -5026,9 +5026,9 @@
             ],
             "support": {
                 "issues": "https://github.com/nette/utils/issues",
-                "source": "https://github.com/nette/utils/tree/v4.1.1"
+                "source": "https://github.com/nette/utils/tree/v4.1.2"
             },
-            "time": "2025-12-22T12:14:32+00:00"
+            "time": "2026-02-03T17:21:09+00:00"
         },
         {
             "name": "nikic/php-parser",
@@ -8131,16 +8131,16 @@
         },
         {
             "name": "symfony/console",
-            "version": "v7.4.3",
+            "version": "v7.4.4",
             "source": {
                 "type": "git",
                 "url": "https://github.com/symfony/console.git",
-                "reference": "732a9ca6cd9dfd940c639062d5edbde2f6727fb6"
+                "reference": "41e38717ac1dd7a46b6bda7d6a82af2d98a78894"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/symfony/console/zipball/732a9ca6cd9dfd940c639062d5edbde2f6727fb6",
-                "reference": "732a9ca6cd9dfd940c639062d5edbde2f6727fb6",
+                "url": "https://api.github.com/repos/symfony/console/zipball/41e38717ac1dd7a46b6bda7d6a82af2d98a78894",
+                "reference": "41e38717ac1dd7a46b6bda7d6a82af2d98a78894",
                 "shasum": ""
             },
             "require": {
@@ -8205,7 +8205,7 @@
                 "terminal"
             ],
             "support": {
-                "source": "https://github.com/symfony/console/tree/v7.4.3"
+                "source": "https://github.com/symfony/console/tree/v7.4.4"
             },
             "funding": [
                 {
@@ -8225,7 +8225,7 @@
                     "type": "tidelift"
                 }
             ],
-            "time": "2025-12-23T14:50:43+00:00"
+            "time": "2026-01-13T11:36:38+00:00"
         },
         {
             "name": "symfony/css-selector",
@@ -8365,16 +8365,16 @@
         },
         {
             "name": "symfony/error-handler",
-            "version": "v7.4.0",
+            "version": "v7.4.4",
             "source": {
                 "type": "git",
                 "url": "https://github.com/symfony/error-handler.git",
-                "reference": "48be2b0653594eea32dcef130cca1c811dcf25c2"
+                "reference": "8da531f364ddfee53e36092a7eebbbd0b775f6b8"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/symfony/error-handler/zipball/48be2b0653594eea32dcef130cca1c811dcf25c2",
-                "reference": "48be2b0653594eea32dcef130cca1c811dcf25c2",
+                "url": "https://api.github.com/repos/symfony/error-handler/zipball/8da531f364ddfee53e36092a7eebbbd0b775f6b8",
+                "reference": "8da531f364ddfee53e36092a7eebbbd0b775f6b8",
                 "shasum": ""
             },
             "require": {
@@ -8423,7 +8423,7 @@
             "description": "Provides tools to manage errors and ease debugging PHP code",
             "homepage": "https://symfony.com",
             "support": {
-                "source": "https://github.com/symfony/error-handler/tree/v7.4.0"
+                "source": "https://github.com/symfony/error-handler/tree/v7.4.4"
             },
             "funding": [
                 {
@@ -8443,20 +8443,20 @@
                     "type": "tidelift"
                 }
             ],
-            "time": "2025-11-05T14:29:59+00:00"
+            "time": "2026-01-20T16:42:42+00:00"
         },
         {
             "name": "symfony/event-dispatcher",
-            "version": "v8.0.0",
+            "version": "v8.0.4",
             "source": {
                 "type": "git",
                 "url": "https://github.com/symfony/event-dispatcher.git",
-                "reference": "573f95783a2ec6e38752979db139f09fec033f03"
+                "reference": "99301401da182b6cfaa4700dbe9987bb75474b47"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/symfony/event-dispatcher/zipball/573f95783a2ec6e38752979db139f09fec033f03",
-                "reference": "573f95783a2ec6e38752979db139f09fec033f03",
+                "url": "https://api.github.com/repos/symfony/event-dispatcher/zipball/99301401da182b6cfaa4700dbe9987bb75474b47",
+                "reference": "99301401da182b6cfaa4700dbe9987bb75474b47",
                 "shasum": ""
             },
             "require": {
@@ -8508,7 +8508,7 @@
             "description": "Provides tools that allow your application components to communicate with each other by dispatching events and listening to them",
             "homepage": "https://symfony.com",
             "support": {
-                "source": "https://github.com/symfony/event-dispatcher/tree/v8.0.0"
+                "source": "https://github.com/symfony/event-dispatcher/tree/v8.0.4"
             },
             "funding": [
                 {
@@ -8528,7 +8528,7 @@
                     "type": "tidelift"
                 }
             ],
-            "time": "2025-10-30T14:17:19+00:00"
+            "time": "2026-01-05T11:45:55+00:00"
         },
         {
             "name": "symfony/event-dispatcher-contracts",
@@ -8608,16 +8608,16 @@
         },
         {
             "name": "symfony/finder",
-            "version": "v7.4.3",
+            "version": "v7.4.5",
             "source": {
                 "type": "git",
                 "url": "https://github.com/symfony/finder.git",
-                "reference": "fffe05569336549b20a1be64250b40516d6e8d06"
+                "reference": "ad4daa7c38668dcb031e63bc99ea9bd42196a2cb"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/symfony/finder/zipball/fffe05569336549b20a1be64250b40516d6e8d06",
-                "reference": "fffe05569336549b20a1be64250b40516d6e8d06",
+                "url": "https://api.github.com/repos/symfony/finder/zipball/ad4daa7c38668dcb031e63bc99ea9bd42196a2cb",
+                "reference": "ad4daa7c38668dcb031e63bc99ea9bd42196a2cb",
                 "shasum": ""
             },
             "require": {
@@ -8652,7 +8652,7 @@
             "description": "Finds files and directories via an intuitive fluent interface",
             "homepage": "https://symfony.com",
             "support": {
-                "source": "https://github.com/symfony/finder/tree/v7.4.3"
+                "source": "https://github.com/symfony/finder/tree/v7.4.5"
             },
             "funding": [
                 {
@@ -8672,7 +8672,7 @@
                     "type": "tidelift"
                 }
             ],
-            "time": "2025-12-23T14:50:43+00:00"
+            "time": "2026-01-26T15:07:59+00:00"
         },
         {
             "name": "symfony/html-sanitizer",
@@ -8750,16 +8750,16 @@
         },
         {
             "name": "symfony/http-foundation",
-            "version": "v7.4.3",
+            "version": "v7.4.5",
             "source": {
                 "type": "git",
                 "url": "https://github.com/symfony/http-foundation.git",
-                "reference": "a70c745d4cea48dbd609f4075e5f5cbce453bd52"
+                "reference": "446d0db2b1f21575f1284b74533e425096abdfb6"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/symfony/http-foundation/zipball/a70c745d4cea48dbd609f4075e5f5cbce453bd52",
-                "reference": "a70c745d4cea48dbd609f4075e5f5cbce453bd52",
+                "url": "https://api.github.com/repos/symfony/http-foundation/zipball/446d0db2b1f21575f1284b74533e425096abdfb6",
+                "reference": "446d0db2b1f21575f1284b74533e425096abdfb6",
                 "shasum": ""
             },
             "require": {
@@ -8808,7 +8808,7 @@
             "description": "Defines an object-oriented layer for the HTTP specification",
             "homepage": "https://symfony.com",
             "support": {
-                "source": "https://github.com/symfony/http-foundation/tree/v7.4.3"
+                "source": "https://github.com/symfony/http-foundation/tree/v7.4.5"
             },
             "funding": [
                 {
@@ -8828,20 +8828,20 @@
                     "type": "tidelift"
                 }
             ],
-            "time": "2025-12-23T14:23:49+00:00"
+            "time": "2026-01-27T16:16:02+00:00"
         },
         {
             "name": "symfony/http-kernel",
-            "version": "v7.4.3",
+            "version": "v7.4.5",
             "source": {
                 "type": "git",
                 "url": "https://github.com/symfony/http-kernel.git",
-                "reference": "885211d4bed3f857b8c964011923528a55702aa5"
+                "reference": "229eda477017f92bd2ce7615d06222ec0c19e82a"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/symfony/http-kernel/zipball/885211d4bed3f857b8c964011923528a55702aa5",
-                "reference": "885211d4bed3f857b8c964011923528a55702aa5",
+                "url": "https://api.github.com/repos/symfony/http-kernel/zipball/229eda477017f92bd2ce7615d06222ec0c19e82a",
+                "reference": "229eda477017f92bd2ce7615d06222ec0c19e82a",
                 "shasum": ""
             },
             "require": {
@@ -8927,7 +8927,7 @@
             "description": "Provides a structured process for converting a Request into a Response",
             "homepage": "https://symfony.com",
             "support": {
-                "source": "https://github.com/symfony/http-kernel/tree/v7.4.3"
+                "source": "https://github.com/symfony/http-kernel/tree/v7.4.5"
             },
             "funding": [
                 {
@@ -8947,20 +8947,20 @@
                     "type": "tidelift"
                 }
             ],
-            "time": "2025-12-31T08:43:57+00:00"
+            "time": "2026-01-28T10:33:42+00:00"
         },
         {
             "name": "symfony/mailer",
-            "version": "v7.4.3",
+            "version": "v7.4.4",
             "source": {
                 "type": "git",
                 "url": "https://github.com/symfony/mailer.git",
-                "reference": "e472d35e230108231ccb7f51eb6b2100cac02ee4"
+                "reference": "7b750074c40c694ceb34cb926d6dffee231c5cd6"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/symfony/mailer/zipball/e472d35e230108231ccb7f51eb6b2100cac02ee4",
-                "reference": "e472d35e230108231ccb7f51eb6b2100cac02ee4",
+                "url": "https://api.github.com/repos/symfony/mailer/zipball/7b750074c40c694ceb34cb926d6dffee231c5cd6",
+                "reference": "7b750074c40c694ceb34cb926d6dffee231c5cd6",
                 "shasum": ""
             },
             "require": {
@@ -9011,7 +9011,7 @@
             "description": "Helps sending emails",
             "homepage": "https://symfony.com",
             "support": {
-                "source": "https://github.com/symfony/mailer/tree/v7.4.3"
+                "source": "https://github.com/symfony/mailer/tree/v7.4.4"
             },
             "funding": [
                 {
@@ -9031,20 +9031,20 @@
                     "type": "tidelift"
                 }
             ],
-            "time": "2025-12-16T08:02:06+00:00"
+            "time": "2026-01-08T08:25:11+00:00"
         },
         {
             "name": "symfony/mime",
-            "version": "v7.4.0",
+            "version": "v7.4.5",
             "source": {
                 "type": "git",
                 "url": "https://github.com/symfony/mime.git",
-                "reference": "bdb02729471be5d047a3ac4a69068748f1a6be7a"
+                "reference": "b18c7e6e9eee1e19958138df10412f3c4c316148"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/symfony/mime/zipball/bdb02729471be5d047a3ac4a69068748f1a6be7a",
-                "reference": "bdb02729471be5d047a3ac4a69068748f1a6be7a",
+                "url": "https://api.github.com/repos/symfony/mime/zipball/b18c7e6e9eee1e19958138df10412f3c4c316148",
+                "reference": "b18c7e6e9eee1e19958138df10412f3c4c316148",
                 "shasum": ""
             },
             "require": {
@@ -9055,15 +9055,15 @@
             },
             "conflict": {
                 "egulias/email-validator": "~3.0.0",
-                "phpdocumentor/reflection-docblock": "<3.2.2",
-                "phpdocumentor/type-resolver": "<1.4.0",
+                "phpdocumentor/reflection-docblock": "<5.2|>=6",
+                "phpdocumentor/type-resolver": "<1.5.1",
                 "symfony/mailer": "<6.4",
                 "symfony/serializer": "<6.4.3|>7.0,<7.0.3"
             },
             "require-dev": {
                 "egulias/email-validator": "^2.1.10|^3.1|^4",
                 "league/html-to-markdown": "^5.0",
-                "phpdocumentor/reflection-docblock": "^3.0|^4.0|^5.0",
+                "phpdocumentor/reflection-docblock": "^5.2",
                 "symfony/dependency-injection": "^6.4|^7.0|^8.0",
                 "symfony/process": "^6.4|^7.0|^8.0",
                 "symfony/property-access": "^6.4|^7.0|^8.0",
@@ -9100,7 +9100,7 @@
                 "mime-type"
             ],
             "support": {
-                "source": "https://github.com/symfony/mime/tree/v7.4.0"
+                "source": "https://github.com/symfony/mime/tree/v7.4.5"
             },
             "funding": [
                 {
@@ -9120,7 +9120,7 @@
                     "type": "tidelift"
                 }
             ],
-            "time": "2025-11-16T10:14:42+00:00"
+            "time": "2026-01-27T08:59:58+00:00"
         },
         {
             "name": "symfony/polyfill-ctype",
@@ -9953,16 +9953,16 @@
         },
         {
             "name": "symfony/process",
-            "version": "v7.4.3",
+            "version": "v7.4.5",
             "source": {
                 "type": "git",
                 "url": "https://github.com/symfony/process.git",
-                "reference": "2f8e1a6cdf590ca63715da4d3a7a3327404a523f"
+                "reference": "608476f4604102976d687c483ac63a79ba18cc97"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/symfony/process/zipball/2f8e1a6cdf590ca63715da4d3a7a3327404a523f",
-                "reference": "2f8e1a6cdf590ca63715da4d3a7a3327404a523f",
+                "url": "https://api.github.com/repos/symfony/process/zipball/608476f4604102976d687c483ac63a79ba18cc97",
+                "reference": "608476f4604102976d687c483ac63a79ba18cc97",
                 "shasum": ""
             },
             "require": {
@@ -9994,7 +9994,7 @@
             "description": "Executes commands in sub-processes",
             "homepage": "https://symfony.com",
             "support": {
-                "source": "https://github.com/symfony/process/tree/v7.4.3"
+                "source": "https://github.com/symfony/process/tree/v7.4.5"
             },
             "funding": [
                 {
@@ -10014,20 +10014,20 @@
                     "type": "tidelift"
                 }
             ],
-            "time": "2025-12-19T10:00:43+00:00"
+            "time": "2026-01-26T15:07:59+00:00"
         },
         {
             "name": "symfony/routing",
-            "version": "v7.4.3",
+            "version": "v7.4.4",
             "source": {
                 "type": "git",
                 "url": "https://github.com/symfony/routing.git",
-                "reference": "5d3fd7adf8896c2fdb54e2f0f35b1bcbd9e45090"
+                "reference": "0798827fe2c79caeed41d70b680c2c3507d10147"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/symfony/routing/zipball/5d3fd7adf8896c2fdb54e2f0f35b1bcbd9e45090",
-                "reference": "5d3fd7adf8896c2fdb54e2f0f35b1bcbd9e45090",
+                "url": "https://api.github.com/repos/symfony/routing/zipball/0798827fe2c79caeed41d70b680c2c3507d10147",
+                "reference": "0798827fe2c79caeed41d70b680c2c3507d10147",
                 "shasum": ""
             },
             "require": {
@@ -10079,7 +10079,7 @@
                 "url"
             ],
             "support": {
-                "source": "https://github.com/symfony/routing/tree/v7.4.3"
+                "source": "https://github.com/symfony/routing/tree/v7.4.4"
             },
             "funding": [
                 {
@@ -10099,7 +10099,7 @@
                     "type": "tidelift"
                 }
             ],
-            "time": "2025-12-19T10:00:43+00:00"
+            "time": "2026-01-12T12:19:02+00:00"
         },
         {
             "name": "symfony/service-contracts",
@@ -10190,16 +10190,16 @@
         },
         {
             "name": "symfony/string",
-            "version": "v8.0.1",
+            "version": "v8.0.4",
             "source": {
                 "type": "git",
                 "url": "https://github.com/symfony/string.git",
-                "reference": "ba65a969ac918ce0cc3edfac6cdde847eba231dc"
+                "reference": "758b372d6882506821ed666032e43020c4f57194"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/symfony/string/zipball/ba65a969ac918ce0cc3edfac6cdde847eba231dc",
-                "reference": "ba65a969ac918ce0cc3edfac6cdde847eba231dc",
+                "url": "https://api.github.com/repos/symfony/string/zipball/758b372d6882506821ed666032e43020c4f57194",
+                "reference": "758b372d6882506821ed666032e43020c4f57194",
                 "shasum": ""
             },
             "require": {
@@ -10256,7 +10256,7 @@
                 "utf8"
             ],
             "support": {
-                "source": "https://github.com/symfony/string/tree/v8.0.1"
+                "source": "https://github.com/symfony/string/tree/v8.0.4"
             },
             "funding": [
                 {
@@ -10276,20 +10276,20 @@
                     "type": "tidelift"
                 }
             ],
-            "time": "2025-12-01T09:13:36+00:00"
+            "time": "2026-01-12T12:37:40+00:00"
         },
         {
             "name": "symfony/translation",
-            "version": "v8.0.3",
+            "version": "v8.0.4",
             "source": {
                 "type": "git",
                 "url": "https://github.com/symfony/translation.git",
-                "reference": "60a8f11f0e15c48f2cc47c4da53873bb5b62135d"
+                "reference": "db70c8ce7db74fd2da7b1d268db46b2a8ce32c10"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/symfony/translation/zipball/60a8f11f0e15c48f2cc47c4da53873bb5b62135d",
-                "reference": "60a8f11f0e15c48f2cc47c4da53873bb5b62135d",
+                "url": "https://api.github.com/repos/symfony/translation/zipball/db70c8ce7db74fd2da7b1d268db46b2a8ce32c10",
+                "reference": "db70c8ce7db74fd2da7b1d268db46b2a8ce32c10",
                 "shasum": ""
             },
             "require": {
@@ -10349,7 +10349,7 @@
             "description": "Provides tools to internationalize your application",
             "homepage": "https://symfony.com",
             "support": {
-                "source": "https://github.com/symfony/translation/tree/v8.0.3"
+                "source": "https://github.com/symfony/translation/tree/v8.0.4"
             },
             "funding": [
                 {
@@ -10369,7 +10369,7 @@
                     "type": "tidelift"
                 }
             ],
-            "time": "2025-12-21T10:59:45+00:00"
+            "time": "2026-01-13T13:06:50+00:00"
         },
         {
             "name": "symfony/translation-contracts",
@@ -10455,16 +10455,16 @@
         },
         {
             "name": "symfony/uid",
-            "version": "v7.4.0",
+            "version": "v7.4.4",
             "source": {
                 "type": "git",
                 "url": "https://github.com/symfony/uid.git",
-                "reference": "2498e9f81b7baa206f44de583f2f48350b90142c"
+                "reference": "7719ce8aba76be93dfe249192f1fbfa52c588e36"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/symfony/uid/zipball/2498e9f81b7baa206f44de583f2f48350b90142c",
-                "reference": "2498e9f81b7baa206f44de583f2f48350b90142c",
+                "url": "https://api.github.com/repos/symfony/uid/zipball/7719ce8aba76be93dfe249192f1fbfa52c588e36",
+                "reference": "7719ce8aba76be93dfe249192f1fbfa52c588e36",
                 "shasum": ""
             },
             "require": {
@@ -10509,7 +10509,7 @@
                 "uuid"
             ],
             "support": {
-                "source": "https://github.com/symfony/uid/tree/v7.4.0"
+                "source": "https://github.com/symfony/uid/tree/v7.4.4"
             },
             "funding": [
                 {
@@ -10529,20 +10529,20 @@
                     "type": "tidelift"
                 }
             ],
-            "time": "2025-09-25T11:02:55+00:00"
+            "time": "2026-01-03T23:30:35+00:00"
         },
         {
             "name": "symfony/var-dumper",
-            "version": "v7.4.3",
+            "version": "v7.4.4",
             "source": {
                 "type": "git",
                 "url": "https://github.com/symfony/var-dumper.git",
-                "reference": "7e99bebcb3f90d8721890f2963463280848cba92"
+                "reference": "0e4769b46a0c3c62390d124635ce59f66874b282"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/symfony/var-dumper/zipball/7e99bebcb3f90d8721890f2963463280848cba92",
-                "reference": "7e99bebcb3f90d8721890f2963463280848cba92",
+                "url": "https://api.github.com/repos/symfony/var-dumper/zipball/0e4769b46a0c3c62390d124635ce59f66874b282",
+                "reference": "0e4769b46a0c3c62390d124635ce59f66874b282",
                 "shasum": ""
             },
             "require": {
@@ -10596,7 +10596,7 @@
                 "dump"
             ],
             "support": {
-                "source": "https://github.com/symfony/var-dumper/tree/v7.4.3"
+                "source": "https://github.com/symfony/var-dumper/tree/v7.4.4"
             },
             "funding": [
                 {
@@ -10616,7 +10616,7 @@
                     "type": "tidelift"
                 }
             ],
-            "time": "2025-12-18T07:04:31+00:00"
+            "time": "2026-01-01T22:13:48+00:00"
         },
         {
             "name": "tijsverkoyen/css-to-inline-styles",
@@ -10833,6 +10833,99 @@
         }
     ],
     "packages-dev": [
+        {
+            "name": "brianium/paratest",
+            "version": "v7.8.5",
+            "source": {
+                "type": "git",
+                "url": "https://github.com/paratestphp/paratest.git",
+                "reference": "9b324c8fc319cf9728b581c7a90e1c8f6361c5e5"
+            },
+            "dist": {
+                "type": "zip",
+                "url": "https://api.github.com/repos/paratestphp/paratest/zipball/9b324c8fc319cf9728b581c7a90e1c8f6361c5e5",
+                "reference": "9b324c8fc319cf9728b581c7a90e1c8f6361c5e5",
+                "shasum": ""
+            },
+            "require": {
+                "ext-dom": "*",
+                "ext-pcre": "*",
+                "ext-reflection": "*",
+                "ext-simplexml": "*",
+                "fidry/cpu-core-counter": "^1.3.0",
+                "jean85/pretty-package-versions": "^2.1.1",
+                "php": "~8.2.0 || ~8.3.0 || ~8.4.0 || ~8.5.0",
+                "phpunit/php-code-coverage": "^11.0.12",
+                "phpunit/php-file-iterator": "^5.1.0",
+                "phpunit/php-timer": "^7.0.1",
+                "phpunit/phpunit": "^11.5.46",
+                "sebastian/environment": "^7.2.1",
+                "symfony/console": "^6.4.22 || ^7.3.4 || ^8.0.3",
+                "symfony/process": "^6.4.20 || ^7.3.4 || ^8.0.3"
+            },
+            "require-dev": {
+                "doctrine/coding-standard": "^12.0.0",
+                "ext-pcov": "*",
+                "ext-posix": "*",
+                "phpstan/phpstan": "^2.1.33",
+                "phpstan/phpstan-deprecation-rules": "^2.0.3",
+                "phpstan/phpstan-phpunit": "^2.0.11",
+                "phpstan/phpstan-strict-rules": "^2.0.7",
+                "squizlabs/php_codesniffer": "^3.13.5",
+                "symfony/filesystem": "^6.4.13 || ^7.3.2 || ^8.0.1"
+            },
+            "bin": [
+                "bin/paratest",
+                "bin/paratest_for_phpstorm"
+            ],
+            "type": "library",
+            "autoload": {
+                "psr-4": {
+                    "ParaTest\\": [
+                        "src/"
+                    ]
+                }
+            },
+            "notification-url": "https://packagist.org/downloads/",
+            "license": [
+                "MIT"
+            ],
+            "authors": [
+                {
+                    "name": "Brian Scaturro",
+                    "email": "scaturrob@gmail.com",
+                    "role": "Developer"
+                },
+                {
+                    "name": "Filippo Tessarotto",
+                    "email": "zoeslam@gmail.com",
+                    "role": "Developer"
+                }
+            ],
+            "description": "Parallel testing for PHP",
+            "homepage": "https://github.com/paratestphp/paratest",
+            "keywords": [
+                "concurrent",
+                "parallel",
+                "phpunit",
+                "testing"
+            ],
+            "support": {
+                "issues": "https://github.com/paratestphp/paratest/issues",
+                "source": "https://github.com/paratestphp/paratest/tree/v7.8.5"
+            },
+            "funding": [
+                {
+                    "url": "https://github.com/sponsors/Slamdunk",
+                    "type": "github"
+                },
+                {
+                    "url": "https://paypal.me/filippotessarotto",
+                    "type": "paypal"
+                }
+            ],
+            "time": "2026-01-08T08:02:38+00:00"
+        },
         {
             "name": "fakerphp/faker",
             "version": "v1.24.1",
@@ -10896,6 +10989,67 @@
             },
             "time": "2024-11-21T13:46:39+00:00"
         },
+        {
+            "name": "fidry/cpu-core-counter",
+            "version": "1.3.0",
+            "source": {
+                "type": "git",
+                "url": "https://github.com/theofidry/cpu-core-counter.git",
+                "reference": "db9508f7b1474469d9d3c53b86f817e344732678"
+            },
+            "dist": {
+                "type": "zip",
+                "url": "https://api.github.com/repos/theofidry/cpu-core-counter/zipball/db9508f7b1474469d9d3c53b86f817e344732678",
+                "reference": "db9508f7b1474469d9d3c53b86f817e344732678",
+                "shasum": ""
+            },
+            "require": {
+                "php": "^7.2 || ^8.0"
+            },
+            "require-dev": {
+                "fidry/makefile": "^0.2.0",
+                "fidry/php-cs-fixer-config": "^1.1.2",
+                "phpstan/extension-installer": "^1.2.0",
+                "phpstan/phpstan": "^2.0",
+                "phpstan/phpstan-deprecation-rules": "^2.0.0",
+                "phpstan/phpstan-phpunit": "^2.0",
+                "phpstan/phpstan-strict-rules": "^2.0",
+                "phpunit/phpunit": "^8.5.31 || ^9.5.26",
+                "webmozarts/strict-phpunit": "^7.5"
+            },
+            "type": "library",
+            "autoload": {
+                "psr-4": {
+                    "Fidry\\CpuCoreCounter\\": "src/"
+                }
+            },
+            "notification-url": "https://packagist.org/downloads/",
+            "license": [
+                "MIT"
+            ],
+            "authors": [
+                {
+                    "name": "Th√©o FIDRY",
+                    "email": "theo.fidry@gmail.com"
+                }
+            ],
+            "description": "Tiny utility to get the number of CPU cores.",
+            "keywords": [
+                "CPU",
+                "core"
+            ],
+            "support": {
+                "issues": "https://github.com/theofidry/cpu-core-counter/issues",
+                "source": "https://github.com/theofidry/cpu-core-counter/tree/1.3.0"
+            },
+            "funding": [
+                {
+                    "url": "https://github.com/theofidry",
+                    "type": "github"
+                }
+            ],
+            "time": "2025-08-14T07:29:31+00:00"
+        },
         {
             "name": "filp/whoops",
             "version": "2.18.4",
@@ -11018,6 +11172,66 @@
             },
             "time": "2025-04-30T06:54:44+00:00"
         },
+        {
+            "name": "jean85/pretty-package-versions",
+            "version": "2.1.1",
+            "source": {
+                "type": "git",
+                "url": "https://github.com/Jean85/pretty-package-versions.git",
+                "reference": "4d7aa5dab42e2a76d99559706022885de0e18e1a"
+            },
+            "dist": {
+                "type": "zip",
+                "url": "https://api.github.com/repos/Jean85/pretty-package-versions/zipball/4d7aa5dab42e2a76d99559706022885de0e18e1a",
+                "reference": "4d7aa5dab42e2a76d99559706022885de0e18e1a",
+                "shasum": ""
+            },
+            "require": {
+                "composer-runtime-api": "^2.1.0",
+                "php": "^7.4|^8.0"
+            },
+            "require-dev": {
+                "friendsofphp/php-cs-fixer": "^3.2",
+                "jean85/composer-provided-replaced-stub-package": "^1.0",
+                "phpstan/phpstan": "^2.0",
+                "phpunit/phpunit": "^7.5|^8.5|^9.6",
+                "rector/rector": "^2.0",
+                "vimeo/psalm": "^4.3 || ^5.0"
+            },
+            "type": "library",
+            "extra": {
+                "branch-alias": {
+                    "dev-master": "1.x-dev"
+                }
+            },
+            "autoload": {
+                "psr-4": {
+                    "Jean85\\": "src/"
+                }
+            },
+            "notification-url": "https://packagist.org/downloads/",
+            "license": [
+                "MIT"
+            ],
+            "authors": [
+                {
+                    "name": "Alessandro Lai",
+                    "email": "alessandro.lai85@gmail.com"
+                }
+            ],
+            "description": "A library to get pretty versions strings of installed dependencies",
+            "keywords": [
+                "composer",
+                "package",
+                "release",
+                "versions"
+            ],
+            "support": {
+                "issues": "https://github.com/Jean85/pretty-package-versions/issues",
+                "source": "https://github.com/Jean85/pretty-package-versions/tree/2.1.1"
+            },
+            "time": "2025-03-19T14:43:43+00:00"
+        },
         {
             "name": "laravel/dusk",
             "version": "v8.3.4",
@@ -11544,120 +11758,518 @@
             "time": "2025-11-20T02:55:25+00:00"
         },
         {
-            "name": "phar-io/manifest",
-            "version": "2.0.4",
+            "name": "pestphp/pest",
+            "version": "v3.8.5",
             "source": {
                 "type": "git",
-                "url": "https://github.com/phar-io/manifest.git",
-                "reference": "54750ef60c58e43759730615a392c31c80e23176"
+                "url": "https://github.com/pestphp/pest.git",
+                "reference": "7796630eafcfd1c02660cecdde3bc6984fbf01f4"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/phar-io/manifest/zipball/54750ef60c58e43759730615a392c31c80e23176",
-                "reference": "54750ef60c58e43759730615a392c31c80e23176",
+                "url": "https://api.github.com/repos/pestphp/pest/zipball/7796630eafcfd1c02660cecdde3bc6984fbf01f4",
+                "reference": "7796630eafcfd1c02660cecdde3bc6984fbf01f4",
                 "shasum": ""
             },
             "require": {
-                "ext-dom": "*",
-                "ext-libxml": "*",
-                "ext-phar": "*",
-                "ext-xmlwriter": "*",
-                "phar-io/version": "^3.0.1",
-                "php": "^7.2 || ^8.0"
+                "brianium/paratest": "^7.8.5",
+                "nunomaduro/collision": "^8.8.3",
+                "nunomaduro/termwind": "^2.3.3",
+                "pestphp/pest-plugin": "^3.0.0",
+                "pestphp/pest-plugin-arch": "^3.1.1",
+                "pestphp/pest-plugin-mutate": "^3.0.5",
+                "php": "^8.2.0",
+                "phpunit/phpunit": "^11.5.50"
             },
+            "conflict": {
+                "filp/whoops": "<2.16.0",
+                "phpunit/phpunit": ">11.5.50",
+                "sebastian/exporter": "<6.0.0",
+                "webmozart/assert": "<1.11.0"
+            },
+            "require-dev": {
+                "pestphp/pest-dev-tools": "^3.4.0",
+                "pestphp/pest-plugin-type-coverage": "^3.6.1",
+                "symfony/process": "^7.4.4"
+            },
+            "bin": [
+                "bin/pest"
+            ],
             "type": "library",
             "extra": {
-                "branch-alias": {
-                    "dev-master": "2.0.x-dev"
+                "pest": {
+                    "plugins": [
+                        "Pest\\Mutate\\Plugins\\Mutate",
+                        "Pest\\Plugins\\Configuration",
+                        "Pest\\Plugins\\Bail",
+                        "Pest\\Plugins\\Cache",
+                        "Pest\\Plugins\\Coverage",
+                        "Pest\\Plugins\\Init",
+                        "Pest\\Plugins\\Environment",
+                        "Pest\\Plugins\\Help",
+                        "Pest\\Plugins\\Memory",
+                        "Pest\\Plugins\\Only",
+                        "Pest\\Plugins\\Printer",
+                        "Pest\\Plugins\\ProcessIsolation",
+                        "Pest\\Plugins\\Profile",
+                        "Pest\\Plugins\\Retry",
+                        "Pest\\Plugins\\Snapshot",
+                        "Pest\\Plugins\\Verbose",
+                        "Pest\\Plugins\\Version",
+                        "Pest\\Plugins\\Parallel"
+                    ]
+                },
+                "phpstan": {
+                    "includes": [
+                        "extension.neon"
+                    ]
                 }
             },
             "autoload": {
-                "classmap": [
-                    "src/"
-                ]
+                "files": [
+                    "src/Functions.php",
+                    "src/Pest.php"
+                ],
+                "psr-4": {
+                    "Pest\\": "src/"
+                }
             },
             "notification-url": "https://packagist.org/downloads/",
             "license": [
-                "BSD-3-Clause"
+                "MIT"
             ],
             "authors": [
                 {
-                    "name": "Arne Blankerts",
-                    "email": "arne@blankerts.de",
-                    "role": "Developer"
-                },
-                {
-                    "name": "Sebastian Heuer",
-                    "email": "sebastian@phpeople.de",
-                    "role": "Developer"
-                },
-                {
-                    "name": "Sebastian Bergmann",
-                    "email": "sebastian@phpunit.de",
-                    "role": "Developer"
+                    "name": "Nuno Maduro",
+                    "email": "enunomaduro@gmail.com"
                 }
             ],
-            "description": "Component for reading phar.io manifest information from a PHP Archive (PHAR)",
+            "description": "The elegant PHP Testing Framework.",
+            "keywords": [
+                "framework",
+                "pest",
+                "php",
+                "test",
+                "testing",
+                "unit"
+            ],
             "support": {
-                "issues": "https://github.com/phar-io/manifest/issues",
-                "source": "https://github.com/phar-io/manifest/tree/2.0.4"
+                "issues": "https://github.com/pestphp/pest/issues",
+                "source": "https://github.com/pestphp/pest/tree/v3.8.5"
             },
             "funding": [
                 {
-                    "url": "https://github.com/theseer",
+                    "url": "https://www.paypal.com/paypalme/enunomaduro",
+                    "type": "custom"
+                },
+                {
+                    "url": "https://github.com/nunomaduro",
                     "type": "github"
                 }
             ],
-            "time": "2024-03-03T12:33:53+00:00"
+            "time": "2026-01-28T01:33:45+00:00"
         },
         {
-            "name": "phar-io/version",
-            "version": "3.2.1",
+            "name": "pestphp/pest-plugin",
+            "version": "v3.0.0",
             "source": {
                 "type": "git",
-                "url": "https://github.com/phar-io/version.git",
-                "reference": "4f7fd7836c6f332bb2933569e566a0d6c4cbed74"
+                "url": "https://github.com/pestphp/pest-plugin.git",
+                "reference": "e79b26c65bc11c41093b10150c1341cc5cdbea83"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/phar-io/version/zipball/4f7fd7836c6f332bb2933569e566a0d6c4cbed74",
-                "reference": "4f7fd7836c6f332bb2933569e566a0d6c4cbed74",
+                "url": "https://api.github.com/repos/pestphp/pest-plugin/zipball/e79b26c65bc11c41093b10150c1341cc5cdbea83",
+                "reference": "e79b26c65bc11c41093b10150c1341cc5cdbea83",
                 "shasum": ""
             },
             "require": {
-                "php": "^7.2 || ^8.0"
+                "composer-plugin-api": "^2.0.0",
+                "composer-runtime-api": "^2.2.2",
+                "php": "^8.2"
+            },
+            "conflict": {
+                "pestphp/pest": "<3.0.0"
+            },
+            "require-dev": {
+                "composer/composer": "^2.7.9",
+                "pestphp/pest": "^3.0.0",
+                "pestphp/pest-dev-tools": "^3.0.0"
+            },
+            "type": "composer-plugin",
+            "extra": {
+                "class": "Pest\\Plugin\\Manager"
             },
-            "type": "library",
             "autoload": {
-                "classmap": [
-                    "src/"
-                ]
+                "psr-4": {
+                    "Pest\\Plugin\\": "src/"
+                }
             },
             "notification-url": "https://packagist.org/downloads/",
             "license": [
-                "BSD-3-Clause"
+                "MIT"
             ],
-            "authors": [
+            "description": "The Pest plugin manager",
+            "keywords": [
+                "framework",
+                "manager",
+                "pest",
+                "php",
+                "plugin",
+                "test",
+                "testing",
+                "unit"
+            ],
+            "support": {
+                "source": "https://github.com/pestphp/pest-plugin/tree/v3.0.0"
+            },
+            "funding": [
                 {
-                    "name": "Arne Blankerts",
-                    "email": "arne@blankerts.de",
-                    "role": "Developer"
+                    "url": "https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=66BYDWAT92N6L",
+                    "type": "custom"
                 },
                 {
-                    "name": "Sebastian Heuer",
-                    "email": "sebastian@phpeople.de",
-                    "role": "Developer"
+                    "url": "https://github.com/nunomaduro",
+                    "type": "github"
                 },
                 {
-                    "name": "Sebastian Bergmann",
-                    "email": "sebastian@phpunit.de",
-                    "role": "Developer"
+                    "url": "https://www.patreon.com/nunomaduro",
+                    "type": "patreon"
                 }
             ],
-            "description": "Library for handling version information and constraints",
-            "support": {
-                "issues": "https://github.com/phar-io/version/issues",
-                "source": "https://github.com/phar-io/version/tree/3.2.1"
+            "time": "2024-09-08T23:21:41+00:00"
+        },
+        {
+            "name": "pestphp/pest-plugin-arch",
+            "version": "v3.1.1",
+            "source": {
+                "type": "git",
+                "url": "https://github.com/pestphp/pest-plugin-arch.git",
+                "reference": "db7bd9cb1612b223e16618d85475c6f63b9c8daa"
+            },
+            "dist": {
+                "type": "zip",
+                "url": "https://api.github.com/repos/pestphp/pest-plugin-arch/zipball/db7bd9cb1612b223e16618d85475c6f63b9c8daa",
+                "reference": "db7bd9cb1612b223e16618d85475c6f63b9c8daa",
+                "shasum": ""
+            },
+            "require": {
+                "pestphp/pest-plugin": "^3.0.0",
+                "php": "^8.2",
+                "ta-tikoma/phpunit-architecture-test": "^0.8.4"
+            },
+            "require-dev": {
+                "pestphp/pest": "^3.8.1",
+                "pestphp/pest-dev-tools": "^3.4.0"
+            },
+            "type": "library",
+            "extra": {
+                "pest": {
+                    "plugins": [
+                        "Pest\\Arch\\Plugin"
+                    ]
+                }
+            },
+            "autoload": {
+                "files": [
+                    "src/Autoload.php"
+                ],
+                "psr-4": {
+                    "Pest\\Arch\\": "src/"
+                }
+            },
+            "notification-url": "https://packagist.org/downloads/",
+            "license": [
+                "MIT"
+            ],
+            "description": "The Arch plugin for Pest PHP.",
+            "keywords": [
+                "arch",
+                "architecture",
+                "framework",
+                "pest",
+                "php",
+                "plugin",
+                "test",
+                "testing",
+                "unit"
+            ],
+            "support": {
+                "source": "https://github.com/pestphp/pest-plugin-arch/tree/v3.1.1"
+            },
+            "funding": [
+                {
+                    "url": "https://www.paypal.com/paypalme/enunomaduro",
+                    "type": "custom"
+                },
+                {
+                    "url": "https://github.com/nunomaduro",
+                    "type": "github"
+                }
+            ],
+            "time": "2025-04-16T22:59:48+00:00"
+        },
+        {
+            "name": "pestphp/pest-plugin-laravel",
+            "version": "v3.2.0",
+            "source": {
+                "type": "git",
+                "url": "https://github.com/pestphp/pest-plugin-laravel.git",
+                "reference": "6801be82fd92b96e82dd72e563e5674b1ce365fc"
+            },
+            "dist": {
+                "type": "zip",
+                "url": "https://api.github.com/repos/pestphp/pest-plugin-laravel/zipball/6801be82fd92b96e82dd72e563e5674b1ce365fc",
+                "reference": "6801be82fd92b96e82dd72e563e5674b1ce365fc",
+                "shasum": ""
+            },
+            "require": {
+                "laravel/framework": "^11.39.1|^12.9.2",
+                "pestphp/pest": "^3.8.2",
+                "php": "^8.2.0"
+            },
+            "require-dev": {
+                "laravel/dusk": "^8.2.13|dev-develop",
+                "orchestra/testbench": "^9.9.0|^10.2.1",
+                "pestphp/pest-dev-tools": "^3.4.0"
+            },
+            "type": "library",
+            "extra": {
+                "pest": {
+                    "plugins": [
+                        "Pest\\Laravel\\Plugin"
+                    ]
+                },
+                "laravel": {
+                    "providers": [
+                        "Pest\\Laravel\\PestServiceProvider"
+                    ]
+                }
+            },
+            "autoload": {
+                "files": [
+                    "src/Autoload.php"
+                ],
+                "psr-4": {
+                    "Pest\\Laravel\\": "src/"
+                }
+            },
+            "notification-url": "https://packagist.org/downloads/",
+            "license": [
+                "MIT"
+            ],
+            "description": "The Pest Laravel Plugin",
+            "keywords": [
+                "framework",
+                "laravel",
+                "pest",
+                "php",
+                "test",
+                "testing",
+                "unit"
+            ],
+            "support": {
+                "source": "https://github.com/pestphp/pest-plugin-laravel/tree/v3.2.0"
+            },
+            "funding": [
+                {
+                    "url": "https://www.paypal.com/paypalme/enunomaduro",
+                    "type": "custom"
+                },
+                {
+                    "url": "https://github.com/nunomaduro",
+                    "type": "github"
+                }
+            ],
+            "time": "2025-04-21T07:40:53+00:00"
+        },
+        {
+            "name": "pestphp/pest-plugin-mutate",
+            "version": "v3.0.5",
+            "source": {
+                "type": "git",
+                "url": "https://github.com/pestphp/pest-plugin-mutate.git",
+                "reference": "e10dbdc98c9e2f3890095b4fe2144f63a5717e08"
+            },
+            "dist": {
+                "type": "zip",
+                "url": "https://api.github.com/repos/pestphp/pest-plugin-mutate/zipball/e10dbdc98c9e2f3890095b4fe2144f63a5717e08",
+                "reference": "e10dbdc98c9e2f3890095b4fe2144f63a5717e08",
+                "shasum": ""
+            },
+            "require": {
+                "nikic/php-parser": "^5.2.0",
+                "pestphp/pest-plugin": "^3.0.0",
+                "php": "^8.2",
+                "psr/simple-cache": "^3.0.0"
+            },
+            "require-dev": {
+                "pestphp/pest": "^3.0.8",
+                "pestphp/pest-dev-tools": "^3.0.0",
+                "pestphp/pest-plugin-type-coverage": "^3.0.0"
+            },
+            "type": "library",
+            "autoload": {
+                "psr-4": {
+                    "Pest\\Mutate\\": "src/"
+                }
+            },
+            "notification-url": "https://packagist.org/downloads/",
+            "license": [
+                "MIT"
+            ],
+            "authors": [
+                {
+                    "name": "Sandro Gehri",
+                    "email": "sandrogehri@gmail.com"
+                }
+            ],
+            "description": "Mutates your code to find untested cases",
+            "keywords": [
+                "framework",
+                "mutate",
+                "mutation",
+                "pest",
+                "php",
+                "plugin",
+                "test",
+                "testing",
+                "unit"
+            ],
+            "support": {
+                "source": "https://github.com/pestphp/pest-plugin-mutate/tree/v3.0.5"
+            },
+            "funding": [
+                {
+                    "url": "https://www.paypal.com/paypalme/enunomaduro",
+                    "type": "custom"
+                },
+                {
+                    "url": "https://github.com/gehrisandro",
+                    "type": "github"
+                },
+                {
+                    "url": "https://github.com/nunomaduro",
+                    "type": "github"
+                }
+            ],
+            "time": "2024-09-22T07:54:40+00:00"
+        },
+        {
+            "name": "phar-io/manifest",
+            "version": "2.0.4",
+            "source": {
+                "type": "git",
+                "url": "https://github.com/phar-io/manifest.git",
+                "reference": "54750ef60c58e43759730615a392c31c80e23176"
+            },
+            "dist": {
+                "type": "zip",
+                "url": "https://api.github.com/repos/phar-io/manifest/zipball/54750ef60c58e43759730615a392c31c80e23176",
+                "reference": "54750ef60c58e43759730615a392c31c80e23176",
+                "shasum": ""
+            },
+            "require": {
+                "ext-dom": "*",
+                "ext-libxml": "*",
+                "ext-phar": "*",
+                "ext-xmlwriter": "*",
+                "phar-io/version": "^3.0.1",
+                "php": "^7.2 || ^8.0"
+            },
+            "type": "library",
+            "extra": {
+                "branch-alias": {
+                    "dev-master": "2.0.x-dev"
+                }
+            },
+            "autoload": {
+                "classmap": [
+                    "src/"
+                ]
+            },
+            "notification-url": "https://packagist.org/downloads/",
+            "license": [
+                "BSD-3-Clause"
+            ],
+            "authors": [
+                {
+                    "name": "Arne Blankerts",
+                    "email": "arne@blankerts.de",
+                    "role": "Developer"
+                },
+                {
+                    "name": "Sebastian Heuer",
+                    "email": "sebastian@phpeople.de",
+                    "role": "Developer"
+                },
+                {
+                    "name": "Sebastian Bergmann",
+                    "email": "sebastian@phpunit.de",
+                    "role": "Developer"
+                }
+            ],
+            "description": "Component for reading phar.io manifest information from a PHP Archive (PHAR)",
+            "support": {
+                "issues": "https://github.com/phar-io/manifest/issues",
+                "source": "https://github.com/phar-io/manifest/tree/2.0.4"
+            },
+            "funding": [
+                {
+                    "url": "https://github.com/theseer",
+                    "type": "github"
+                }
+            ],
+            "time": "2024-03-03T12:33:53+00:00"
+        },
+        {
+            "name": "phar-io/version",
+            "version": "3.2.1",
+            "source": {
+                "type": "git",
+                "url": "https://github.com/phar-io/version.git",
+                "reference": "4f7fd7836c6f332bb2933569e566a0d6c4cbed74"
+            },
+            "dist": {
+                "type": "zip",
+                "url": "https://api.github.com/repos/phar-io/version/zipball/4f7fd7836c6f332bb2933569e566a0d6c4cbed74",
+                "reference": "4f7fd7836c6f332bb2933569e566a0d6c4cbed74",
+                "shasum": ""
+            },
+            "require": {
+                "php": "^7.2 || ^8.0"
+            },
+            "type": "library",
+            "autoload": {
+                "classmap": [
+                    "src/"
+                ]
+            },
+            "notification-url": "https://packagist.org/downloads/",
+            "license": [
+                "BSD-3-Clause"
+            ],
+            "authors": [
+                {
+                    "name": "Arne Blankerts",
+                    "email": "arne@blankerts.de",
+                    "role": "Developer"
+                },
+                {
+                    "name": "Sebastian Heuer",
+                    "email": "sebastian@phpeople.de",
+                    "role": "Developer"
+                },
+                {
+                    "name": "Sebastian Bergmann",
+                    "email": "sebastian@phpunit.de",
+                    "role": "Developer"
+                }
+            ],
+            "description": "Library for handling version information and constraints",
+            "support": {
+                "issues": "https://github.com/phar-io/version/issues",
+                "source": "https://github.com/phar-io/version/tree/3.2.1"
             },
             "time": "2022-02-21T01:04:05+00:00"
         },
@@ -11727,6 +12339,228 @@
             },
             "time": "2025-12-28T23:57:40+00:00"
         },
+        {
+            "name": "phpdocumentor/reflection-common",
+            "version": "2.2.0",
+            "source": {
+                "type": "git",
+                "url": "https://github.com/phpDocumentor/ReflectionCommon.git",
+                "reference": "1d01c49d4ed62f25aa84a747ad35d5a16924662b"
+            },
+            "dist": {
+                "type": "zip",
+                "url": "https://api.github.com/repos/phpDocumentor/ReflectionCommon/zipball/1d01c49d4ed62f25aa84a747ad35d5a16924662b",
+                "reference": "1d01c49d4ed62f25aa84a747ad35d5a16924662b",
+                "shasum": ""
+            },
+            "require": {
+                "php": "^7.2 || ^8.0"
+            },
+            "type": "library",
+            "extra": {
+                "branch-alias": {
+                    "dev-2.x": "2.x-dev"
+                }
+            },
+            "autoload": {
+                "psr-4": {
+                    "phpDocumentor\\Reflection\\": "src/"
+                }
+            },
+            "notification-url": "https://packagist.org/downloads/",
+            "license": [
+                "MIT"
+            ],
+            "authors": [
+                {
+                    "name": "Jaap van Otterdijk",
+                    "email": "opensource@ijaap.nl"
+                }
+            ],
+            "description": "Common reflection classes used by phpdocumentor to reflect the code structure",
+            "homepage": "http://www.phpdoc.org",
+            "keywords": [
+                "FQSEN",
+                "phpDocumentor",
+                "phpdoc",
+                "reflection",
+                "static analysis"
+            ],
+            "support": {
+                "issues": "https://github.com/phpDocumentor/ReflectionCommon/issues",
+                "source": "https://github.com/phpDocumentor/ReflectionCommon/tree/2.x"
+            },
+            "time": "2020-06-27T09:03:43+00:00"
+        },
+        {
+            "name": "phpdocumentor/reflection-docblock",
+            "version": "5.6.6",
+            "source": {
+                "type": "git",
+                "url": "https://github.com/phpDocumentor/ReflectionDocBlock.git",
+                "reference": "5cee1d3dfc2d2aa6599834520911d246f656bcb8"
+            },
+            "dist": {
+                "type": "zip",
+                "url": "https://api.github.com/repos/phpDocumentor/ReflectionDocBlock/zipball/5cee1d3dfc2d2aa6599834520911d246f656bcb8",
+                "reference": "5cee1d3dfc2d2aa6599834520911d246f656bcb8",
+                "shasum": ""
+            },
+            "require": {
+                "doctrine/deprecations": "^1.1",
+                "ext-filter": "*",
+                "php": "^7.4 || ^8.0",
+                "phpdocumentor/reflection-common": "^2.2",
+                "phpdocumentor/type-resolver": "^1.7",
+                "phpstan/phpdoc-parser": "^1.7|^2.0",
+                "webmozart/assert": "^1.9.1 || ^2"
+            },
+            "require-dev": {
+                "mockery/mockery": "~1.3.5 || ~1.6.0",
+                "phpstan/extension-installer": "^1.1",
+                "phpstan/phpstan": "^1.8",
+                "phpstan/phpstan-mockery": "^1.1",
+                "phpstan/phpstan-webmozart-assert": "^1.2",
+                "phpunit/phpunit": "^9.5",
+                "psalm/phar": "^5.26"
+            },
+            "type": "library",
+            "extra": {
+                "branch-alias": {
+                    "dev-master": "5.x-dev"
+                }
+            },
+            "autoload": {
+                "psr-4": {
+                    "phpDocumentor\\Reflection\\": "src"
+                }
+            },
+            "notification-url": "https://packagist.org/downloads/",
+            "license": [
+                "MIT"
+            ],
+            "authors": [
+                {
+                    "name": "Mike van Riel",
+                    "email": "me@mikevanriel.com"
+                },
+                {
+                    "name": "Jaap van Otterdijk",
+                    "email": "opensource@ijaap.nl"
+                }
+            ],
+            "description": "With this component, a library can provide support for annotations via DocBlocks or otherwise retrieve information that is embedded in a DocBlock.",
+            "support": {
+                "issues": "https://github.com/phpDocumentor/ReflectionDocBlock/issues",
+                "source": "https://github.com/phpDocumentor/ReflectionDocBlock/tree/5.6.6"
+            },
+            "time": "2025-12-22T21:13:58+00:00"
+        },
+        {
+            "name": "phpdocumentor/type-resolver",
+            "version": "1.12.0",
+            "source": {
+                "type": "git",
+                "url": "https://github.com/phpDocumentor/TypeResolver.git",
+                "reference": "92a98ada2b93d9b201a613cb5a33584dde25f195"
+            },
+            "dist": {
+                "type": "zip",
+                "url": "https://api.github.com/repos/phpDocumentor/TypeResolver/zipball/92a98ada2b93d9b201a613cb5a33584dde25f195",
+                "reference": "92a98ada2b93d9b201a613cb5a33584dde25f195",
+                "shasum": ""
+            },
+            "require": {
+                "doctrine/deprecations": "^1.0",
+                "php": "^7.3 || ^8.0",
+                "phpdocumentor/reflection-common": "^2.0",
+                "phpstan/phpdoc-parser": "^1.18|^2.0"
+            },
+            "require-dev": {
+                "ext-tokenizer": "*",
+                "phpbench/phpbench": "^1.2",
+                "phpstan/extension-installer": "^1.1",
+                "phpstan/phpstan": "^1.8",
+                "phpstan/phpstan-phpunit": "^1.1",
+                "phpunit/phpunit": "^9.5",
+                "rector/rector": "^0.13.9",
+                "vimeo/psalm": "^4.25"
+            },
+            "type": "library",
+            "extra": {
+                "branch-alias": {
+                    "dev-1.x": "1.x-dev"
+                }
+            },
+            "autoload": {
+                "psr-4": {
+                    "phpDocumentor\\Reflection\\": "src"
+                }
+            },
+            "notification-url": "https://packagist.org/downloads/",
+            "license": [
+                "MIT"
+            ],
+            "authors": [
+                {
+                    "name": "Mike van Riel",
+                    "email": "me@mikevanriel.com"
+                }
+            ],
+            "description": "A PSR-5 based resolver of Class names, Types and Structural Element Names",
+            "support": {
+                "issues": "https://github.com/phpDocumentor/TypeResolver/issues",
+                "source": "https://github.com/phpDocumentor/TypeResolver/tree/1.12.0"
+            },
+            "time": "2025-11-21T15:09:14+00:00"
+        },
+        {
+            "name": "phpstan/phpdoc-parser",
+            "version": "2.3.2",
+            "source": {
+                "type": "git",
+                "url": "https://github.com/phpstan/phpdoc-parser.git",
+                "reference": "a004701b11273a26cd7955a61d67a7f1e525a45a"
+            },
+            "dist": {
+                "type": "zip",
+                "url": "https://api.github.com/repos/phpstan/phpdoc-parser/zipball/a004701b11273a26cd7955a61d67a7f1e525a45a",
+                "reference": "a004701b11273a26cd7955a61d67a7f1e525a45a",
+                "shasum": ""
+            },
+            "require": {
+                "php": "^7.4 || ^8.0"
+            },
+            "require-dev": {
+                "doctrine/annotations": "^2.0",
+                "nikic/php-parser": "^5.3.0",
+                "php-parallel-lint/php-parallel-lint": "^1.2",
+                "phpstan/extension-installer": "^1.0",
+                "phpstan/phpstan": "^2.0",
+                "phpstan/phpstan-phpunit": "^2.0",
+                "phpstan/phpstan-strict-rules": "^2.0",
+                "phpunit/phpunit": "^9.6",
+                "symfony/process": "^5.2"
+            },
+            "type": "library",
+            "autoload": {
+                "psr-4": {
+                    "PHPStan\\PhpDocParser\\": [
+                        "src/"
+                    ]
+                }
+            },
+            "notification-url": "https://packagist.org/downloads/",
+            "license": [
+                "MIT"
+            ],
+            "description": "PHPDoc parser with support for nullable, intersection and generic types",
+            "support": {
+                "issues": "https://github.com/phpstan/phpdoc-parser/issues",
+                "source": "https://github.com/phpstan/phpdoc-parser/tree/2.3.2"
+            },
+            "time": "2026-01-25T14:56:51+00:00"
+        },
         {
             "name": "phpunit/php-code-coverage",
             "version": "11.0.12",
@@ -11819,28 +12653,28 @@
         },
         {
             "name": "phpunit/php-file-iterator",
-            "version": "5.1.0",
+            "version": "5.1.1",
             "source": {
                 "type": "git",
                 "url": "https://github.com/sebastianbergmann/php-file-iterator.git",
-                "reference": "118cfaaa8bc5aef3287bf315b6060b1174754af6"
+                "reference": "2f3a64888c814fc235386b7387dd5b5ed92ad903"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/sebastianbergmann/php-file-iterator/zipball/118cfaaa8bc5aef3287bf315b6060b1174754af6",
-                "reference": "118cfaaa8bc5aef3287bf315b6060b1174754af6",
+                "url": "https://api.github.com/repos/sebastianbergmann/php-file-iterator/zipball/2f3a64888c814fc235386b7387dd5b5ed92ad903",
+                "reference": "2f3a64888c814fc235386b7387dd5b5ed92ad903",
                 "shasum": ""
             },
             "require": {
                 "php": ">=8.2"
             },
             "require-dev": {
-                "phpunit/phpunit": "^11.0"
+                "phpunit/phpunit": "^11.3"
             },
             "type": "library",
             "extra": {
                 "branch-alias": {
-                    "dev-main": "5.0-dev"
+                    "dev-main": "5.1-dev"
                 }
             },
             "autoload": {
@@ -11868,15 +12702,27 @@
             "support": {
                 "issues": "https://github.com/sebastianbergmann/php-file-iterator/issues",
                 "security": "https://github.com/sebastianbergmann/php-file-iterator/security/policy",
-                "source": "https://github.com/sebastianbergmann/php-file-iterator/tree/5.1.0"
+                "source": "https://github.com/sebastianbergmann/php-file-iterator/tree/5.1.1"
             },
             "funding": [
                 {
                     "url": "https://github.com/sebastianbergmann",
                     "type": "github"
+                },
+                {
+                    "url": "https://liberapay.com/sebastianbergmann",
+                    "type": "liberapay"
+                },
+                {
+                    "url": "https://thanks.dev/u/gh/sebastianbergmann",
+                    "type": "thanks_dev"
+                },
+                {
+                    "url": "https://tidelift.com/funding/github/packagist/phpunit/php-file-iterator",
+                    "type": "tidelift"
                 }
             ],
-            "time": "2024-08-27T05:02:59+00:00"
+            "time": "2026-02-02T13:52:54+00:00"
         },
         {
             "name": "phpunit/php-invoker",
@@ -12064,16 +12910,16 @@
         },
         {
             "name": "phpunit/phpunit",
-            "version": "11.5.46",
+            "version": "11.5.50",
             "source": {
                 "type": "git",
                 "url": "https://github.com/sebastianbergmann/phpunit.git",
-                "reference": "75dfe79a2aa30085b7132bb84377c24062193f33"
+                "reference": "fdfc727f0fcacfeb8fcb30c7e5da173125b58be3"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/sebastianbergmann/phpunit/zipball/75dfe79a2aa30085b7132bb84377c24062193f33",
-                "reference": "75dfe79a2aa30085b7132bb84377c24062193f33",
+                "url": "https://api.github.com/repos/sebastianbergmann/phpunit/zipball/fdfc727f0fcacfeb8fcb30c7e5da173125b58be3",
+                "reference": "fdfc727f0fcacfeb8fcb30c7e5da173125b58be3",
                 "shasum": ""
             },
             "require": {
@@ -12087,14 +12933,14 @@
                 "phar-io/manifest": "^2.0.4",
                 "phar-io/version": "^3.2.1",
                 "php": ">=8.2",
-                "phpunit/php-code-coverage": "^11.0.11",
+                "phpunit/php-code-coverage": "^11.0.12",
                 "phpunit/php-file-iterator": "^5.1.0",
                 "phpunit/php-invoker": "^5.0.1",
                 "phpunit/php-text-template": "^4.0.1",
                 "phpunit/php-timer": "^7.0.1",
                 "sebastian/cli-parser": "^3.0.2",
                 "sebastian/code-unit": "^3.0.3",
-                "sebastian/comparator": "^6.3.2",
+                "sebastian/comparator": "^6.3.3",
                 "sebastian/diff": "^6.0.2",
                 "sebastian/environment": "^7.2.1",
                 "sebastian/exporter": "^6.3.2",
@@ -12145,7 +12991,7 @@
             "support": {
                 "issues": "https://github.com/sebastianbergmann/phpunit/issues",
                 "security": "https://github.com/sebastianbergmann/phpunit/security/policy",
-                "source": "https://github.com/sebastianbergmann/phpunit/tree/11.5.46"
+                "source": "https://github.com/sebastianbergmann/phpunit/tree/11.5.50"
             },
             "funding": [
                 {
@@ -12169,7 +13015,7 @@
                     "type": "tidelift"
                 }
             ],
-            "time": "2025-12-06T08:01:15+00:00"
+            "time": "2026-01-27T05:59:18+00:00"
         },
         {
             "name": "sebastian/cli-parser",
@@ -12343,16 +13189,16 @@
         },
         {
             "name": "sebastian/comparator",
-            "version": "6.3.2",
+            "version": "6.3.3",
             "source": {
                 "type": "git",
                 "url": "https://github.com/sebastianbergmann/comparator.git",
-                "reference": "85c77556683e6eee4323e4c5468641ca0237e2e8"
+                "reference": "2c95e1e86cb8dd41beb8d502057d1081ccc8eca9"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/sebastianbergmann/comparator/zipball/85c77556683e6eee4323e4c5468641ca0237e2e8",
-                "reference": "85c77556683e6eee4323e4c5468641ca0237e2e8",
+                "url": "https://api.github.com/repos/sebastianbergmann/comparator/zipball/2c95e1e86cb8dd41beb8d502057d1081ccc8eca9",
+                "reference": "2c95e1e86cb8dd41beb8d502057d1081ccc8eca9",
                 "shasum": ""
             },
             "require": {
@@ -12411,7 +13257,7 @@
             "support": {
                 "issues": "https://github.com/sebastianbergmann/comparator/issues",
                 "security": "https://github.com/sebastianbergmann/comparator/security/policy",
-                "source": "https://github.com/sebastianbergmann/comparator/tree/6.3.2"
+                "source": "https://github.com/sebastianbergmann/comparator/tree/6.3.3"
             },
             "funding": [
                 {
@@ -12431,7 +13277,7 @@
                     "type": "tidelift"
                 }
             ],
-            "time": "2025-08-10T08:07:46+00:00"
+            "time": "2026-01-24T09:26:40+00:00"
         },
         {
             "name": "sebastian/complexity",
@@ -13285,6 +14131,65 @@
             ],
             "time": "2025-12-04T18:11:45+00:00"
         },
+        {
+            "name": "ta-tikoma/phpunit-architecture-test",
+            "version": "0.8.6",
+            "source": {
+                "type": "git",
+                "url": "https://github.com/ta-tikoma/phpunit-architecture-test.git",
+                "reference": "ad48430b92901fd7d003fdaf2d7b139f96c0906e"
+            },
+            "dist": {
+                "type": "zip",
+                "url": "https://api.github.com/repos/ta-tikoma/phpunit-architecture-test/zipball/ad48430b92901fd7d003fdaf2d7b139f96c0906e",
+                "reference": "ad48430b92901fd7d003fdaf2d7b139f96c0906e",
+                "shasum": ""
+            },
+            "require": {
+                "nikic/php-parser": "^4.18.0 || ^5.0.0",
+                "php": "^8.1.0",
+                "phpdocumentor/reflection-docblock": "^5.3.0 || ^6.0.0",
+                "phpunit/phpunit": "^10.5.5 || ^11.0.0 || ^12.0.0",
+                "symfony/finder": "^6.4.0 || ^7.0.0 || ^8.0.0"
+            },
+            "require-dev": {
+                "laravel/pint": "^1.13.7",
+                "phpstan/phpstan": "^1.10.52"
+            },
+            "type": "library",
+            "autoload": {
+                "psr-4": {
+                    "PHPUnit\\Architecture\\": "src/"
+                }
+            },
+            "notification-url": "https://packagist.org/downloads/",
+            "license": [
+                "MIT"
+            ],
+            "authors": [
+                {
+                    "name": "Ni Shi",
+                    "email": "futik0ma011@gmail.com"
+                },
+                {
+                    "name": "Nuno Maduro",
+                    "email": "enunomaduro@gmail.com"
+                }
+            ],
+            "description": "Methods for testing application architecture",
+            "keywords": [
+                "architecture",
+                "phpunit",
+                "stucture",
+                "test",
+                "testing"
+            ],
+            "support": {
+                "issues": "https://github.com/ta-tikoma/phpunit-architecture-test/issues",
+                "source": "https://github.com/ta-tikoma/phpunit-architecture-test/tree/0.8.6"
+            },
+            "time": "2026-01-30T07:16:00+00:00"
+        },
         {
             "name": "theseer/tokenizer",
             "version": "1.3.1",
@@ -13334,6 +14239,68 @@
                 }
             ],
             "time": "2025-11-17T20:03:58+00:00"
+        },
+        {
+            "name": "webmozart/assert",
+            "version": "2.1.2",
+            "source": {
+                "type": "git",
+                "url": "https://github.com/webmozarts/assert.git",
+                "reference": "ce6a2f100c404b2d32a1dd1270f9b59ad4f57649"
+            },
+            "dist": {
+                "type": "zip",
+                "url": "https://api.github.com/repos/webmozarts/assert/zipball/ce6a2f100c404b2d32a1dd1270f9b59ad4f57649",
+                "reference": "ce6a2f100c404b2d32a1dd1270f9b59ad4f57649",
+                "shasum": ""
+            },
+            "require": {
+                "ext-ctype": "*",
+                "ext-date": "*",
+                "ext-filter": "*",
+                "php": "^8.2"
+            },
+            "suggest": {
+                "ext-intl": "",
+                "ext-simplexml": "",
+                "ext-spl": ""
+            },
+            "type": "library",
+            "extra": {
+                "branch-alias": {
+                    "dev-feature/2-0": "2.0-dev"
+                }
+            },
+            "autoload": {
+                "psr-4": {
+                    "Webmozart\\Assert\\": "src/"
+                }
+            },
+            "notification-url": "https://packagist.org/downloads/",
+            "license": [
+                "MIT"
+            ],
+            "authors": [
+                {
+                    "name": "Bernhard Schussek",
+                    "email": "bschussek@gmail.com"
+                },
+                {
+                    "name": "Woody Gilk",
+                    "email": "woody.gilk@gmail.com"
+                }
+            ],
+            "description": "Assertions to validate method input/output with nice error messages.",
+            "keywords": [
+                "assert",
+                "check",
+                "validate"
+            ],
+            "support": {
+                "issues": "https://github.com/webmozarts/assert/issues",
+                "source": "https://github.com/webmozarts/assert/tree/2.1.2"
+            },
+            "time": "2026-01-13T14:02:24+00:00"
         }
     ],
     "aliases": [],
diff --git a/database/seeders/CompleteTestDataSeeder.php b/database/seeders/CompleteTestDataSeeder.php
index 7be65bb..af844c1 100755
--- a/database/seeders/CompleteTestDataSeeder.php
+++ b/database/seeders/CompleteTestDataSeeder.php
@@ -2,990 +2,27 @@
 
 namespace Database\Seeders;
 
-use App\Models\Agenda;
 use App\Models\Cadastro;
-use App\Models\Categoria;
-use App\Models\Equipamento;
-use App\Models\Estoque;
-use App\Models\Financeiro;
-use App\Models\Garantia;
-use App\Models\ListaDesejo;
-use App\Models\NotaFiscal;
-use App\Models\Orcamento;
-use App\Models\OrcamentoItem;
-use App\Models\OrdemServico;
-use App\Models\OrdemServicoItem;
-use App\Models\Produto;
-use App\Models\TabelaPreco;
-use App\Models\Tarefa;
-// use App\Models\TransacaoFinanceira; // Removido - sistema legacy
 use App\Models\User;
 use Illuminate\Database\Seeder;
-use Illuminate\Support\Facades\DB;
-use Illuminate\Support\Facades\Hash;
 
 class CompleteTestDataSeeder extends Seeder
 {
-    /**
-     * Seeder completo para popular todas as tabelas com dados realistas
-     */
     public function run(): void
     {
-        $this->command->info('üöÄ Iniciando popula√ß√£o completa de dados de teste...');
+        // 0. Cria Tipos/Categorias (necess√°rio para cores e badges)
+        $this->call(CadastroTipoSeeder::class);
 
-        // Verificar se estamos em ambiente seguro
-        if (! app()->environment(['local', 'testing'])) {
-            $this->command->error('‚ùå Este seeder s√≥ pode ser executado em ambiente local ou de teste!');
+        // 1. Cria Parceiros (Lojas e Arquitetos)
+        $lojas = Cadastro::factory()->count(5)->loja()->create();
+        $arquitetos = Cadastro::factory()->count(10)->arquiteto()->create();
 
-            return;
-        }
+        $this->command->info('üè™ Lojas e Arquitetos criados.');
 
-        DB::beginTransaction();
+        // 2. Cria Clientes Finais (vinculados a nada por enquanto)
+        Cadastro::factory()->count(50)->create();
 
-        try {
-            // 1. Limpar dados existentes
-            $this->clearExistingData();
+        $this->command->info('üë• 50 Clientes criados.');
 
-            // 2. Criar usu√°rios do sistema
-            $usuarios = $this->createUsuarios();
-
-            // 3. Criar categorias
-            $categorias = $this->createCategorias();
-
-            // 4. Criar cadastros (clientes, parceiros, etc.)
-            $cadastros = $this->createCadastros();
-
-            // 5. Criar produtos e tabelas de pre√ßo
-            $produtos = $this->createProdutos();
-            $this->createTabelasPreco($produtos);
-
-            // 6. Criar equipamentos
-            $equipamentos = $this->createEquipamentos();
-
-            // 7. Criar estoques
-            $this->createEstoques($produtos);
-
-            // 8. Criar lista de desejos
-            $this->createListaDesejos($produtos, $cadastros);
-
-            // 9. Criar or√ßamentos
-            $orcamentos = $this->createOrcamentos($cadastros, $produtos);
-
-            // 10. Criar ordens de servi√ßo
-            $ordensServico = $this->createOrdensServico($cadastros, $orcamentos, $produtos);
-
-            // 11. Criar agendamentos
-            $this->createAgendamentos($cadastros, $ordensServico);
-
-            // 12. Criar movimenta√ß√µes financeiras
-            $this->createFinanceiros($categorias, $cadastros, $orcamentos, $ordensServico);
-
-            // 13. Criar garantias
-            $this->createGarantias($cadastros, $produtos, $ordensServico);
-
-            // 14. Criar notas fiscais
-            $this->createNotasFiscais($orcamentos, $cadastros);
-
-            // 16. Criar tarefas
-            $this->createTarefas($usuarios, $cadastros, $ordensServico);
-
-            DB::commit();
-            $this->command->info('‚úÖ Dados de teste criados com sucesso!');
-            $this->showStatistics();
-
-        } catch (\Exception $e) {
-            DB::rollback();
-            $this->command->error('‚ùå Erro ao criar dados: '.$e->getMessage());
-            throw $e;
-        }
-    }
-
-    private function clearExistingData(): void
-    {
-        $this->command->warn('‚ö†Ô∏è Limpando dados existentes...');
-
-        // Ordem importante para evitar viola√ß√£o de foreign keys
-        NotaFiscal::truncate();
-        Garantia::truncate();
-        Tarefa::truncate();
-        // TransacaoFinanceira::truncate(); // Removido - sistema legacy
-        Financeiro::truncate();
-        Agenda::truncate();
-        OrdemServicoItem::truncate();
-        OrdemServico::truncate();
-        OrcamentoItem::truncate();
-        Orcamento::truncate();
-        ListaDesejo::truncate();
-        Estoque::truncate();
-        TabelaPreco::truncate();
-        Produto::truncate();
-        Equipamento::truncate();
-        Cadastro::truncate();
-        Categoria::where('nome', '!=', 'Padr√£o')->delete();
-
-        // Manter pelo menos 1 usu√°rio admin
-        User::where('email', '!=', 'admin@stofgard.com')->delete();
-    }
-
-    private function createUsuarios(): array
-    {
-        $this->command->info('üë§ Criando usu√°rios...');
-
-        $usuarios = [];
-
-        // Admin principal
-        $usuarios[] = User::firstOrCreate([
-            'email' => 'admin@stofgard.com',
-        ], [
-            'name' => 'Administrador',
-            'password' => Hash::make('admin123'),
-            'is_admin' => true,
-        ]);
-
-        // Vendedores
-        for ($i = 1; $i <= 5; $i++) {
-            $usuarios[] = User::create([
-                'name' => fake('pt_BR')->name,
-                'email' => fake('pt_BR')->unique()->safeEmail,
-                'password' => Hash::make('password123'),
-                'is_admin' => false,
-            ]);
-        }
-
-        return $usuarios;
-    }
-
-    private function createCategorias(): array
-    {
-        $this->command->info('üìÅ Criando categorias...');
-
-        $categorias = [];
-        $categoriasData = [
-            // Receitas
-            ['nome' => 'Vendas de Produtos', 'tipo' => 'receita', 'cor' => '#10B981'],
-            ['nome' => 'Servi√ßos de Instala√ß√£o', 'tipo' => 'receita', 'cor' => '#3B82F6'],
-            ['nome' => 'Servi√ßos de Medi√ß√£o', 'tipo' => 'receita', 'cor' => '#6366F1'],
-            ['nome' => 'Comiss√µes de Vendas', 'tipo' => 'receita', 'cor' => '#8B5CF6'],
-            ['nome' => 'Receitas Diversas', 'tipo' => 'receita', 'cor' => '#06B6D4'],
-
-            // Despesas
-            ['nome' => 'Compra de Materiais', 'tipo' => 'despesa', 'cor' => '#EF4444'],
-            ['nome' => 'Sal√°rios e Encargos', 'tipo' => 'despesa', 'cor' => '#F59E0B'],
-            ['nome' => 'Impostos e Taxas', 'tipo' => 'despesa', 'cor' => '#6B7280'],
-            ['nome' => 'Marketing e Publicidade', 'tipo' => 'despesa', 'cor' => '#EC4899'],
-            ['nome' => 'Combust√≠vel e Transporte', 'tipo' => 'despesa', 'cor' => '#F97316'],
-            ['nome' => 'Manuten√ß√£o de Equipamentos', 'tipo' => 'despesa', 'cor' => '#84CC16'],
-            ['nome' => 'Aluguel e Utilidades', 'tipo' => 'despesa', 'cor' => '#A855F7'],
-            ['nome' => 'Despesas Administrativas', 'tipo' => 'despesa', 'cor' => '#64748B'],
-        ];
-
-        foreach ($categoriasData as $categoria) {
-            $categorias[] = Categoria::create($categoria);
-        }
-
-        return $categorias;
-    }
-
-    private function createCadastros(): array
-    {
-        $this->command->info('üë• Criando cadastros...');
-
-        $cadastros = [];
-
-        // Clientes Pessoa F√≠sica
-        for ($i = 1; $i <= 25; $i++) {
-            $cadastros[] = Cadastro::create([
-                'nome' => fake('pt_BR')->name,
-                'tipo' => 'cliente',
-                'documento' => fake('pt_BR')->cpf(false),
-                'email' => fake('pt_BR')->unique()->safeEmail,
-                'telefone' => fake('pt_BR')->cellphone(false),
-                'cep' => fake('pt_BR')->postcode,
-                'logradouro' => fake('pt_BR')->streetName,
-                'numero' => fake('pt_BR')->buildingNumber,
-                'bairro' => fake('pt_BR')->cityDistrict,
-                'cidade' => fake('pt_BR')->city,
-                'estado' => fake('pt_BR')->stateAbbr,
-                'observacoes' => fake('pt_BR')->optional(0.3)->sentence,
-                'pdf_mostrar_documentos' => fake()->boolean(80),
-            ]);
-        }
-
-        // Clientes Pessoa Jur√≠dica
-        for ($i = 1; $i <= 15; $i++) {
-            $cadastros[] = Cadastro::create([
-                'nome' => fake('pt_BR')->company,
-                'tipo' => 'cliente',
-                'documento' => fake('pt_BR')->cnpj(false),
-                'razao_social' => fake('pt_BR')->company.' Ltda',
-                'email' => fake('pt_BR')->unique()->companyEmail,
-                'telefone' => fake('pt_BR')->phoneNumber,
-                'cep' => fake('pt_BR')->postcode,
-                'logradouro' => fake('pt_BR')->streetName,
-                'numero' => fake('pt_BR')->buildingNumber,
-                'bairro' => fake('pt_BR')->cityDistrict,
-                'cidade' => fake('pt_BR')->city,
-                'estado' => fake('pt_BR')->stateAbbr,
-                'observacoes' => fake('pt_BR')->optional(0.3)->sentence,
-                'pdf_mostrar_documentos' => fake()->boolean(90),
-            ]);
-        }
-
-        // Parceiros - Lojas
-        for ($i = 1; $i <= 8; $i++) {
-            $cadastros[] = Cadastro::create([
-                'nome' => 'Loja '.fake('pt_BR')->company,
-                'tipo' => 'loja',
-                'documento' => fake('pt_BR')->cnpj(false),
-                'email' => fake('pt_BR')->unique()->companyEmail,
-                'telefone' => fake('pt_BR')->phoneNumber,
-                'cep' => fake('pt_BR')->postcode,
-                'logradouro' => fake('pt_BR')->streetName,
-                'numero' => fake('pt_BR')->buildingNumber,
-                'bairro' => fake('pt_BR')->cityDistrict,
-                'cidade' => fake('pt_BR')->city,
-                'estado' => fake('pt_BR')->stateAbbr,
-                'comissao_percentual' => fake()->randomFloat(2, 5, 15),
-            ]);
-        }
-
-        // Parceiros - Vendedores
-        for ($i = 1; $i <= 12; $i++) {
-            $cadastros[] = Cadastro::create([
-                'nome' => fake('pt_BR')->name,
-                'tipo' => 'vendedor',
-                'documento' => fake('pt_BR')->cpf(false),
-                'email' => fake('pt_BR')->unique()->safeEmail,
-                'telefone' => fake('pt_BR')->cellphone(false),
-                'cep' => fake('pt_BR')->postcode,
-                'logradouro' => fake('pt_BR')->streetName,
-                'numero' => fake('pt_BR')->buildingNumber,
-                'bairro' => fake('pt_BR')->cityDistrict,
-                'cidade' => fake('pt_BR')->city,
-                'estado' => fake('pt_BR')->stateAbbr,
-                'comissao_percentual' => fake()->randomFloat(2, 3, 10),
-            ]);
-        }
-
-        // Parceiros - Arquitetos
-        for ($i = 1; $i <= 10; $i++) {
-            $cadastros[] = Cadastro::create([
-                'nome' => 'Arq. '.fake('pt_BR')->name,
-                'tipo' => 'arquiteto',
-                'documento' => fake('pt_BR')->cpf(false),
-                'email' => fake('pt_BR')->unique()->safeEmail,
-                'telefone' => fake('pt_BR')->cellphone(false),
-                'cep' => fake('pt_BR')->postcode,
-                'logradouro' => fake('pt_BR')->streetName,
-                'numero' => fake('pt_BR')->buildingNumber,
-                'bairro' => fake('pt_BR')->cityDistrict,
-                'cidade' => fake('pt_BR')->city,
-                'estado' => fake('pt_BR')->stateAbbr,
-                'comissao_percentual' => fake()->randomFloat(2, 5, 12),
-                'especialidade' => fake()->randomElement(['Residencial', 'Comercial', 'Industrial', 'Paisagismo']),
-            ]);
-        }
-
-        return $cadastros;
-    }
-
-    private function createProdutos(): array
-    {
-        $this->command->info('üì¶ Criando produtos...');
-
-        $produtos = [];
-
-        $categoriasProdutos = [
-            'Granitos' => [
-                'Granito Branco Cear√°',
-                'Granito Preto S√£o Gabriel',
-                'Granito Verde Ubatuba',
-                'Granito Amarelo Ornamental',
-                'Granito Cinza Corumb√°',
-                'Granito Azul Bahia',
-                'Granito Rosa Salto',
-                'Granito Branco Dallas',
-            ],
-            'M√°rmores' => [
-                'M√°rmore Branco Carrara',
-                'M√°rmore Travertino Romano',
-                'M√°rmore Crema Marfil',
-                'M√°rmore Nero Marquina',
-                'M√°rmore Calacatta',
-                'M√°rmore Statu√°rio',
-                'M√°rmore Branco Pighes',
-            ],
-            'Quartzo' => [
-                'Quartzo Branco Absoluto',
-                'Quartzo Cinza Platinum',
-                'Quartzo Preto Stellar',
-                'Quartzo Calacatta Nuvo',
-                'Quartzo Carrara Mist',
-                'Quartzo Desert Silver',
-            ],
-            'Servi√ßos' => [
-                'Medi√ß√£o e Or√ßamento',
-                'Corte e Fura√ß√£o',
-                'Instala√ß√£o Completa',
-                'Acabamento e Polimento',
-                'Entrega e Transporte',
-                'Manuten√ß√£o Preventiva',
-            ],
-        ];
-
-        foreach ($categoriasProdutos as $categoria => $items) {
-            foreach ($items as $item) {
-                $precoBase = match ($categoria) {
-                    'Granitos' => fake()->randomFloat(2, 150, 400),
-                    'M√°rmores' => fake()->randomFloat(2, 200, 600),
-                    'Quartzo' => fake()->randomFloat(2, 300, 800),
-                    'Servi√ßos' => fake()->randomFloat(2, 50, 200),
-                    default => fake()->randomFloat(2, 100, 300),
-                };
-
-                $produtos[] = Produto::create([
-                    'nome' => $item,
-                    'categoria' => $categoria,
-                    'preco' => $precoBase,
-                    'unidade' => $categoria === 'Servi√ßos' ? 'serv' : 'm¬≤',
-                    'ativo' => fake()->boolean(95),
-                    'descricao' => fake('pt_BR')->optional(0.7)->sentence,
-                ]);
-            }
-        }
-
-        return $produtos;
-    }
-
-    private function createTabelasPreco(array $produtos): void
-    {
-        $this->command->info('üí∞ Criando tabelas de pre√ßo...');
-
-        foreach ($produtos as $produto) {
-            // Pre√ßo padr√£o
-            TabelaPreco::create([
-                'produto_id' => $produto->id,
-                'nome_tabela' => 'Padr√£o',
-                'preco' => $produto->preco,
-                'descricao_garantia' => fake('pt_BR')->optional(0.5)->sentence,
-            ]);
-
-            // Pre√ßo promocional (30% dos produtos)
-            if (fake()->boolean(30)) {
-                TabelaPreco::create([
-                    'produto_id' => $produto->id,
-                    'nome_tabela' => 'Promocional',
-                    'preco' => $produto->preco * 0.85, // 15% de desconto
-                    'descricao_garantia' => 'Pre√ßo promocional v√°lido at√© '.fake()->dateTimeBetween('now', '+3 months')->format('d/m/Y'),
-                ]);
-            }
-
-            // Pre√ßo para parceiros (50% dos produtos)
-            if (fake()->boolean(50)) {
-                TabelaPreco::create([
-                    'produto_id' => $produto->id,
-                    'nome_tabela' => 'Parceiros',
-                    'preco' => $produto->preco * 0.75, // 25% de desconto
-                    'descricao_garantia' => 'Pre√ßo especial para parceiros cadastrados',
-                ]);
-            }
-        }
-    }
-
-    private function createEquipamentos(): array
-    {
-        $this->command->info('üîß Criando equipamentos...');
-
-        $equipamentos = [];
-
-        $equipamentosData = [
-            ['nome' => 'Serra Ponte Autom√°tica', 'modelo' => 'SP-3200A', 'fabricante' => 'Marmotech'],
-            ['nome' => 'Politriz Industrial', 'modelo' => 'PI-1800', 'fabricante' => 'StoneMax'],
-            ['nome' => 'Furadeira Diamantada', 'modelo' => 'FD-50', 'fabricante' => 'DiamondTech'],
-            ['nome' => 'Bancada de Corte', 'modelo' => 'BC-2000', 'fabricante' => 'Granitos Pro'],
-            ['nome' => 'Guindaste M√≥vel', 'modelo' => 'GM-500', 'fabricante' => 'LiftStone'],
-            ['nome' => 'Compressor de Ar', 'modelo' => 'CA-100', 'fabricante' => 'AirTech'],
-        ];
-
-        foreach ($equipamentosData as $eq) {
-            $equipamentos[] = Equipamento::create([
-                'nome' => $eq['nome'],
-                'modelo' => $eq['modelo'],
-                'fabricante' => $eq['fabricante'],
-                'numero_serie' => fake()->bothify('####-????-###'),
-                'data_aquisicao' => fake()->dateTimeBetween('-5 years', '-1 year'),
-                'valor_aquisicao' => fake()->randomFloat(2, 5000, 50000),
-                'status' => fake()->randomElement(['ativo', 'manutencao', 'inativo']),
-                'observacoes' => fake('pt_BR')->optional(0.4)->sentence,
-            ]);
-        }
-
-        return $equipamentos;
-    }
-
-    private function createEstoques(array $produtos): void
-    {
-        $this->command->info('üìä Criando estoques...');
-
-        $produtosFisicos = array_filter($produtos, fn ($p) => $p->categoria !== 'Servi√ßos');
-
-        foreach ($produtosFisicos as $produto) {
-            if (fake()->boolean(80)) { // 80% dos produtos t√™m estoque
-                Estoque::create([
-                    'produto_id' => $produto->id,
-                    'quantidade' => fake()->randomFloat(2, 0, 100),
-                    'quantidade_minima' => fake()->randomFloat(2, 5, 20),
-                    'localizacao' => fake()->randomElement(['Galp√£o A', 'Galp√£o B', '√Årea Externa', 'Showroom']),
-                ]);
-            }
-        }
-    }
-
-    private function createListaDesejos(array $produtos, array $cadastros): void
-    {
-        $this->command->info('üí≠ Criando lista de desejos...');
-
-        $clientes = array_filter($cadastros, fn ($c) => $c->tipo === 'cliente');
-
-        for ($i = 1; $i <= 30; $i++) {
-            $cliente = fake()->randomElement($clientes);
-            $produto = fake()->randomElement($produtos);
-
-            ListaDesejo::create([
-                'cadastro_id' => $cliente->id,
-                'produto_id' => $produto->id,
-                'quantidade' => fake()->randomFloat(2, 1, 20),
-                'prioridade' => fake()->randomElement(['baixa', 'media', 'alta']),
-                'observacoes' => fake('pt_BR')->optional(0.6)->sentence,
-                'data_prevista_compra' => fake()->optional(0.7)->dateTimeBetween('now', '+6 months'),
-            ]);
-        }
-    }
-
-    private function createOrcamentos(array $cadastros, array $produtos): array
-    {
-        $this->command->info('üí∞ Criando or√ßamentos...');
-
-        $orcamentos = [];
-        $clientes = array_filter($cadastros, fn ($c) => $c->tipo === 'cliente');
-        $vendedores = array_filter($cadastros, fn ($c) => $c->tipo === 'vendedor');
-        $arquitetos = array_filter($cadastros, fn ($c) => $c->tipo === 'arquiteto');
-
-        for ($i = 1; $i <= 50; $i++) {
-            $cliente = fake()->randomElement($clientes);
-            $vendedor = fake()->optional(0.7)->randomElement($vendedores);
-            $arquiteto = fake()->optional(0.3)->randomElement($arquitetos);
-
-            $dataOrcamento = fake()->dateTimeBetween('-6 months', 'now');
-
-            $orcamento = Orcamento::create([
-                'numero' => 'ORC-'.str_pad($i, 4, '0', STR_PAD_LEFT),
-                'cadastro_id' => $cliente->id,
-                'vendedor_id' => $vendedor?->id,
-                'arquiteto_id' => $arquiteto?->id,
-                'data_orcamento' => $dataOrcamento,
-                'data_validade' => fake()->dateTimeBetween($dataOrcamento, '+3 months'),
-                'status' => fake()->randomElement(['rascunho', 'enviado', 'aprovado', 'rejeitado', 'expirado']),
-                'desconto_geral' => fake()->optional(0.3)->randomFloat(2, 0, 15),
-                'observacoes' => fake('pt_BR')->optional(0.5)->sentence,
-                'pdf_mostrar_fotos' => fake()->boolean(60),
-            ]);
-
-            // Adicionar itens ao or√ßamento
-            $this->createOrcamentoItens($orcamento, $produtos);
-
-            $orcamentos[] = $orcamento;
-        }
-
-        return $orcamentos;
-    }
-
-    private function createOrcamentoItens(Orcamento $orcamento, array $produtos): void
-    {
-        $numItens = fake()->numberBetween(1, 8);
-        $valorTotal = 0;
-
-        for ($j = 1; $j <= $numItens; $j++) {
-            $produto = fake()->randomElement($produtos);
-            $quantidade = fake()->randomFloat(2, 1, 25);
-            $valorUnitario = $produto->preco * fake()->randomFloat(2, 0.8, 1.3);
-            $desconto = fake()->optional(0.3)->randomFloat(2, 0, 10);
-            $valorItem = ($quantidade * $valorUnitario) * (1 - ($desconto / 100));
-            $valorTotal += $valorItem;
-
-            OrcamentoItem::create([
-                'orcamento_id' => $orcamento->id,
-                'produto_id' => $produto->id,
-                'descricao' => $produto->nome,
-                'quantidade' => $quantidade,
-                'valor_unitario' => $valorUnitario,
-                'desconto_percentual' => $desconto ?? 0,
-                'valor_total' => $valorItem,
-                'observacoes' => fake('pt_BR')->optional(0.3)->sentence,
-            ]);
-        }
-
-        $orcamento->update(['valor_total' => $valorTotal]);
-    }
-
-    private function createOrdensServico(array $cadastros, array $orcamentos, array $produtos): array
-    {
-        $this->command->info('üîß Criando ordens de servi√ßo...');
-
-        $ordensServico = [];
-        $orcamentosAprovados = array_filter($orcamentos, fn ($o) => $o->status === 'aprovado');
-
-        // Para cada or√ßamento aprovado, criar uma OS
-        foreach ($orcamentosAprovados as $orcamento) {
-            $dataAbertura = fake()->dateTimeBetween($orcamento->data_orcamento, 'now');
-
-            $os = OrdemServico::create([
-                'numero' => 'OS-'.str_pad(count($ordensServico) + 1, 4, '0', STR_PAD_LEFT),
-                'cadastro_id' => $orcamento->cadastro_id,
-                'orcamento_id' => $orcamento->id,
-                'data_abertura' => $dataAbertura,
-                'data_prevista' => fake()->dateTimeBetween($dataAbertura, '+2 months'),
-                'data_conclusao' => fake()->optional(0.4)->dateTimeBetween($dataAbertura, 'now'),
-                'status' => fake()->randomElement(['aberta', 'em_andamento', 'pausada', 'concluida', 'cancelada']),
-                'prioridade' => fake()->randomElement(['baixa', 'normal', 'alta', 'urgente']),
-                'valor_total' => $orcamento->valor_total,
-                'descricao' => fake('pt_BR')->sentence,
-                'observacoes' => fake('pt_BR')->optional(0.6)->sentence,
-            ]);
-
-            // Criar itens da OS baseados nos itens do or√ßamento
-            $this->createOrdemServicoItens($os, $orcamento);
-
-            $ordensServico[] = $os;
-        }
-
-        // Criar algumas OSs independentes (sem or√ßamento)
-        $clientes = array_filter($cadastros, fn ($c) => $c->tipo === 'cliente');
-        for ($i = 1; $i <= 15; $i++) {
-            $cliente = fake()->randomElement($clientes);
-            $dataAbertura = fake()->dateTimeBetween('-3 months', 'now');
-
-            $os = OrdemServico::create([
-                'numero' => 'OS-'.str_pad(count($ordensServico) + 1, 4, '0', STR_PAD_LEFT),
-                'cadastro_id' => $cliente->id,
-                'data_abertura' => $dataAbertura,
-                'data_prevista' => fake()->dateTimeBetween($dataAbertura, '+1 month'),
-                'data_conclusao' => fake()->optional(0.6)->dateTimeBetween($dataAbertura, 'now'),
-                'status' => fake()->randomElement(['aberta', 'em_andamento', 'concluida']),
-                'prioridade' => fake()->randomElement(['normal', 'alta']),
-                'valor_total' => fake()->randomFloat(2, 500, 5000),
-                'descricao' => fake('pt_BR')->sentence,
-                'observacoes' => fake('pt_BR')->optional(0.6)->sentence,
-            ]);
-
-            // Criar itens simples para OS independente
-            $this->createOrdemServicoItensSimples($os, $produtos);
-
-            $ordensServico[] = $os;
-        }
-
-        return $ordensServico;
-    }
-
-    private function createOrdemServicoItens(OrdemServico $os, Orcamento $orcamento): void
-    {
-        foreach ($orcamento->itens as $item) {
-            OrdemServicoItem::create([
-                'ordem_servico_id' => $os->id,
-                'produto_id' => $item->produto_id,
-                'descricao' => $item->descricao,
-                'quantidade' => $item->quantidade,
-                'valor_unitario' => $item->valor_unitario,
-                'valor_total' => $item->valor_total,
-                'status' => fake()->randomElement(['pendente', 'em_andamento', 'concluido']),
-            ]);
-        }
-    }
-
-    private function createOrdemServicoItensSimples(OrdemServico $os, array $produtos): void
-    {
-        $numItens = fake()->numberBetween(1, 3);
-        $valorTotal = 0;
-
-        for ($i = 1; $i <= $numItens; $i++) {
-            $produto = fake()->randomElement($produtos);
-            $quantidade = fake()->randomFloat(2, 1, 10);
-            $valorUnitario = $produto->preco;
-            $valorItem = $quantidade * $valorUnitario;
-            $valorTotal += $valorItem;
-
-            OrdemServicoItem::create([
-                'ordem_servico_id' => $os->id,
-                'produto_id' => $produto->id,
-                'descricao' => $produto->nome,
-                'quantidade' => $quantidade,
-                'valor_unitario' => $valorUnitario,
-                'valor_total' => $valorItem,
-                'status' => fake()->randomElement(['pendente', 'em_andamento', 'concluido']),
-            ]);
-        }
-
-        $os->update(['valor_total' => $valorTotal]);
-    }
-
-    private function createAgendamentos(array $cadastros, array $ordensServico): void
-    {
-        $this->command->info('üìÖ Criando agendamentos...');
-
-        $clientes = array_filter($cadastros, fn ($c) => $c->tipo === 'cliente');
-
-        // Agendamentos para medi√ß√µes (sem OS)
-        for ($i = 1; $i <= 20; $i++) {
-            $cliente = fake()->randomElement($clientes);
-            $dataAgenda = fake()->dateTimeBetween('now', '+1 month');
-
-            Agenda::create([
-                'cadastro_id' => $cliente->id,
-                'titulo' => 'Medi√ß√£o - '.$cliente->nome,
-                'descricao' => fake('pt_BR')->sentence,
-                'data_inicio' => $dataAgenda,
-                'data_fim' => $dataAgenda->copy()->addHours(2),
-                'tipo' => 'medicao',
-                'status' => 'agendado',
-                'endereco_completo' => $cliente->logradouro.', '.$cliente->numero.' - '.$cliente->bairro,
-            ]);
-        }
-
-        // Agendamentos para instala√ß√µes (com OS)
-        foreach ($ordensServico as $os) {
-            if (fake()->boolean(60)) { // 60% das OSs t√™m agendamento
-                $dataInstalacao = fake()->dateTimeBetween($os->data_abertura, $os->data_prevista);
-
-                Agenda::create([
-                    'cadastro_id' => $os->cadastro_id,
-                    'ordem_servico_id' => $os->id,
-                    'titulo' => 'Instala√ß√£o - OS '.$os->numero,
-                    'descricao' => 'Instala√ß√£o conforme OS '.$os->numero,
-                    'data_inicio' => $dataInstalacao,
-                    'data_fim' => $dataInstalacao->copy()->addHours(6),
-                    'tipo' => 'instalacao',
-                    'status' => $os->status === 'concluida' ? 'concluido' : 'agendado',
-                    'endereco_completo' => $os->cadastro->logradouro.', '.$os->cadastro->numero,
-                ]);
-            }
-        }
-    }
-
-    private function createFinanceiros(array $categorias, array $cadastros, array $orcamentos, array $ordensServico): void
-    {
-        $this->command->info('üí≥ Criando movimenta√ß√µes financeiras...');
-
-        $categoriasMap = collect($categorias)->keyBy('nome');
-
-        // Receitas de or√ßamentos aprovados
-        $orcamentosAprovados = array_filter($orcamentos, fn ($o) => $o->status === 'aprovado');
-
-        foreach ($orcamentosAprovados as $orcamento) {
-            $parcelas = fake()->numberBetween(1, 6);
-            $valorParcela = $orcamento->valor_total / $parcelas;
-
-            for ($p = 1; $p <= $parcelas; $p++) {
-                $dataVencimento = fake()->dateTimeBetween($orcamento->data_orcamento, '+4 months');
-                $status = $dataVencimento < now() ?
-                    fake()->randomElement(['pago', 'atrasado']) : 'pendente';
-
-                Financeiro::create([
-                    'cadastro_id' => $orcamento->cadastro_id,
-                    'orcamento_id' => $orcamento->id,
-                    'tipo' => 'entrada',
-                    'categoria' => 'Vendas de Produtos',
-                    'categoria_id' => $categoriasMap->get('Vendas de Produtos')?->id,
-                    'descricao' => "Pagamento Or√ßamento {$orcamento->numero} - Parcela {$p}/{$parcelas}",
-                    'valor' => $valorParcela,
-                    'valor_pago' => $status === 'pago' ? $valorParcela : 0,
-                    'data' => $orcamento->data_orcamento,
-                    'data_vencimento' => $dataVencimento,
-                    'data_pagamento' => $status === 'pago' ? $dataVencimento : null,
-                    'status' => $status,
-                    'forma_pagamento' => fake()->randomElement(['dinheiro', 'pix', 'cartao_credito', 'cartao_debito', 'transferencia']),
-                    'observacoes' => fake('pt_BR')->optional(0.3)->sentence,
-                ]);
-            }
-        }
-
-        // Receitas de servi√ßos (baseadas em OSs)
-        foreach ($ordensServico as $os) {
-            if (fake()->boolean(40) && ! $os->orcamento_id) { // 40% das OSs sem or√ßamento geram receita de servi√ßo
-                $categoria = fake()->randomElement(['Servi√ßos de Instala√ß√£o', 'Servi√ßos de Medi√ß√£o']);
-
-                Financeiro::create([
-                    'cadastro_id' => $os->cadastro_id,
-                    'ordem_servico_id' => $os->id,
-                    'tipo' => 'entrada',
-                    'categoria' => $categoria,
-                    'categoria_id' => $categoriasMap->get($categoria)?->id,
-                    'descricao' => "Servi√ßo - OS {$os->numero}",
-                    'valor' => fake()->randomFloat(2, 200, 1000),
-                    'valor_pago' => fake()->boolean(70) ? fake()->randomFloat(2, 200, 1000) : 0,
-                    'data' => $os->data_abertura,
-                    'data_vencimento' => fake()->dateTimeBetween($os->data_abertura, '+1 month'),
-                    'status' => fake()->randomElement(['pago', 'pendente']),
-                    'forma_pagamento' => fake()->randomElement(['dinheiro', 'pix', 'cartao_debito']),
-                ]);
-            }
-        }
-
-        // Comiss√µes para vendedores/arquitetos
-        $parceiros = array_filter($cadastros, fn ($c) => in_array($c->tipo, ['vendedor', 'arquiteto']));
-
-        foreach ($orcamentosAprovados as $orcamento) {
-            if ($orcamento->vendedor_id || $orcamento->arquiteto_id) {
-                $vendedor = collect($cadastros)->firstWhere('id', $orcamento->vendedor_id);
-                $arquiteto = collect($cadastros)->firstWhere('id', $orcamento->arquiteto_id);
-
-                if ($vendedor && $vendedor->comissao_percentual) {
-                    $valorComissao = $orcamento->valor_total * ($vendedor->comissao_percentual / 100);
-
-                    Financeiro::create([
-                        'cadastro_id' => $vendedor->id,
-                        'orcamento_id' => $orcamento->id,
-                        'tipo' => 'saida',
-                        'categoria' => 'Comiss√µes de Vendas',
-                        'categoria_id' => $categoriasMap->get('Comiss√µes de Vendas')?->id,
-                        'descricao' => "Comiss√£o Vendedor - {$orcamento->numero}",
-                        'valor' => $valorComissao,
-                        'valor_pago' => fake()->boolean(80) ? $valorComissao : 0,
-                        'data' => fake()->dateTimeBetween($orcamento->data_orcamento, 'now'),
-                        'data_vencimento' => fake()->dateTimeBetween($orcamento->data_orcamento, '+1 month'),
-                        'status' => fake()->randomElement(['pago', 'pendente']),
-                        'forma_pagamento' => fake()->randomElement(['transferencia', 'pix']),
-                    ]);
-                }
-
-                if ($arquiteto && $arquiteto->comissao_percentual) {
-                    $valorComissao = $orcamento->valor_total * ($arquiteto->comissao_percentual / 100);
-
-                    Financeiro::create([
-                        'cadastro_id' => $arquiteto->id,
-                        'orcamento_id' => $orcamento->id,
-                        'tipo' => 'saida',
-                        'categoria' => 'Comiss√µes de Vendas',
-                        'categoria_id' => $categoriasMap->get('Comiss√µes de Vendas')?->id,
-                        'descricao' => "Comiss√£o Arquiteto - {$orcamento->numero}",
-                        'valor' => $valorComissao,
-                        'valor_pago' => fake()->boolean(80) ? $valorComissao : 0,
-                        'data' => fake()->dateTimeBetween($orcamento->data_orcamento, 'now'),
-                        'data_vencimento' => fake()->dateTimeBetween($orcamento->data_orcamento, '+1 month'),
-                        'status' => fake()->randomElement(['pago', 'pendente']),
-                        'forma_pagamento' => fake()->randomElement(['transferencia', 'pix']),
-                    ]);
-                }
-            }
-        }
-
-        // Despesas operacionais diversas
-        $despesasCategorias = [
-            'Compra de Materiais' => 50,
-            'Sal√°rios e Encargos' => 20,
-            'Impostos e Taxas' => 15,
-            'Marketing e Publicidade' => 10,
-            'Combust√≠vel e Transporte' => 25,
-            'Manuten√ß√£o de Equipamentos' => 8,
-            'Aluguel e Utilidades' => 12,
-            'Despesas Administrativas' => 15,
-        ];
-
-        foreach ($despesasCategorias as $categoria => $quantidade) {
-            for ($i = 1; $i <= $quantidade; $i++) {
-                $dataVencimento = fake()->dateTimeBetween('-3 months', '+2 months');
-                $status = $dataVencimento < now() ?
-                    fake()->randomElement(['pago', 'atrasado']) : 'pendente';
-
-                $valorRange = match ($categoria) {
-                    'Sal√°rios e Encargos' => [2000, 8000],
-                    'Aluguel e Utilidades' => [1500, 5000],
-                    'Compra de Materiais' => [500, 10000],
-                    'Impostos e Taxas' => [300, 3000],
-                    default => [100, 2000],
-                };
-
-                $valor = fake()->randomFloat(2, $valorRange[0], $valorRange[1]);
-
-                Financeiro::create([
-                    'tipo' => 'saida',
-                    'categoria' => $categoria,
-                    'categoria_id' => $categoriasMap->get($categoria)?->id,
-                    'descricao' => fake('pt_BR')->sentence,
-                    'valor' => $valor,
-                    'valor_pago' => $status === 'pago' ? $valor : 0,
-                    'data' => fake()->dateTimeBetween('-3 months', 'now'),
-                    'data_vencimento' => $dataVencimento,
-                    'data_pagamento' => $status === 'pago' ? $dataVencimento : null,
-                    'status' => $status,
-                    'forma_pagamento' => fake()->randomElement(['transferencia', 'pix', 'boleto', 'cartao_credito']),
-                    'observacoes' => fake('pt_BR')->optional(0.4)->sentence,
-                ]);
-            }
-        }
-    }
-
-    private function createGarantias(array $cadastros, array $produtos, array $ordensServico): void
-    {
-        $this->command->info('üõ°Ô∏è Criando garantias...');
-
-        $clientes = array_filter($cadastros, fn ($c) => $c->tipo === 'cliente');
-        $produtosFisicos = array_filter($produtos, fn ($p) => $p->categoria !== 'Servi√ßos');
-
-        // Garantias baseadas em OSs conclu√≠das
-        $osConcluidas = array_filter($ordensServico, fn ($os) => $os->status === 'concluida');
-
-        foreach ($osConcluidas as $os) {
-            if (fake()->boolean(70)) { // 70% das OSs conclu√≠das t√™m garantia
-                $dataInicio = $os->data_conclusao ?? fake()->dateTimeBetween('-1 year', 'now');
-
-                Garantia::create([
-                    'cadastro_id' => $os->cadastro_id,
-                    'ordem_servico_id' => $os->id,
-                    'produto_id' => fake()->randomElement($produtosFisicos)->id,
-                    'tipo_garantia' => fake()->randomElement(['instalacao', 'produto', 'servico']),
-                    'data_inicio' => $dataInicio,
-                    'data_fim' => fake()->dateTimeBetween($dataInicio, $dataInicio->copy()->addYear()),
-                    'descricao' => fake('pt_BR')->sentence,
-                    'condicoes' => fake('pt_BR')->paragraph,
-                    'ativa' => fake()->boolean(90),
-                ]);
-            }
-        }
-
-        // Garantias independentes
-        for ($i = 1; $i <= 15; $i++) {
-            $cliente = fake()->randomElement($clientes);
-            $produto = fake()->randomElement($produtosFisicos);
-            $dataInicio = fake()->dateTimeBetween('-2 years', 'now');
-
-            Garantia::create([
-                'cadastro_id' => $cliente->id,
-                'produto_id' => $produto->id,
-                'tipo_garantia' => fake()->randomElement(['produto', 'servico']),
-                'data_inicio' => $dataInicio,
-                'data_fim' => fake()->dateTimeBetween($dataInicio, $dataInicio->copy()->addMonths(18)),
-                'descricao' => 'Garantia '.$produto->nome,
-                'condicoes' => fake('pt_BR')->paragraph,
-                'ativa' => fake()->boolean(85),
-            ]);
-        }
-    }
-
-    private function createNotasFiscais(array $orcamentos, array $cadastros): void
-    {
-        $this->command->info('üìÑ Criando notas fiscais...');
-
-        $orcamentosAprovados = array_filter($orcamentos, fn ($o) => $o->status === 'aprovado');
-
-        foreach ($orcamentosAprovados as $orcamento) {
-            if (fake()->boolean(60)) { // 60% dos or√ßamentos aprovados t√™m NF
-                $dataEmissao = fake()->dateTimeBetween($orcamento->data_orcamento, 'now');
-
-                NotaFiscal::create([
-                    'numero' => fake()->randomNumber(8, true),
-                    'serie' => fake()->randomElement(['001', '002', '003']),
-                    'cadastro_id' => $orcamento->cadastro_id,
-                    'orcamento_id' => $orcamento->id,
-                    'data_emissao' => $dataEmissao,
-                    'data_vencimento' => fake()->dateTimeBetween($dataEmissao, '+1 month'),
-                    'valor_total' => $orcamento->valor_total,
-                    'valor_impostos' => $orcamento->valor_total * 0.15, // 15% de impostos
-                    'status' => fake()->randomElement(['emitida', 'enviada', 'paga', 'cancelada']),
-                    'chave_acesso' => fake()->regexify('[0-9]{44}'),
-                    'observacoes' => fake('pt_BR')->optional(0.4)->sentence,
-                ]);
-            }
-        }
-    }
-
-    private function createTarefas(array $usuarios, array $cadastros, array $ordensServico): void
-    {
-        $this->command->info('‚úÖ Criando tarefas...');
-
-        // Tarefas relacionadas a OSs
-        foreach ($ordensServico as $os) {
-            if (fake()->boolean(80)) { // 80% das OSs t√™m tarefas
-                $numTarefas = fake()->numberBetween(1, 4);
-
-                for ($i = 1; $i <= $numTarefas; $i++) {
-                    $dataVencimento = fake()->dateTimeBetween($os->data_abertura, $os->data_prevista);
-
-                    Tarefa::create([
-                        'titulo' => fake()->randomElement([
-                            'Medi√ß√£o no local',
-                            'Corte das pe√ßas',
-                            'Instala√ß√£o',
-                            'Acabamento',
-                            'Entrega',
-                            'Revis√£o final',
-                        ]),
-                        'descricao' => fake('pt_BR')->sentence,
-                        'cadastro_id' => $os->cadastro_id,
-                        'ordem_servico_id' => $os->id,
-                        'usuario_responsavel_id' => fake()->randomElement($usuarios)->id,
-                        'data_vencimento' => $dataVencimento,
-                        'data_conclusao' => fake()->optional(0.6)->dateTimeBetween($os->data_abertura, 'now'),
-                        'prioridade' => fake()->randomElement(['baixa', 'media', 'alta', 'urgente']),
-                        'status' => fake()->randomElement(['pendente', 'em_andamento', 'concluida', 'cancelada']),
-                        'observacoes' => fake('pt_BR')->optional(0.4)->sentence,
-                    ]);
-                }
-            }
-        }
-
-        // Tarefas administrativas
-        for ($i = 1; $i <= 25; $i++) {
-            $usuario = fake()->randomElement($usuarios);
-            $cliente = fake()->optional(0.5)->randomElement($cadastros);
-
-            Tarefa::create([
-                'titulo' => fake()->randomElement([
-                    'Ligar para cliente',
-                    'Enviar or√ßamento',
-                    'Acompanhar pagamento',
-                    'Atualizar cadastro',
-                    'Fazer follow-up',
-                    'Organizar documentos',
-                ]),
-                'descricao' => fake('pt_BR')->sentence,
-                'cadastro_id' => $cliente?->id,
-                'usuario_responsavel_id' => $usuario->id,
-                'data_vencimento' => fake()->dateTimeBetween('now', '+1 month'),
-                'data_conclusao' => fake()->optional(0.4)->dateTimeBetween('-1 week', 'now'),
-                'prioridade' => fake()->randomElement(['baixa', 'media', 'alta']),
-                'status' => fake()->randomElement(['pendente', 'em_andamento', 'concluida']),
-                'observacoes' => fake('pt_BR')->optional(0.3)->sentence,
-            ]);
-        }
-    }
-
-    private function showStatistics(): void
-    {
-        $this->command->newLine();
-        $this->command->info('üìä Estat√≠sticas dos dados criados:');
-        $this->command->table(['Entidade', 'Registros Criados'], [
-            ['üë§ Usu√°rios', User::count()],
-            ['üë• Cadastros', Cadastro::count()],
-            ['üìÅ Categorias', Categoria::count()],
-            ['üì¶ Produtos', Produto::count()],
-            ['üí∞ Tabelas de Pre√ßo', TabelaPreco::count()],
-            ['üîß Equipamentos', Equipamento::count()],
-            ['üìä Estoques', Estoque::count()],
-            ['üí≠ Lista de Desejos', ListaDesejo::count()],
-            ['üí∞ Or√ßamentos', Orcamento::count()],
-            ['üìã Itens de Or√ßamento', OrcamentoItem::count()],
-            ['üîß Ordens de Servi√ßo', OrdemServico::count()],
-            ['üìã Itens de OS', OrdemServicoItem::count()],
-            ['üìÖ Agendamentos', Agenda::count()],
-            ['üí≥ Financeiros', Financeiro::count()],
-            // ['üí∞ Transa√ß√µes Financeiras', TransacaoFinanceira::count()], // Removido - sistema legacy
-            ['üõ°Ô∏è Garantias', Garantia::count()],
-            ['üìÑ Notas Fiscais', NotaFiscal::count()],
-            ['‚úÖ Tarefas', Tarefa::count()],
-        ]);
-
-        $this->command->newLine();
-        $this->command->info('üéâ Popula√ß√£o de dados conclu√≠da com sucesso!');
-        $this->command->warn('üí° Login padr√£o: admin@stofgard.com / admin123');
     }
 }
diff --git a/database/seeders/DatabaseSeeder.php b/database/seeders/DatabaseSeeder.php
index f13498b..1a0fa7b 100755
--- a/database/seeders/DatabaseSeeder.php
+++ b/database/seeders/DatabaseSeeder.php
@@ -18,9 +18,10 @@ class DatabaseSeeder extends Seeder
             ConfiguracaoSeeder::class,
             ConfigSeed::class, // Configura√ß√µes personalizadas do sistema
             AuxiliaryListsSeeder::class, // Listas auxiliares (unidades, tipos, etc.)
+            CadastroTipoSeeder::class,   // Categorias de cadastro (Cliente, Lead, etc.)
             TabelaPrecosSeeder::class,
             UserSeeder::class, // Create default admin and users
-            // CompleteTestDataSeeder::class, // ‚ö†Ô∏è Descomente apenas para desenvolvimento/teste
+            CompleteTestDataSeeder::class,
             // ClienteFactory::class, // (Se necess√°rio)
         ]);
     }
diff --git a/resources/views/filament/components/header.blade.php b/resources/views/filament/components/header.blade.php
index 32d3e2b..6f0f3fd 100644
--- a/resources/views/filament/components/header.blade.php
+++ b/resources/views/filament/components/header.blade.php
@@ -28,64 +28,63 @@
                 </svg>
             @endif
         </a>
+    </div>
 
-        {{-- Controles do usu√°rio --}}
-        <div class="flex items-center gap-2 md:gap-4">
-            @auth
-                {{-- Nome do usu√°rio (escondido em mobile) --}}
-                <span
-                    class="hidden md:inline text-sm font-medium text-gray-600 dark:text-gray-300">{{ auth()->user()->name }}</span>
+    {{-- Controles do usu√°rio --}}
+    <div class="flex items-center gap-2 md:gap-4">
+        @auth
+            {{-- Nome do usu√°rio (escondido em mobile) --}}
+            <span
+                class="hidden md:inline text-sm font-medium text-gray-600 dark:text-gray-300">{{ auth()->user()->name }}</span>
 
-                {{-- Bot√£o de Busca Universal --}}
-                <a href="{{ url('/admin/busca-universal') }}"
-                    class="p-2 md:p-2.5 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-all touch-target"
-                    title="Busca Universal">
-                    <svg class="w-5 h-5 md:w-6 md:h-6 text-gray-500 dark:text-gray-400" fill="currentColor"
-                        viewBox="0 0 24 24">
-                        <path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round"
-                            stroke-linejoin="round" />
-                        <circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="2" fill="none" />
-                    </svg>
-                </a>
+            {{-- Bot√£o de Busca Universal --}}
+            <a href="{{ url('/admin/busca-universal') }}"
+                class="p-2 md:p-2.5 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-all touch-target"
+                title="Busca Universal">
+                <svg class="w-5 h-5 md:w-6 md:h-6 text-gray-500 dark:text-gray-400" fill="currentColor" viewBox="0 0 24 24">
+                    <path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round"
+                        stroke-linejoin="round" />
+                    <circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="2" fill="none" />
+                </svg>
+            </a>
 
-                @php
-                    try {
-                        $unreadCount = \App\Services\NotificationService::getUnreadCount(auth()->user());
-                    } catch (\Throwable $e) {
-                        $unreadCount = 0;
-                    }
-                @endphp
+            @php
+                try {
+                    $unreadCount = \App\Services\NotificationService::getUnreadCount(auth()->user());
+                } catch (\Throwable $e) {
+                    $unreadCount = 0;
+                }
+            @endphp
 
-                <a href="{{ route('filament.admin.pages.notifications') }}"
-                    class="relative p-2 md:p-2.5 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-all touch-target"
-                    title="Notifica√ß√µes">
-                    <svg class="w-5 h-5 md:w-6 md:h-6 text-gray-500 dark:text-gray-400" fill="currentColor"
-                        viewBox="0 0 24 24">
+            <a href="{{ route('filament.admin.pages.notifications') }}"
+                class="relative p-2 md:p-2.5 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-all touch-target"
+                title="Notifica√ß√µes">
+                <svg class="w-5 h-5 md:w-6 md:h-6 text-gray-500 dark:text-gray-400" fill="currentColor" viewBox="0 0 24 24">
+                    <path
+                        d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z" />
+                </svg>
+                @if($unreadCount > 0)
+                    <span
+                        class="absolute -top-0.5 -right-0.5 md:-top-1 md:-right-1 flex h-4 w-4 md:h-5 md:w-5 items-center justify-center rounded-full text-[10px] md:text-xs font-bold bg-red-500 text-white">{{ $unreadCount > 9 ? '9+' : $unreadCount }}</span>
+                @endif
+            </a>
+
+            <form method="POST" action="{{ route('filament.admin.auth.logout') }}" class="inline">
+                @csrf
+                <button type="submit"
+                    class="p-2 md:p-2.5 rounded-xl hover:bg-red-50 dark:hover:bg-red-900/30 transition-all touch-target"
+                    title="Sair" onclick="return confirm('Deseja realmente sair do sistema?')">
+                    <svg class="w-5 h-5 md:w-6 md:h-6 text-red-500" fill="currentColor" viewBox="0 0 24 24">
                         <path
-                            d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z" />
+                            d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z" />
                     </svg>
-                    @if($unreadCount > 0)
-                        <span
-                            class="absolute -top-0.5 -right-0.5 md:-top-1 md:-right-1 flex h-4 w-4 md:h-5 md:w-5 items-center justify-center rounded-full text-[10px] md:text-xs font-bold bg-red-500 text-white">{{ $unreadCount > 9 ? '9+' : $unreadCount }}</span>
-                    @endif
-                </a>
-
-                <form method="POST" action="{{ route('filament.admin.auth.logout') }}" class="inline">
-                    @csrf
-                    <button type="submit"
-                        class="p-2 md:p-2.5 rounded-xl hover:bg-red-50 dark:hover:bg-red-900/30 transition-all touch-target"
-                        title="Sair" onclick="return confirm('Deseja realmente sair do sistema?')">
-                        <svg class="w-5 h-5 md:w-6 md:h-6 text-red-500" fill="currentColor" viewBox="0 0 24 24">
-                            <path
-                                d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z" />
-                        </svg>
-                    </button>
-                </form>
-            @endauth
+                </button>
+            </form>
+        @endauth
 
-            @guest
-                <a href="{{ url('/admin/login') }}"
-                    class="inline-block px-3 py-2 text-sm font-medium text-primary-700 bg-primary-50 border border-primary-200 rounded-lg hover:bg-primary-100 touch-target">Entrar</a>
-            @endguest
-        </div>
-    </div>
\ No newline at end of file
+        @guest
+            <a href="{{ url('/admin/login') }}"
+                class="inline-block px-3 py-2 text-sm font-medium text-primary-700 bg-primary-50 border border-primary-200 rounded-lg hover:bg-primary-100 touch-target">Entrar</a>
+        @endguest
+    </div>
+</div>
\ No newline at end of file
diff --git a/resources/views/pdf/orcamento.blade.php b/resources/views/pdf/orcamento.blade.php
index a58747b..2883f2c 100644
--- a/resources/views/pdf/orcamento.blade.php
+++ b/resources/views/pdf/orcamento.blade.php
@@ -24,8 +24,8 @@
             color: {{ $text }};
             line-height: 1.4;
             
-            /* Define content safe area via padding - AUMENTADO para evitar sobreposi√ß√£o */
-            padding-top: 6.2cm;    /* Ajustado para 6.2cm (Era 5.5cm) */
+            /* Define content safe area via padding */
+            padding-top: 4.5cm;    /* Reduzido de 6.2cm para 4.5cm */
             padding-bottom: 3cm;
             padding-left: 1cm;
             padding-right: 1cm;
diff --git a/tests/Browser/FinanceiroTest.php b/tests/Browser/FinanceiroTest.php
index 9c5e956..ae9b4ef 100644
--- a/tests/Browser/FinanceiroTest.php
+++ b/tests/Browser/FinanceiroTest.php
@@ -2,116 +2,59 @@
 
 namespace Tests\Browser;
 
+use App\Models\User;
 use Laravel\Dusk\Browser;
 use Tests\DuskTestCase;
 
 class FinanceiroTest extends DuskTestCase
 {
-    /**
-     * Test financeiro index page.
-     */
-    public function test_index_financeiro(): void
+    public function test_create_receita(): void
     {
         $this->browse(function (Browser $browser) {
-            $user = \App\Models\User::firstOrCreate(
+            $user = User::firstOrCreate(
                 ['email' => 'admin@test.com'],
-                [
-                    'name' => 'Admin Test',
-                    'password' => bcrypt('password'),
-                    'is_admin' => true,
-                ]
+                ['name' => 'Admin', 'password' => bcrypt('password'), 'is_admin' => true]
             );
 
             $browser->loginAs($user)
                 ->visit('/admin/financeiros')
-                ->assertSee('Financeiros')
-                ->assertSee('Nova Transa√ß√£o');
+                ->waitForText('Financeiros')
+                ->click('a[href*="/create"]')
+                ->waitForText('Novo Financeiro')
+                ->select('tipo', 'entrada')
+                ->type('descricao', 'Receita Teste Dusk')
+                ->type('valor', '500.00')
+                ->type('data_vencimento', now()->format('Y-m-d'))
+                ->press('Criar')
+                ->waitForText('Criado', 10)
+                ->assertSee('Receita Teste Dusk');
         });
     }
 
-    /**
-     * Test create financeiro.
-     */
-    public function test_create_financeiro(): void
+    public function test_financeiro_filters(): void
     {
         $this->browse(function (Browser $browser) {
-            $user = \App\Models\User::firstOrCreate(
-                ['email' => 'admin@test.com'],
-                [
-                    'name' => 'Admin Test',
-                    'password' => bcrypt('password'),
-                    'is_admin' => true,
-                ]
-            );
-
-            // Create required dependencies
-            $categoria = \App\Models\Categoria::firstOrCreate(
-                ['nome' => 'Vendas', 'tipo' => 'financeiro_receita'],
-                ['cor' => '#00ff00'] // Add required fields if any
-            );
-            $cliente = \App\Models\Cadastro::firstOrCreate(
-                ['nome' => 'Cliente Teste', 'tipo' => 'cliente'],
-                ['cpf_cnpj' => '00000000000']
-            );
+            $user = User::where('email', 'admin@test.com')->first();
+
+            // Create dummy data
+            \App\Models\Financeiro::create([
+                'descricao' => 'Despesa Filter Check',
+                'tipo' => 'saida',
+                'valor' => 100.00,
+                'data_vencimento' => now(),
+                'status' => 'pendente'
+            ]);
 
             $browser->loginAs($user)
-                ->visit('/admin/financeiros/create')
+                ->visit('/admin/financeiros')
+                ->waitForText('Despesa Filter Check')
+                // Open Filter (Filament standard filter icon or text)
+                ->click('button[title*="Filter"]') // Generic selector, might need adjustment
+                ->pause(500)
+                // Select Type 'Sa√≠da'
+                ->select('tableFilters[tipo][value]', 'saida') // Generic selector guess
                 ->pause(1000)
-                ->storeSource('debug_financeiro_create')
-                ->assertSee('Dados da Transa√ß√£o')
-                // Fill native inputs using ID
-                ->select('#data\\.tipo', 'entrada') // Escape dot in ID for CSS selector if needed, or use ID directly. Dusk select default uses name. try raw selector.
-                // Actually Dusk select expects name. If name is missing, we can use script or click options.
-                // But wait, the element has ID. ->select('#data.tipo', 'entrada') might work if logic allows ID.
-                // Let's try select using the ID selector directly if supported, or fallback to clicking options if it was custom.
-                // But seeing HTML, it IS native select.
-                // However, the ID contains a dot. Dusk/Driver might have issues with dot in ID unless escaped.
-                // Let's try type and generic interaction.
-                ->type('#data\\.descricao', 'Teste Dusk')
-                ->type('#data\\.descricao', 'Teste Dusk');
-
-            // Set numeric and date values using script to avoid locale/format issues
-            $dateValue = now()->addDays(5)->format('Y-m-d');
-            $browser->script([
-                "document.getElementById('data.valor').value = '123.45';",
-                "document.getElementById('data.valor').dispatchEvent(new Event('input', { bubbles: true }));",
-                "document.getElementById('data.data_vencimento').value = '$dateValue';",
-                "document.getElementById('data.data_vencimento').dispatchEvent(new Event('input', { bubbles: true }));",
-                "document.getElementById('data.data_vencimento').dispatchEvent(new Event('change', { bubbles: true }));",
-            ]);
-
-            // Select Status (standard select)
-            $browser->select('#data\\.status', 'pendente');
-
-            // Handle Choices.js for Cadastro
-
-            // Handle Choices.js for Cadastro
-            $browser->driver->findElement(\Facebook\WebDriver\WebDriverBy::xpath('//div[contains(@class, "choices") and .//select[@id="data.cadastro_id"]]'))->click();
-            $browser->pause(500);
-            $browser->driver->findElement(\Facebook\WebDriver\WebDriverBy::xpath('//div[contains(@class, "choices__list--dropdown")]//div[contains(text(), "Cliente Teste")]'))->click();
-
-            // Handle Choices.js for Categoria
-            $browser->driver->findElement(\Facebook\WebDriver\WebDriverBy::xpath('//div[contains(@class, "choices") and .//select[@id="data.categoria_id"]]'))->click();
-            $browser->pause(500);
-            $browser->driver->findElement(\Facebook\WebDriver\WebDriverBy::xpath('//div[contains(@class, "choices__list--dropdown")]//div[contains(text(), "Vendas")]'))->click();
-
-            $browser->pause(500);
-
-            $browser->pause(500);
-
-            // Use precise XPath to avoid clicking hidden Logout button (which is also type=submit)
-            // The "Create" button is the primary action in the form
-            $browser->driver->executeScript('arguments[0].scrollIntoView(true);', [
-                $browser->driver->findElement(\Facebook\WebDriver\WebDriverBy::cssSelector('.fi-form-actions button[type="submit"]')),
-            ]);
-            $browser->pause(500);
-            $browser->driver->findElement(\Facebook\WebDriver\WebDriverBy::cssSelector('.fi-form-actions button[type="submit"]'))->click();
-
-            $browser->assertDontSee('campo √© obrigat√≥rio')
-                ->assertDontSee('The field is required')
-                ->waitForText('Visualizar Financeiro', 10)
-                ->assertSee('Teste Dusk')
-                ->assertSee('123,45');
+                ->assertSee('Despesa Filter Check');
         });
     }
 }
diff --git a/tests/Browser/OrdemServicoTest.php b/tests/Browser/OrdemServicoTest.php
index e2fdb3f..9a0822b 100644
--- a/tests/Browser/OrdemServicoTest.php
+++ b/tests/Browser/OrdemServicoTest.php
@@ -12,9 +12,9 @@ use Tests\DuskTestCase;
 class OrdemServicoTest extends DuskTestCase
 {
     /**
-     * Test the index page of OrdemServico.
+     * Test the full lifecycle of an OS: Create -> Add Items -> Conclude -> Verify.
      */
-    public function test_index_ordem_servico(): void
+    public function test_os_lifecycle_flow(): void
     {
         $this->browse(function (Browser $browser) {
             $user = User::firstOrCreate(
@@ -25,154 +25,59 @@ class OrdemServicoTest extends DuskTestCase
                     'is_admin' => true,
                 ]
             );
-            $cliente = Cadastro::factory()->create(['tipo' => 'cliente', 'nome' => 'Cliente Index OS']);
 
-            // Create a sample OS
-            $os = OrdemServico::create([
-                'cadastro_id' => $cliente->id, // Fixed: use cadastro_id
-                'cliente_id' => null, // ensure legacy is null? or ignore
-                'data_abertura' => now(),
-                'status' => 'aberta',
-                'valor_total' => 150.00,
-                'criado_por' => $user->id,
-                'loja_id' => Cadastro::factory()->create(['tipo' => 'loja'])->id, // Required by model? nullable? Resource says required.
-                'vendedor_id' => Cadastro::factory()->create(['tipo' => 'vendedor'])->id, // Required?
-                'tipo_servico' => 'servico',
-            ]);
+            // Setup Data
+            $cliente = Cadastro::factory()->create(['tipo' => 'cliente', 'nome' => 'Cliente Lifecycle OS']);
+            $loja = Cadastro::factory()->create(['tipo' => 'loja']);
+            $vendedor = Cadastro::factory()->create(['tipo' => 'vendedor']);
 
-            $browser->loginAs($user)
-                ->visit('/admin/ordem-servicos')
-                // ->assertSee('Ordens de Servi√ßo') // Flexible check
-                ->assertSee('Ordem')
-                ->assertSee($os->numero_os)
-                ->assertSee('Cliente Index OS');
-        });
-    }
-
-    /**
-     * Test creating a new OrdemServico.
-     */
-    public function test_create_ordem_servico(): void
-    {
-        // $this->markTestSkipped('Skipping due to hang in headless environment dealing with repeater interaction.');
-
-        // return;
-
-        $this->browse(function (Browser $browser) {
-            $user = User::firstOrCreate(
-                ['email' => 'admin@test.com'],
-                [
-                    'name' => 'Admin Test',
-                    'password' => bcrypt('password'),
-                    'is_admin' => true,
-                ]
+            $servico = TabelaPreco::firstOrCreate(
+                ['nome_item' => 'Servico Teste Lifecycle'],
+                ['preco_vista' => 150.00, 'unidade_medida' => 'un', 'tipo_servico' => 'servico']
             );
 
-            // Create required data
-            $cliente = Cadastro::factory()->create(['tipo' => 'cliente', 'nome' => 'Cliente Teste OS']);
-            $loja = Cadastro::factory()->create(['tipo' => 'loja', 'nome' => 'Loja Teste OS']);
-            $vendedor = Cadastro::factory()->create(['tipo' => 'vendedor', 'nome' => 'Vendedor Teste OS']);
-
-            // Ensure we have a TabelaPreco item for the repeater
-            $item = TabelaPreco::first();
-            if (!$item) {
-                $item = TabelaPreco::create([
-                    'nome_item' => 'Item Teste OS',
-                    'preco_vista' => 100.00,
-                    'unidade_medida' => 'unidade',
-                    'ativo' => true,
-                    'tipo_servico' => 'higienizacao',
-                    'descricao_tecnica' => 'Higieniza√ß√£o Profissional de Estofados',
-                    'dias_garantia' => 90,
-                ]);
-            }
-
             $browser->loginAs($user)
                 ->visit('/admin/ordem-servicos/create')
-                ->waitForText('Identifica√ß√£o', 10);
-
-            // Helper to select Choices.js option
-            $selectChoice = function ($part, $text) use ($browser) {
-                $selector = "div[wire\\:key*=\"{$part}\"]";
-                $browser->waitFor($selector)
-                    ->click("$selector .choices")
-                    ->pause(200)
-                    ->type("$selector .choices__input--cloned", $text)
-                    ->pause(1000) // Search debounce
-                    // Click the first selectable option
-                    ->waitFor("$selector .choices__list[role=\"listbox\"] .choices__item--selectable")
-                    ->click("$selector .choices__list[role=\"listbox\"] .choices__item--selectable")
-                    ->pause(500);
-            };
-
-            // Select Cliente
-            $selectChoice('data.cadastro_id', $cliente->nome);
-
-            // Select Loja
-            $selectChoice('data.loja_id', $loja->nome);
-
-            // Select Vendedor
-            $selectChoice('data.vendedor_id', $vendedor->nome);
-
-            // Select Tipo Servico (Native Select)
-            // 'higienizacao' is the value (slug)
-            $browser->waitFor('#data\\.tipo_servico')
-                ->select('#data\\.tipo_servico', 'higienizacao')
-                ->pause(1000); // Wait for Livewire updates
-
-            // Select Status (Native Select)
-            $browser->select('#data\\.status', 'aberta')
-                ->pause(500);
-
-            // Repeater Item
-            // Default items = 1, so we don't need to click Add. Just find the existing one.
-            // $browser->click('button[wire\\:click*="mountFormComponentAction(\'data.itens\', \'add\')"]');
-            // $browser->pause(500);
-
-            // Fill Item Descricao (Script interaction for reliability)
-            // Use storeSource instead of dump with args
-            // Repeater Item Interaction
-            $repeaterSelector = '.fi-fo-repeater-item:first-child';
-            $descricaoWrapper = "$repeaterSelector .fi-fo-select";
-
-            // Open Choices dropdown for Description
-            $browser->waitFor($descricaoWrapper)
-                ->click("$descricaoWrapper .choices")
-                ->pause(300);
-
-            // Type search term and select
-            $browser->type("$descricaoWrapper .choices__input--cloned", $item->nome_item)
-                ->pause(1000) // Wait for search debounce
-                ->waitFor("$descricaoWrapper .choices__list[role=\"listbox\"] .choices__item--selectable")
-                ->click("$descricaoWrapper .choices__list[role=\"listbox\"] .choices__item--selectable")
-                ->pause(500);
-
-            // Fill Quantity
-            $browser->type("$repeaterSelector input[id*='quantidade']", '2')
-                ->pause(200);
-
-            // Fill Unit Price
-            $browser->type("$repeaterSelector input[id*='valor_unitario']", '150.00')
-                ->pause(200);
-
-
-
-            // Quantity and Unit Price should auto-fill or we set them.
-            // Just asserting correct calculation would be good, or just submit.
-
-            // Scroll to Create button
-            $browser->driver->executeScript("arguments[0].scrollIntoView({block: 'center', inline: 'nearest'});", [
-                $browser->driver->findElement(\Facebook\WebDriver\WebDriverBy::cssSelector('.fi-form-actions button[type="submit"]')),
-            ]);
-            $browser->pause(500);
-
-            // Submit
-            $browser->driver->executeScript('arguments[0].click();', [
-                $browser->driver->findElement(\Facebook\WebDriver\WebDriverBy::cssSelector('.fi-form-actions button[type="submit"]')),
-            ]);
-
-
-            $browser->waitForText('Criado', 15);
+                ->waitForText('Identifica√ß√£o', 10)
+
+                // Selects (using click/type for Choices.js or native)
+                // Assuming standard filament choices for relations
+                ->click('div[wire\\:key*="data.cadastro_id"] .choices')
+                ->type('div[wire\\:key*="data.cadastro_id"] .choices__input--cloned', 'Cliente Lifecycle OS')
+                ->pause(1000)
+                ->click('div[wire\\:key*="data.cadastro_id"] .choices__list[role="listbox"] .choices__item--selectable')
+
+                ->select('data.loja_id', $loja->id) // If native select, or adapt if choices
+                ->select('data.vendedor_id', $vendedor->id)
+
+                ->type('data.descricao_servico', 'Descri√ß√£o Completa do Servi√ßo')
+
+                // Add Item
+                ->click('button[wire\\:click*="mountFormComponentAction(\'data.itens\', \'add\')"]')
+                ->pause(500)
+                // Select Item
+                ->click('.fi-fo-repeater-item:first-child .choices')
+                ->type('.fi-fo-repeater-item:first-child .choices__input--cloned', 'Servico Teste Lifecycle')
+                ->pause(1000)
+                ->click('.fi-fo-repeater-item:first-child .choices__list[role="listbox"] .choices__item--selectable')
+
+                ->press('Criar')
+                ->waitForText('Criado', 10);
+
+            // Verify in List
+            $browser->visit('/admin/ordem-servicos')
+                ->waitForText('Cliente Lifecycle OS')
+                ->assertSee('Aberta');
+
+            // Test "Concluir" Action (Lifecycle)
+            // Need to find the specific row. Assuming it's the top one or filter.
+            $browser->click('button[title="Concluir OS"]') // From standardizing step
+                ->waitForText('Tem certeza', 5)
+                ->press('Confirmar')
+                ->waitForText('Conclu√≠da', 10);
+
+            // Verify Status Update
+            $browser->assertSee('Conclu√≠da');
         });
     }
 }
<?php

namespace App\Support\Filament;

use Filament\Tables;
use Filament\Tables\Actions\ActionGroup;
use Filament\Support\Colors\Color;

class StofgardTable
{
    /**
     * Retorna o padr√£o de a√ß√µes para todas as tabelas do sistema.
     * Agrupa em um dropdown "A√ß√µes" para limpar o visual e corrigir espa√ßamento.
     */
    public static function defaultActions(
        bool $view = true,
        bool $edit = true,
        bool $delete = true,
        array $extraActions = []
    ): array {
        $actions = [];

        // A√ß√£o de VISUALIZAR (Ficha)
        if ($view) {
            $actions[] = Tables\Actions\ViewAction::make()
                ->label('Ficha')
                ->icon('heroicon-m-document-text') // √çcone SVG nativo (M = Medium)
                ->color('info');
        }

        // A√ß√£o de EDITAR
        if ($edit) {
            $actions[] = Tables\Actions\EditAction::make()
                ->label('Editar')
                ->icon('heroicon-m-pencil-square')
                ->color('primary');
        }

        // Merge com a√ß√µes extras que o recurso espec√≠fico precisar (ex: Baixar PDF)
        $actions = array_merge($actions, $extraActions);

        // A√ß√£o de EXCLUIR (Sempre por √∫ltimo para seguran√ßa)
        if ($delete) {
            $actions[] = Tables\Actions\DeleteAction::make()
                ->label('Excluir')
                ->icon('heroicon-m-trash')
                ->color('danger')
                ->requiresConfirmation();
        }

        // Retorna tudo agrupado para n√£o estourar a largura da tabela
        return [
            ActionGroup::make($actions)
                ->label('Gerenciar')
                ->icon('heroicon-m-ellipsis-vertical')
                ->color('gray')
                ->tooltip('Op√ß√µes do registro'),
        ];
    }
}
